"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/trpc/[trpc]";
exports.ids = ["pages/api/trpc/[trpc]"];
exports.modules = {

/***/ "(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/pages/api/trpc/[trpc].ts */ \"(api-node)/./src/pages/api/trpc/[trpc].ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__]);\n_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/trpc/[trpc]\",\n        pathname: \"/api/trpc/[trpc]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    projectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/trpc/[trpc]\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: undefined,\n                multiZoneDraftMode: Boolean(\"false\"),\n                trustHostHeader: undefined,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/trpc/[trpc]\",\n                projectDir:  false || '',\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS40LjVfQGJhYmVsK2NvcmVANy4yOC4wX0BwbGF5d3JpZ2h0K3Rlc3RAMS41NC4xX3JlYWN0LWRvbUAxOS4xLjFfcmVhY3RAMTkuMS4xL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRnRycGMlMkYlNUJ0cnBjJTVELnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNDO0FBQ3VDO0FBQ3JDO0FBQzFEO0FBQzJEO0FBQ2E7QUFDRjtBQUN0RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsZ0JBQWdCLE1BQXVDO0FBQ3ZELENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQztBQUNBO0FBQ0EsdUJBQXVCLDRFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDZDQUE2QyxTQUE2QztBQUMxRiw0Q0FBNEMsT0FBd0M7QUFDcEYsaUNBQWlDLFNBQW9DO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixNQUF1QztBQUNuRTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGdGQUFjO0FBQy9FLCtEQUErRCx5Q0FBeUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUSxFQUFFLE1BQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEIsdUNBQXVDLFFBQVEsRUFBRSxRQUFRO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQVM7QUFDakIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwaS11dGlsc1wiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL3RycGMvW3RycGNdLnRzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RycGMvW3RycGNdXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdHJwYy9bdHJwY11cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZCxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS90cnBjL1t0cnBjXVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnksIHBhcmFtcywgcHJlcmVuZGVyTWFuaWZlc3QgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICAgICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgICAgIGNvbnN0IG9uUmVxdWVzdEVycm9yID0gcm91dGVNb2R1bGUuaW5zdHJ1bWVudGF0aW9uT25SZXF1ZXN0RXJyb3IuYmluZChyb3V0ZU1vZHVsZSk7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT5yb3V0ZU1vZHVsZS5yZW5kZXIocmVxLCByZXMsIHtcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgYWxsb3dlZFJldmFsaWRhdGVIZWFkZXJLZXlzOiBwcm9jZXNzLmVudi5fX05FWFRfQUxMT1dFRF9SRVZBTElEQVRFX0hFQURFUlMsXG4gICAgICAgICAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlOiBCb29sZWFuKHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREUpLFxuICAgICAgICAgICAgICAgIHRydXN0SG9zdEhlYWRlcjogcHJvY2Vzcy5lbnYuX19ORVhUX1RSVVNUX0hPU1RfSEVBREVSLFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGdldCB0aGlzIGZyb20gZnJvbSBydW50aW1lIGVudiBzbyBtYW5pZmVzdFxuICAgICAgICAgICAgICAgIC8vIGRvZXNuJ3QgbmVlZCB0byBsb2FkXG4gICAgICAgICAgICAgICAgcHJldmlld1Byb3BzOiBwcmVyZW5kZXJNYW5pZmVzdC5wcmV2aWV3LFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUVycm9yOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkZXY6IHJvdXRlTW9kdWxlLmlzRGV2LFxuICAgICAgICAgICAgICAgIHBhZ2U6IFwiL2FwaS90cnBjL1t0cnBjXVwiLFxuICAgICAgICAgICAgICAgIHByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/env.mjs":
/*!*********************!*\
  !*** ./src/env.mjs ***!
  \*********************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var _t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @t3-oss/env-nextjs */ \"@t3-oss/env-nextjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst env = (0,_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__.createEnv)({\n    /**\n   * Specify your server-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars.\n   */ server: {\n        DATABASE_URL: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().refine((str)=>{\n            // Allow both standard URLs and PostgreSQL connection strings\n            try {\n                new URL(str);\n                return true;\n            } catch  {\n                // Check if it's a valid PostgreSQL connection string\n                return str.startsWith(\"postgresql://\") || str.startsWith(\"postgres://\") || str.startsWith(\"file:\"); // SQLite\n            }\n        }, \"Invalid database URL\").refine((str)=>!str.includes(\"YOUR_MYSQL_URL_HERE\"), \"You forgot to change the default URL\"),\n        NODE_ENV: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n            \"development\",\n            \"test\",\n            \"production\"\n        ]).default(\"development\"),\n        NEXTAUTH_SECRET:  false ? 0 : zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1).optional(),\n        NEXTAUTH_URL: zod__WEBPACK_IMPORTED_MODULE_1__.z.preprocess(// This makes Vercel deployments not fail if you don't set NEXTAUTH_URL\n        // Since NextAuth.js automatically uses the VERCEL_URL if present.\n        (str)=>process.env.VERCEL_URL ?? str, // VERCEL_URL doesn't include `https` so it cant be validated as a URL\n        process.env.VERCEL ? zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1) : zod__WEBPACK_IMPORTED_MODULE_1__.z.string().url()),\n        // Add `.min(1) on ID and SECRET if you want to make sure they're not empty\n        DISCORD_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        DISCORD_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        GOOGLE_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        GOOGLE_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        APPLE_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        APPLE_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        ENCRYPTION_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(32).optional(),\n        // Stripe\n        STRIPE_SECRET_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        STRIPE_WEBHOOK_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        STRIPE_ANNUAL_PRICE_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        // Cron and Email\n        CRON_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        RESEND_API_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        // Admin Setup\n        ADMIN_EMAIL: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        ADMIN_PASSWORD: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        ADMIN_NAME: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        ADMIN_SETUP_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional()\n    },\n    /**\n   * Specify your client-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars. To expose them to the client, prefix them with\n   * `NEXT_PUBLIC_`.\n   */ client: {\n        // NEXT_PUBLIC_CLIENTVAR: z.string().min(1),\n        NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional()\n    },\n    /**\n   * You can't destruct `process.env` as a regular object in the Next.js edge runtimes (e.g.\n   * middlewares) or client-side so we need to destruct manually.\n   */ runtimeEnv: {\n        DATABASE_URL: process.env.DATABASE_URL,\n        NODE_ENV: \"development\",\n        NEXTAUTH_SECRET: process.env.NEXTAUTH_SECRET,\n        NEXTAUTH_URL: process.env.NEXTAUTH_URL,\n        DISCORD_CLIENT_ID: process.env.DISCORD_CLIENT_ID,\n        DISCORD_CLIENT_SECRET: process.env.DISCORD_CLIENT_SECRET,\n        GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n        GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n        APPLE_ID: process.env.APPLE_ID,\n        APPLE_SECRET: process.env.APPLE_SECRET,\n        ENCRYPTION_KEY: process.env.ENCRYPTION_KEY,\n        STRIPE_SECRET_KEY: process.env.STRIPE_SECRET_KEY,\n        STRIPE_WEBHOOK_SECRET: process.env.STRIPE_WEBHOOK_SECRET,\n        STRIPE_ANNUAL_PRICE_ID: process.env.STRIPE_ANNUAL_PRICE_ID,\n        NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: \"pk_test_51RsuoiKWyOIMnViyU30z0n4HddlpzgdTqR1gFAk8v3c4sy0OiHglFBCSxxOfeJyRyAX40HM3esEMoMCOEBsW9Ewc00MgNG6E1G\",\n        CRON_SECRET: process.env.CRON_SECRET,\n        RESEND_API_KEY: process.env.RESEND_API_KEY,\n        ADMIN_EMAIL: process.env.ADMIN_EMAIL,\n        ADMIN_PASSWORD: process.env.ADMIN_PASSWORD,\n        ADMIN_NAME: process.env.ADMIN_NAME,\n        ADMIN_SETUP_KEY: process.env.ADMIN_SETUP_KEY\n    },\n    /**\n   * Run `build` or `dev` with `SKIP_ENV_VALIDATION` to skip env validation. This is especially\n   * useful for Docker builds.\n   */ skipValidation: !!process.env.SKIP_ENV_VALIDATION,\n    /**\n   * Makes it so that empty strings are treated as undefined.\n   * `SOME_VAR: z.string()` and `SOME_VAR=''` will throw an error.\n   */ emptyStringAsUndefined: true\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLENBQUNnQixZQUFZO1FBQ3RDSyxtQkFBbUJSLFFBQVFiLEdBQUcsQ0FBQ3FCLGlCQUFpQjtRQUNoREMsdUJBQXVCVCxRQUFRYixHQUFHLENBQUNzQixxQkFBcUI7UUFDeERDLGtCQUFrQlYsUUFBUWIsR0FBRyxDQUFDdUIsZ0JBQWdCO1FBQzlDQyxzQkFBc0JYLFFBQVFiLEdBQUcsQ0FBQ3dCLG9CQUFvQjtRQUN0REMsVUFBVVosUUFBUWIsR0FBRyxDQUFDeUIsUUFBUTtRQUM5QkMsY0FBY2IsUUFBUWIsR0FBRyxDQUFDMEIsWUFBWTtRQUN0Q0MsZ0JBQWdCZCxRQUFRYixHQUFHLENBQUMyQixjQUFjO1FBQzFDQyxtQkFBbUJmLFFBQVFiLEdBQUcsQ0FBQzRCLGlCQUFpQjtRQUNoREMsdUJBQXVCaEIsUUFBUWIsR0FBRyxDQUFDNkIscUJBQXFCO1FBQ3hEQyx3QkFBd0JqQixRQUFRYixHQUFHLENBQUM4QixzQkFBc0I7UUFDMURRLG9DQUFvQ3pCLDZHQUE4QztRQUNsRmtCLGFBQWFsQixRQUFRYixHQUFHLENBQUMrQixXQUFXO1FBQ3BDQyxnQkFBZ0JuQixRQUFRYixHQUFHLENBQUNnQyxjQUFjO1FBQzFDQyxhQUFhcEIsUUFBUWIsR0FBRyxDQUFDaUMsV0FBVztRQUNwQ0MsZ0JBQWdCckIsUUFBUWIsR0FBRyxDQUFDa0MsY0FBYztRQUMxQ0MsWUFBWXRCLFFBQVFiLEdBQUcsQ0FBQ21DLFVBQVU7UUFDbENDLGlCQUFpQnZCLFFBQVFiLEdBQUcsQ0FBQ29DLGVBQWU7SUFDOUM7SUFDQTs7O0dBR0MsR0FDREksZ0JBQWdCLENBQUMsQ0FBQzNCLFFBQVFiLEdBQUcsQ0FBQ3lDLG1CQUFtQjtJQUNqRDs7O0dBR0MsR0FDREMsd0JBQXdCO0FBQzFCLEdBQUciLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvZW52Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbnYgfSBmcm9tIFwiQHQzLW9zcy9lbnYtbmV4dGpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5leHBvcnQgY29uc3QgZW52ID0gY3JlYXRlRW52KHtcbiAgLyoqXG4gICAqIFNwZWNpZnkgeW91ciBzZXJ2ZXItc2lkZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgc2NoZW1hIGhlcmUuIFRoaXMgd2F5IHlvdSBjYW4gZW5zdXJlIHRoZSBhcHBcbiAgICogaXNuJ3QgYnVpbHQgd2l0aCBpbnZhbGlkIGVudiB2YXJzLlxuICAgKi9cbiAgc2VydmVyOiB7XG4gICAgREFUQUJBU0VfVVJMOiB6XG4gICAgICAuc3RyaW5nKClcbiAgICAgIC5yZWZpbmUoXG4gICAgICAgIChzdHIpID0+IHtcbiAgICAgICAgICAvLyBBbGxvdyBib3RoIHN0YW5kYXJkIFVSTHMgYW5kIFBvc3RncmVTUUwgY29ubmVjdGlvbiBzdHJpbmdzXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ldyBVUkwoc3RyKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhIHZhbGlkIFBvc3RncmVTUUwgY29ubmVjdGlvbiBzdHJpbmdcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3RhcnRzV2l0aChcInBvc3RncmVzcWw6Ly9cIikgfHwgXG4gICAgICAgICAgICAgICAgICAgc3RyLnN0YXJ0c1dpdGgoXCJwb3N0Z3JlczovL1wiKSB8fFxuICAgICAgICAgICAgICAgICAgIHN0ci5zdGFydHNXaXRoKFwiZmlsZTpcIik7IC8vIFNRTGl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJJbnZhbGlkIGRhdGFiYXNlIFVSTFwiXG4gICAgICApXG4gICAgICAucmVmaW5lKFxuICAgICAgICAoc3RyKSA9PiAhc3RyLmluY2x1ZGVzKFwiWU9VUl9NWVNRTF9VUkxfSEVSRVwiKSxcbiAgICAgICAgXCJZb3UgZm9yZ290IHRvIGNoYW5nZSB0aGUgZGVmYXVsdCBVUkxcIlxuICAgICAgKSxcbiAgICBOT0RFX0VOVjogelxuICAgICAgLmVudW0oW1wiZGV2ZWxvcG1lbnRcIiwgXCJ0ZXN0XCIsIFwicHJvZHVjdGlvblwiXSlcbiAgICAgIC5kZWZhdWx0KFwiZGV2ZWxvcG1lbnRcIiksXG4gICAgTkVYVEFVVEhfU0VDUkVUOlxuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiXG4gICAgICAgID8gei5zdHJpbmcoKS5taW4oMSlcbiAgICAgICAgOiB6LnN0cmluZygpLm1pbigxKS5vcHRpb25hbCgpLFxuICAgIE5FWFRBVVRIX1VSTDogei5wcmVwcm9jZXNzKFxuICAgICAgLy8gVGhpcyBtYWtlcyBWZXJjZWwgZGVwbG95bWVudHMgbm90IGZhaWwgaWYgeW91IGRvbid0IHNldCBORVhUQVVUSF9VUkxcbiAgICAgIC8vIFNpbmNlIE5leHRBdXRoLmpzIGF1dG9tYXRpY2FsbHkgdXNlcyB0aGUgVkVSQ0VMX1VSTCBpZiBwcmVzZW50LlxuICAgICAgKHN0cikgPT4gcHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTCA/PyBzdHIsXG4gICAgICAvLyBWRVJDRUxfVVJMIGRvZXNuJ3QgaW5jbHVkZSBgaHR0cHNgIHNvIGl0IGNhbnQgYmUgdmFsaWRhdGVkIGFzIGEgVVJMXG4gICAgICBwcm9jZXNzLmVudi5WRVJDRUwgPyB6LnN0cmluZygpLm1pbigxKSA6IHouc3RyaW5nKCkudXJsKClcbiAgICApLFxuICAgIC8vIEFkZCBgLm1pbigxKSBvbiBJRCBhbmQgU0VDUkVUIGlmIHlvdSB3YW50IHRvIG1ha2Ugc3VyZSB0aGV5J3JlIG5vdCBlbXB0eVxuICAgIERJU0NPUkRfQ0xJRU5UX0lEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgRElTQ09SRF9DTElFTlRfU0VDUkVUOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgR09PR0xFX0NMSUVOVF9JRDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIEdPT0dMRV9DTElFTlRfU0VDUkVUOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgQVBQTEVfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBBUFBMRV9TRUNSRVQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBFTkNSWVBUSU9OX0tFWTogei5zdHJpbmcoKS5taW4oMzIpLm9wdGlvbmFsKCksXG4gICAgLy8gU3RyaXBlXG4gICAgU1RSSVBFX1NFQ1JFVF9LRVk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBTVFJJUEVfV0VCSE9PS19TRUNSRVQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBTVFJJUEVfQU5OVUFMX1BSSUNFX0lEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLy8gQ3JvbiBhbmQgRW1haWxcbiAgICBDUk9OX1NFQ1JFVDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIFJFU0VORF9BUElfS0VZOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLy8gQWRtaW4gU2V0dXBcbiAgICBBRE1JTl9FTUFJTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIEFETUlOX1BBU1NXT1JEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgQURNSU5fTkFNRTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIEFETUlOX1NFVFVQX0tFWTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9LFxuXG4gIC8qKlxuICAgKiBTcGVjaWZ5IHlvdXIgY2xpZW50LXNpZGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIHNjaGVtYSBoZXJlLiBUaGlzIHdheSB5b3UgY2FuIGVuc3VyZSB0aGUgYXBwXG4gICAqIGlzbid0IGJ1aWx0IHdpdGggaW52YWxpZCBlbnYgdmFycy4gVG8gZXhwb3NlIHRoZW0gdG8gdGhlIGNsaWVudCwgcHJlZml4IHRoZW0gd2l0aFxuICAgKiBgTkVYVF9QVUJMSUNfYC5cbiAgICovXG4gIGNsaWVudDoge1xuICAgIC8vIE5FWFRfUFVCTElDX0NMSUVOVFZBUjogei5zdHJpbmcoKS5taW4oMSksXG4gICAgTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB9LFxuXG4gIC8qKlxuICAgKiBZb3UgY2FuJ3QgZGVzdHJ1Y3QgYHByb2Nlc3MuZW52YCBhcyBhIHJlZ3VsYXIgb2JqZWN0IGluIHRoZSBOZXh0LmpzIGVkZ2UgcnVudGltZXMgKGUuZy5cbiAgICogbWlkZGxld2FyZXMpIG9yIGNsaWVudC1zaWRlIHNvIHdlIG5lZWQgdG8gZGVzdHJ1Y3QgbWFudWFsbHkuXG4gICAqL1xuICBydW50aW1lRW52OiB7XG4gICAgREFUQUJBU0VfVVJMOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXG4gICAgTk9ERV9FTlY6IHByb2Nlc3MuZW52Lk5PREVfRU5WLFxuICAgIE5FWFRBVVRIX1NFQ1JFVDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICAgIE5FWFRBVVRIX1VSTDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMLFxuICAgIERJU0NPUkRfQ0xJRU5UX0lEOiBwcm9jZXNzLmVudi5ESVNDT1JEX0NMSUVOVF9JRCxcbiAgICBESVNDT1JEX0NMSUVOVF9TRUNSRVQ6IHByb2Nlc3MuZW52LkRJU0NPUkRfQ0xJRU5UX1NFQ1JFVCxcbiAgICBHT09HTEVfQ0xJRU5UX0lEOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lELFxuICAgIEdPT0dMRV9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcbiAgICBBUFBMRV9JRDogcHJvY2Vzcy5lbnYuQVBQTEVfSUQsXG4gICAgQVBQTEVfU0VDUkVUOiBwcm9jZXNzLmVudi5BUFBMRV9TRUNSRVQsXG4gICAgRU5DUllQVElPTl9LRVk6IHByb2Nlc3MuZW52LkVOQ1JZUFRJT05fS0VZLFxuICAgIFNUUklQRV9TRUNSRVRfS0VZOiBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWSxcbiAgICBTVFJJUEVfV0VCSE9PS19TRUNSRVQ6IHByb2Nlc3MuZW52LlNUUklQRV9XRUJIT09LX1NFQ1JFVCxcbiAgICBTVFJJUEVfQU5OVUFMX1BSSUNFX0lEOiBwcm9jZXNzLmVudi5TVFJJUEVfQU5OVUFMX1BSSUNFX0lELFxuICAgIE5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVksXG4gICAgQ1JPTl9TRUNSRVQ6IHByb2Nlc3MuZW52LkNST05fU0VDUkVULFxuICAgIFJFU0VORF9BUElfS0VZOiBwcm9jZXNzLmVudi5SRVNFTkRfQVBJX0tFWSxcbiAgICBBRE1JTl9FTUFJTDogcHJvY2Vzcy5lbnYuQURNSU5fRU1BSUwsXG4gICAgQURNSU5fUEFTU1dPUkQ6IHByb2Nlc3MuZW52LkFETUlOX1BBU1NXT1JELFxuICAgIEFETUlOX05BTUU6IHByb2Nlc3MuZW52LkFETUlOX05BTUUsXG4gICAgQURNSU5fU0VUVVBfS0VZOiBwcm9jZXNzLmVudi5BRE1JTl9TRVRVUF9LRVksXG4gIH0sXG4gIC8qKlxuICAgKiBSdW4gYGJ1aWxkYCBvciBgZGV2YCB3aXRoIGBTS0lQX0VOVl9WQUxJREFUSU9OYCB0byBza2lwIGVudiB2YWxpZGF0aW9uLiBUaGlzIGlzIGVzcGVjaWFsbHlcbiAgICogdXNlZnVsIGZvciBEb2NrZXIgYnVpbGRzLlxuICAgKi9cbiAgc2tpcFZhbGlkYXRpb246ICEhcHJvY2Vzcy5lbnYuU0tJUF9FTlZfVkFMSURBVElPTixcbiAgLyoqXG4gICAqIE1ha2VzIGl0IHNvIHRoYXQgZW1wdHkgc3RyaW5ncyBhcmUgdHJlYXRlZCBhcyB1bmRlZmluZWQuXG4gICAqIGBTT01FX1ZBUjogei5zdHJpbmcoKWAgYW5kIGBTT01FX1ZBUj0nJ2Agd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICovXG4gIGVtcHR5U3RyaW5nQXNVbmRlZmluZWQ6IHRydWUsXG59KTsiXSwibmFtZXMiOlsiY3JlYXRlRW52IiwieiIsImVudiIsInNlcnZlciIsIkRBVEFCQVNFX1VSTCIsInN0cmluZyIsInJlZmluZSIsInN0ciIsIlVSTCIsInN0YXJ0c1dpdGgiLCJpbmNsdWRlcyIsIk5PREVfRU5WIiwiZW51bSIsImRlZmF1bHQiLCJORVhUQVVUSF9TRUNSRVQiLCJwcm9jZXNzIiwibWluIiwib3B0aW9uYWwiLCJORVhUQVVUSF9VUkwiLCJwcmVwcm9jZXNzIiwiVkVSQ0VMX1VSTCIsIlZFUkNFTCIsInVybCIsIkRJU0NPUkRfQ0xJRU5UX0lEIiwiRElTQ09SRF9DTElFTlRfU0VDUkVUIiwiR09PR0xFX0NMSUVOVF9JRCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiQVBQTEVfSUQiLCJBUFBMRV9TRUNSRVQiLCJFTkNSWVBUSU9OX0tFWSIsIlNUUklQRV9TRUNSRVRfS0VZIiwiU1RSSVBFX1dFQkhPT0tfU0VDUkVUIiwiU1RSSVBFX0FOTlVBTF9QUklDRV9JRCIsIkNST05fU0VDUkVUIiwiUkVTRU5EX0FQSV9LRVkiLCJBRE1JTl9FTUFJTCIsIkFETUlOX1BBU1NXT1JEIiwiQURNSU5fTkFNRSIsIkFETUlOX1NFVFVQX0tFWSIsImNsaWVudCIsIk5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVkiLCJydW50aW1lRW52Iiwic2tpcFZhbGlkYXRpb24iLCJTS0lQX0VOVl9WQUxJREFUSU9OIiwiZW1wdHlTdHJpbmdBc1VuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/env.mjs\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/trpc/[trpc].ts":
/*!**************************************!*\
  !*** ./src/pages/api/trpc/[trpc].ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server/adapters/next */ \"@trpc/server/adapters/next\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _server_api_root__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/server/api/root */ \"(api-node)/./src/server/api/root.ts\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__, _server_api_root__WEBPACK_IMPORTED_MODULE_2__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__]);\n([_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__, _server_api_root__WEBPACK_IMPORTED_MODULE_2__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__.createNextApiHandler)({\n    router: _server_api_root__WEBPACK_IMPORTED_MODULE_2__.appRouter,\n    createContext: _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.createTRPCContext,\n    onError: _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV === \"development\" ? ({ path, error, type, ctx, input })=>{\n        console.error(`‚ùå tRPC failed on ${path ?? \"<no-path>\"}: ${error.message}`);\n        console.error(\"Error details:\", {\n            path,\n            type,\n            input,\n            code: error.code,\n            httpStatus: error.httpStatus,\n            cause: error.cause\n        });\n    } : undefined\n}));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvdHJwYy9bdHJwY10udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0U7QUFFbEM7QUFDYztBQUNRO0FBRXRELGlFQUFlQSxnRkFBb0JBLENBQUM7SUFDbENJLFFBQVFGLHVEQUFTQTtJQUNqQkcsZUFBZUYsK0RBQWlCQTtJQUNoQ0csU0FDRUwseUNBQUdBLENBQUNNLFFBQVEsS0FBSyxnQkFDYixDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsRUFBRUMsS0FBSyxFQUFFO1FBQ2hDQyxRQUFRSixLQUFLLENBQ1gsQ0FBQyxpQkFBaUIsRUFBRUQsUUFBUSxZQUFZLEVBQUUsRUFBRUMsTUFBTUssT0FBTyxFQUFFO1FBRTdERCxRQUFRSixLQUFLLENBQUMsa0JBQWtCO1lBQzlCRDtZQUNBRTtZQUNBRTtZQUNBRyxNQUFNTixNQUFNTSxJQUFJO1lBQ2hCQyxZQUFZLE1BQWVBLFVBQVU7WUFDckNDLE9BQU9SLE1BQU1RLEtBQUs7UUFDcEI7SUFDRixJQUNBQztBQUNSLEVBQUUsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9wYWdlcy9hcGkvdHJwYy9bdHJwY10udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTmV4dEFwaUhhbmRsZXIgfSBmcm9tIFwiQHRycGMvc2VydmVyL2FkYXB0ZXJzL25leHRcIjtcblxuaW1wb3J0IHsgZW52IH0gZnJvbSBcIn4vZW52Lm1qc1wiO1xuaW1wb3J0IHsgYXBwUm91dGVyIH0gZnJvbSBcIn4vc2VydmVyL2FwaS9yb290XCI7XG5pbXBvcnQgeyBjcmVhdGVUUlBDQ29udGV4dCB9IGZyb20gXCJ+L3NlcnZlci9hcGkvdHJwY1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVOZXh0QXBpSGFuZGxlcih7XG4gIHJvdXRlcjogYXBwUm91dGVyLFxuICBjcmVhdGVDb250ZXh0OiBjcmVhdGVUUlBDQ29udGV4dCxcbiAgb25FcnJvcjpcbiAgICBlbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIlxuICAgICAgPyAoeyBwYXRoLCBlcnJvciwgdHlwZSwgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIGDinYwgdFJQQyBmYWlsZWQgb24gJHtwYXRoID8/IFwiPG5vLXBhdGg+XCJ9OiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZXRhaWxzOlwiLCB7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgY29kZTogZXJyb3IuY29kZSxcbiAgICAgICAgICAgIGh0dHBTdGF0dXM6IChlcnJvciBhcyBhbnkpLmh0dHBTdGF0dXMsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3IuY2F1c2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIDogdW5kZWZpbmVkLFxufSk7Il0sIm5hbWVzIjpbImNyZWF0ZU5leHRBcGlIYW5kbGVyIiwiZW52IiwiYXBwUm91dGVyIiwiY3JlYXRlVFJQQ0NvbnRleHQiLCJyb3V0ZXIiLCJjcmVhdGVDb250ZXh0Iiwib25FcnJvciIsIk5PREVfRU5WIiwicGF0aCIsImVycm9yIiwidHlwZSIsImN0eCIsImlucHV0IiwiY29uc29sZSIsIm1lc3NhZ2UiLCJjb2RlIiwiaHR0cFN0YXR1cyIsImNhdXNlIiwidW5kZWZpbmVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/trpc/[trpc].ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/root.ts":
/*!********************************!*\
  !*** ./src/server/api/root.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/routers/healthz */ \"(api-node)/./src/server/api/routers/healthz.ts\");\n/* harmony import */ var _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/server/api/routers/user */ \"(api-node)/./src/server/api/routers/user.ts\");\n/* harmony import */ var _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/server/api/routers/subscription */ \"(api-node)/./src/server/api/routers/subscription.ts\");\n/* harmony import */ var _server_api_routers_provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ~/server/api/routers/provider */ \"(api-node)/./src/server/api/routers/provider.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__, _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__, _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__, _server_api_routers_provider__WEBPACK_IMPORTED_MODULE_4__]);\n([_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__, _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__, _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__, _server_api_routers_provider__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst appRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    healthz: _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__.healthzRouter,\n    user: _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__.userRouter,\n    subscription: _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__.subscriptionRouter,\n    provider: _server_api_routers_provider__WEBPACK_IMPORTED_MODULE_4__.providerRouter\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3Jvb3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ1E7QUFDTjtBQUNnQjtBQUNSO0FBRXhELE1BQU1LLFlBQVlMLGtFQUFnQkEsQ0FBQztJQUN4Q00sU0FBU0wsc0VBQWFBO0lBQ3RCTSxNQUFNTCxnRUFBVUE7SUFDaEJNLGNBQWNMLGdGQUFrQkE7SUFDaENNLFVBQVVMLHdFQUFjQTtBQUMxQixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3NlcnZlci9hcGkvcm9vdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVUUlBDUm91dGVyIH0gZnJvbSBcIn4vc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBoZWFsdGh6Um91dGVyIH0gZnJvbSBcIn4vc2VydmVyL2FwaS9yb3V0ZXJzL2hlYWx0aHpcIjtcbmltcG9ydCB7IHVzZXJSb3V0ZXIgfSBmcm9tIFwifi9zZXJ2ZXIvYXBpL3JvdXRlcnMvdXNlclwiO1xuaW1wb3J0IHsgc3Vic2NyaXB0aW9uUm91dGVyIH0gZnJvbSBcIn4vc2VydmVyL2FwaS9yb3V0ZXJzL3N1YnNjcmlwdGlvblwiO1xuaW1wb3J0IHsgcHJvdmlkZXJSb3V0ZXIgfSBmcm9tIFwifi9zZXJ2ZXIvYXBpL3JvdXRlcnMvcHJvdmlkZXJcIjtcblxuZXhwb3J0IGNvbnN0IGFwcFJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBoZWFsdGh6OiBoZWFsdGh6Um91dGVyLFxuICB1c2VyOiB1c2VyUm91dGVyLFxuICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvblJvdXRlcixcbiAgcHJvdmlkZXI6IHByb3ZpZGVyUm91dGVyLFxufSk7XG5cbmV4cG9ydCB0eXBlIEFwcFJvdXRlciA9IHR5cGVvZiBhcHBSb3V0ZXI7Il0sIm5hbWVzIjpbImNyZWF0ZVRSUENSb3V0ZXIiLCJoZWFsdGh6Um91dGVyIiwidXNlclJvdXRlciIsInN1YnNjcmlwdGlvblJvdXRlciIsInByb3ZpZGVyUm91dGVyIiwiYXBwUm91dGVyIiwiaGVhbHRoeiIsInVzZXIiLCJzdWJzY3JpcHRpb24iLCJwcm92aWRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/root.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/healthz.ts":
/*!*******************************************!*\
  !*** ./src/server/api/routers/healthz.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   healthzRouter: () => (/* binding */ healthzRouter)\n/* harmony export */ });\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__]);\n_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst healthzRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    healthz: _server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(()=>{\n        return {\n            status: \"ok\",\n            timestamp: new Date().toISOString()\n        };\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvaGVhbHRoei50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzRTtBQUUvRCxNQUFNRSxnQkFBZ0JGLGtFQUFnQkEsQ0FBQztJQUM1Q0csU0FBU0YsNkRBQWVBLENBQUNHLEtBQUssQ0FBQztRQUM3QixPQUFPO1lBQ0xDLFFBQVE7WUFDUkMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DO0lBQ0Y7QUFDRixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3NlcnZlci9hcGkvcm91dGVycy9oZWFsdGh6LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVRSUENSb3V0ZXIsIHB1YmxpY1Byb2NlZHVyZSB9IGZyb20gXCJ+L3NlcnZlci9hcGkvdHJwY1wiO1xuXG5leHBvcnQgY29uc3QgaGVhbHRoelJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBoZWFsdGh6OiBwdWJsaWNQcm9jZWR1cmUucXVlcnkoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IFwib2tcIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH07XG4gIH0pLFxufSk7Il0sIm5hbWVzIjpbImNyZWF0ZVRSUENSb3V0ZXIiLCJwdWJsaWNQcm9jZWR1cmUiLCJoZWFsdGh6Um91dGVyIiwiaGVhbHRoeiIsInF1ZXJ5Iiwic3RhdHVzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/healthz.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/provider.ts":
/*!********************************************!*\
  !*** ./src/server/api/routers/provider.ts ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   providerRouter: () => (/* binding */ providerRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _trpc_server__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _trpc_server__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// Admin-only procedure\nconst adminProcedure = _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.use({\n    \"use[adminProcedure]\": async ({ ctx, next })=>{\n        if (ctx.session.user.role !== \"ADMIN\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"Only admins can perform this action\"\n            });\n        }\n        return next();\n    }\n}[\"use[adminProcedure]\"]);\n// Input schemas\nconst createProviderSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, \"Name is required\"),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    website: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"\")),\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().email().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"\")),\n    phone: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    suburb: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    state: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    postcode: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    latitude: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    longitude: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    logoUrl: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"\")),\n    bannerImageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"\")),\n    tags: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    certifications: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    specializations: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    ageGroups: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    isVetted: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n    isPublished: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n});\nconst updateProviderSchema = createProviderSchema.partial().extend({\n    id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nconst createProgramSchema = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    providerId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1, \"Name is required\"),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    category: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    startDate: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().optional(),\n    endDate: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().optional(),\n    duration: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    schedule: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    minAge: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(0).optional(),\n    maxAge: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(0).optional(),\n    capacity: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(0).optional(),\n    spotsAvailable: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().int().min(0).optional(),\n    price: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(0).optional(),\n    earlyBirdPrice: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().min(0).optional(),\n    earlyBirdDeadline: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().optional(),\n    venue: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    suburb: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    imageUrl: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"\")),\n    galleryUrls: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url()).optional(),\n    requirements: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    includedItems: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    activities: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    isActive: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n    isPublished: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n});\nconst providerRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    // Get all providers (admin only)\n    getAll: adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        includeUnpublished: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional(),\n        includeUnvetted: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean().optional()\n    }).optional()).query(async ({ ctx, input })=>{\n        const where = {};\n        if (!input?.includeUnpublished) {\n            where.isPublished = true;\n        }\n        if (!input?.includeUnvetted) {\n            where.isVetted = true;\n        }\n        return ctx.db.provider.findMany({\n            where,\n            include: {\n                programs: true\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n    }),\n    // Get published providers (public)\n    getPublished: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        return ctx.db.provider.findMany({\n            where: {\n                isPublished: true,\n                isVetted: true\n            },\n            include: {\n                programs: {\n                    where: {\n                        isPublished: true,\n                        isActive: true\n                    }\n                }\n            },\n            orderBy: {\n                name: \"asc\"\n            }\n        });\n    }),\n    // Get single provider\n    getById: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ ctx, input })=>{\n        const provider = await ctx.db.provider.findUnique({\n            where: {\n                id: input.id\n            },\n            include: {\n                programs: true\n            }\n        });\n        if (!provider) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Provider not found\"\n            });\n        }\n        // Check if user can view unpublished providers\n        if (!provider.isPublished && ctx.session.user.role !== \"ADMIN\") {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"FORBIDDEN\",\n                message: \"This provider is not published\"\n            });\n        }\n        return provider;\n    }),\n    // Create provider (admin only)\n    create: adminProcedure.input(createProviderSchema).mutation(async ({ ctx, input })=>{\n        const { tags, certifications, specializations, ageGroups, ...providerData } = input;\n        const provider = await ctx.db.provider.create({\n            data: {\n                ...providerData,\n                tags: tags ? JSON.stringify(tags) : null,\n                certifications: certifications ? JSON.stringify(certifications) : null,\n                specializations: specializations ? JSON.stringify(specializations) : null,\n                ageGroups: ageGroups ? JSON.stringify(ageGroups) : null,\n                vettedBy: input.isVetted ? ctx.session.user.id : null,\n                vettedAt: input.isVetted ? new Date() : null,\n                publishedAt: input.isPublished ? new Date() : null\n            }\n        });\n        // Audit log\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Provider created\", {\n            userId: ctx.session.user.id,\n            correlationId: ctx.correlationId\n        }, {\n            providerId: provider.id,\n            action: \"PROVIDER_CREATED\"\n        });\n        return provider;\n    }),\n    // Update provider (admin only)\n    update: adminProcedure.input(updateProviderSchema).mutation(async ({ ctx, input })=>{\n        const { id, tags, certifications, specializations, ageGroups, ...updateData } = input;\n        // Check if vetting status changed\n        const existingProvider = await ctx.db.provider.findUnique({\n            where: {\n                id\n            },\n            select: {\n                isVetted: true,\n                isPublished: true\n            }\n        });\n        if (!existingProvider) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Provider not found\"\n            });\n        }\n        const dataToUpdate = {\n            ...updateData\n        };\n        // Handle JSON fields\n        if (tags !== undefined) {\n            dataToUpdate.tags = tags ? JSON.stringify(tags) : null;\n        }\n        if (certifications !== undefined) {\n            dataToUpdate.certifications = certifications ? JSON.stringify(certifications) : null;\n        }\n        if (specializations !== undefined) {\n            dataToUpdate.specializations = specializations ? JSON.stringify(specializations) : null;\n        }\n        if (ageGroups !== undefined) {\n            dataToUpdate.ageGroups = ageGroups ? JSON.stringify(ageGroups) : null;\n        }\n        // Update vetting info if status changed\n        if (input.isVetted !== undefined && input.isVetted !== existingProvider.isVetted) {\n            dataToUpdate.vettedBy = input.isVetted ? ctx.session.user.id : null;\n            dataToUpdate.vettedAt = input.isVetted ? new Date() : null;\n        }\n        // Update publishing info if status changed\n        if (input.isPublished !== undefined && input.isPublished !== existingProvider.isPublished) {\n            dataToUpdate.publishedAt = input.isPublished ? new Date() : null;\n        }\n        const provider = await ctx.db.provider.update({\n            where: {\n                id\n            },\n            data: dataToUpdate\n        });\n        // Audit log\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Provider updated\", {\n            userId: ctx.session.user.id,\n            correlationId: ctx.correlationId\n        }, {\n            providerId: id,\n            action: \"PROVIDER_UPDATED\"\n        });\n        return provider;\n    }),\n    // Delete provider (admin only)\n    delete: adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ ctx, input })=>{\n        // Get provider name for audit log\n        const provider = await ctx.db.provider.findUnique({\n            where: {\n                id: input.id\n            },\n            select: {\n                name: true\n            }\n        });\n        if (!provider) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Provider not found\"\n            });\n        }\n        await ctx.db.provider.delete({\n            where: {\n                id: input.id\n            }\n        });\n        // Audit log\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Provider deleted\", {\n            userId: ctx.session.user.id,\n            correlationId: ctx.correlationId\n        }, {\n            providerId: input.id,\n            providerName: provider.name,\n            action: \"PROVIDER_DELETED\"\n        });\n        return {\n            success: true\n        };\n    }),\n    // Toggle vetting status (admin only)\n    toggleVetting: adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ ctx, input })=>{\n        const provider = await ctx.db.provider.findUnique({\n            where: {\n                id: input.id\n            },\n            select: {\n                isVetted: true\n            }\n        });\n        if (!provider) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Provider not found\"\n            });\n        }\n        const updated = await ctx.db.provider.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                isVetted: !provider.isVetted,\n                vettedBy: !provider.isVetted ? ctx.session.user.id : null,\n                vettedAt: !provider.isVetted ? new Date() : null\n            }\n        });\n        // Audit log\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Provider vetting status changed\", {\n            userId: ctx.session.user.id,\n            correlationId: ctx.correlationId\n        }, {\n            providerId: input.id,\n            isVetted: updated.isVetted,\n            action: \"PROVIDER_VETTING_TOGGLED\"\n        });\n        return updated;\n    }),\n    // Toggle publishing status (admin only)\n    togglePublishing: adminProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ ctx, input })=>{\n        const provider = await ctx.db.provider.findUnique({\n            where: {\n                id: input.id\n            },\n            select: {\n                isPublished: true,\n                isVetted: true\n            }\n        });\n        if (!provider) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Provider not found\"\n            });\n        }\n        if (!provider.isVetted && !provider.isPublished) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_2__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Provider must be vetted before publishing\"\n            });\n        }\n        const updated = await ctx.db.provider.update({\n            where: {\n                id: input.id\n            },\n            data: {\n                isPublished: !provider.isPublished,\n                publishedAt: !provider.isPublished ? new Date() : null\n            }\n        });\n        // Audit log\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Provider publishing status changed\", {\n            userId: ctx.session.user.id,\n            correlationId: ctx.correlationId\n        }, {\n            providerId: input.id,\n            isPublished: updated.isPublished,\n            action: \"PROVIDER_PUBLISHING_TOGGLED\"\n        });\n        return updated;\n    }),\n    // Create program for a provider (admin only)\n    createProgram: adminProcedure.input(createProgramSchema).mutation(async ({ ctx, input })=>{\n        const { galleryUrls, requirements, includedItems, activities, ...programData } = input;\n        const program = await ctx.db.program.create({\n            data: {\n                ...programData,\n                galleryUrls: galleryUrls ? JSON.stringify(galleryUrls) : null,\n                requirements: requirements ? JSON.stringify(requirements) : null,\n                includedItems: includedItems ? JSON.stringify(includedItems) : null,\n                activities: activities ? JSON.stringify(activities) : null\n            }\n        });\n        return program;\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvcHJvdmlkZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0I7QUFDaUQ7QUFDaEM7QUFDRDtBQUV4Qyx1QkFBdUI7QUFDdkIsTUFBTUssaUJBQWlCSCxnRUFBa0JBLENBQUNJLEdBQUc7MkJBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtRQUNoRSxJQUFJRCxJQUFJRSxPQUFPLENBQUNDLElBQUksQ0FBQ0MsSUFBSSxLQUFLLFNBQVM7WUFDckMsTUFBTSxJQUFJUixtREFBU0EsQ0FBQztnQkFDbEJTLE1BQU07Z0JBQ05DLFNBQVM7WUFDWDtRQUNGO1FBQ0EsT0FBT0w7SUFDVDs7QUFFQSxnQkFBZ0I7QUFDaEIsTUFBTU0sdUJBQXVCZCxrQ0FBQ0EsQ0FBQ2UsTUFBTSxDQUFDO0lBQ3BDQyxNQUFNaEIsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQ3hCQyxhQUFhbkIsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdHLFFBQVE7SUFDaENDLFNBQVNyQixrQ0FBQ0EsQ0FBQ2lCLE1BQU0sR0FBR0ssR0FBRyxHQUFHRixRQUFRLEdBQUdHLEVBQUUsQ0FBQ3ZCLGtDQUFDQSxDQUFDd0IsT0FBTyxDQUFDO0lBQ2xEQyxPQUFPekIsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdRLEtBQUssR0FBR0wsUUFBUSxHQUFHRyxFQUFFLENBQUN2QixrQ0FBQ0EsQ0FBQ3dCLE9BQU8sQ0FBQztJQUNsREUsT0FBTzFCLGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHRyxRQUFRO0lBQzFCTyxTQUFTM0Isa0NBQUNBLENBQUNpQixNQUFNLEdBQUdHLFFBQVE7SUFDNUJRLFFBQVE1QixrQ0FBQ0EsQ0FBQ2lCLE1BQU0sR0FBR0csUUFBUTtJQUMzQlMsT0FBTzdCLGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHRyxRQUFRO0lBQzFCVSxVQUFVOUIsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdHLFFBQVE7SUFDN0JXLFVBQVUvQixrQ0FBQ0EsQ0FBQ2dDLE1BQU0sR0FBR1osUUFBUTtJQUM3QmEsV0FBV2pDLGtDQUFDQSxDQUFDZ0MsTUFBTSxHQUFHWixRQUFRO0lBQzlCYyxTQUFTbEMsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdLLEdBQUcsR0FBR0YsUUFBUSxHQUFHRyxFQUFFLENBQUN2QixrQ0FBQ0EsQ0FBQ3dCLE9BQU8sQ0FBQztJQUNsRFcsZ0JBQWdCbkMsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdLLEdBQUcsR0FBR0YsUUFBUSxHQUFHRyxFQUFFLENBQUN2QixrQ0FBQ0EsQ0FBQ3dCLE9BQU8sQ0FBQztJQUN6RFksTUFBTXBDLGtDQUFDQSxDQUFDcUMsS0FBSyxDQUFDckMsa0NBQUNBLENBQUNpQixNQUFNLElBQUlHLFFBQVE7SUFDbENrQixnQkFBZ0J0QyxrQ0FBQ0EsQ0FBQ3FDLEtBQUssQ0FBQ3JDLGtDQUFDQSxDQUFDaUIsTUFBTSxJQUFJRyxRQUFRO0lBQzVDbUIsaUJBQWlCdkMsa0NBQUNBLENBQUNxQyxLQUFLLENBQUNyQyxrQ0FBQ0EsQ0FBQ2lCLE1BQU0sSUFBSUcsUUFBUTtJQUM3Q29CLFdBQVd4QyxrQ0FBQ0EsQ0FBQ3FDLEtBQUssQ0FBQ3JDLGtDQUFDQSxDQUFDaUIsTUFBTSxJQUFJRyxRQUFRO0lBQ3ZDcUIsVUFBVXpDLGtDQUFDQSxDQUFDMEMsT0FBTyxHQUFHdEIsUUFBUTtJQUM5QnVCLGFBQWEzQyxrQ0FBQ0EsQ0FBQzBDLE9BQU8sR0FBR3RCLFFBQVE7QUFDbkM7QUFFQSxNQUFNd0IsdUJBQXVCOUIscUJBQXFCK0IsT0FBTyxHQUFHQyxNQUFNLENBQUM7SUFDakVDLElBQUkvQyxrQ0FBQ0EsQ0FBQ2lCLE1BQU07QUFDZDtBQUVBLE1BQU0rQixzQkFBc0JoRCxrQ0FBQ0EsQ0FBQ2UsTUFBTSxDQUFDO0lBQ25Da0MsWUFBWWpELGtDQUFDQSxDQUFDaUIsTUFBTTtJQUNwQkQsTUFBTWhCLGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUN4QkMsYUFBYW5CLGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHRyxRQUFRO0lBQ2hDOEIsVUFBVWxELGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHRyxRQUFRO0lBQzdCK0IsV0FBV25ELGtDQUFDQSxDQUFDb0QsSUFBSSxHQUFHaEMsUUFBUTtJQUM1QmlDLFNBQVNyRCxrQ0FBQ0EsQ0FBQ29ELElBQUksR0FBR2hDLFFBQVE7SUFDMUJrQyxVQUFVdEQsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdHLFFBQVE7SUFDN0JtQyxVQUFVdkQsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdHLFFBQVE7SUFDN0JvQyxRQUFReEQsa0NBQUNBLENBQUNnQyxNQUFNLEdBQUd5QixHQUFHLEdBQUd2QyxHQUFHLENBQUMsR0FBR0UsUUFBUTtJQUN4Q3NDLFFBQVExRCxrQ0FBQ0EsQ0FBQ2dDLE1BQU0sR0FBR3lCLEdBQUcsR0FBR3ZDLEdBQUcsQ0FBQyxHQUFHRSxRQUFRO0lBQ3hDdUMsVUFBVTNELGtDQUFDQSxDQUFDZ0MsTUFBTSxHQUFHeUIsR0FBRyxHQUFHdkMsR0FBRyxDQUFDLEdBQUdFLFFBQVE7SUFDMUN3QyxnQkFBZ0I1RCxrQ0FBQ0EsQ0FBQ2dDLE1BQU0sR0FBR3lCLEdBQUcsR0FBR3ZDLEdBQUcsQ0FBQyxHQUFHRSxRQUFRO0lBQ2hEeUMsT0FBTzdELGtDQUFDQSxDQUFDZ0MsTUFBTSxHQUFHZCxHQUFHLENBQUMsR0FBR0UsUUFBUTtJQUNqQzBDLGdCQUFnQjlELGtDQUFDQSxDQUFDZ0MsTUFBTSxHQUFHZCxHQUFHLENBQUMsR0FBR0UsUUFBUTtJQUMxQzJDLG1CQUFtQi9ELGtDQUFDQSxDQUFDb0QsSUFBSSxHQUFHaEMsUUFBUTtJQUNwQzRDLE9BQU9oRSxrQ0FBQ0EsQ0FBQ2lCLE1BQU0sR0FBR0csUUFBUTtJQUMxQk8sU0FBUzNCLGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHRyxRQUFRO0lBQzVCUSxRQUFRNUIsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdHLFFBQVE7SUFDM0I2QyxVQUFVakUsa0NBQUNBLENBQUNpQixNQUFNLEdBQUdLLEdBQUcsR0FBR0YsUUFBUSxHQUFHRyxFQUFFLENBQUN2QixrQ0FBQ0EsQ0FBQ3dCLE9BQU8sQ0FBQztJQUNuRDBDLGFBQWFsRSxrQ0FBQ0EsQ0FBQ3FDLEtBQUssQ0FBQ3JDLGtDQUFDQSxDQUFDaUIsTUFBTSxHQUFHSyxHQUFHLElBQUlGLFFBQVE7SUFDL0MrQyxjQUFjbkUsa0NBQUNBLENBQUNxQyxLQUFLLENBQUNyQyxrQ0FBQ0EsQ0FBQ2lCLE1BQU0sSUFBSUcsUUFBUTtJQUMxQ2dELGVBQWVwRSxrQ0FBQ0EsQ0FBQ3FDLEtBQUssQ0FBQ3JDLGtDQUFDQSxDQUFDaUIsTUFBTSxJQUFJRyxRQUFRO0lBQzNDaUQsWUFBWXJFLGtDQUFDQSxDQUFDcUMsS0FBSyxDQUFDckMsa0NBQUNBLENBQUNpQixNQUFNLElBQUlHLFFBQVE7SUFDeENrRCxVQUFVdEUsa0NBQUNBLENBQUMwQyxPQUFPLEdBQUd0QixRQUFRO0lBQzlCdUIsYUFBYTNDLGtDQUFDQSxDQUFDMEMsT0FBTyxHQUFHdEIsUUFBUTtBQUNuQztBQUVPLE1BQU1tRCxpQkFBaUJ0RSxrRUFBZ0JBLENBQUM7SUFDN0MsaUNBQWlDO0lBQ2pDdUUsUUFBUW5FLGVBQ0xvRSxLQUFLLENBQ0p6RSxrQ0FBQ0EsQ0FBQ2UsTUFBTSxDQUFDO1FBQ1AyRCxvQkFBb0IxRSxrQ0FBQ0EsQ0FBQzBDLE9BQU8sR0FBR3RCLFFBQVE7UUFDeEN1RCxpQkFBaUIzRSxrQ0FBQ0EsQ0FBQzBDLE9BQU8sR0FBR3RCLFFBQVE7SUFDdkMsR0FBR0EsUUFBUSxJQUVad0QsS0FBSyxDQUFDLE9BQU8sRUFBRXJFLEdBQUcsRUFBRWtFLEtBQUssRUFBRTtRQUMxQixNQUFNSSxRQUFhLENBQUM7UUFFcEIsSUFBSSxDQUFDSixPQUFPQyxvQkFBb0I7WUFDOUJHLE1BQU1sQyxXQUFXLEdBQUc7UUFDdEI7UUFFQSxJQUFJLENBQUM4QixPQUFPRSxpQkFBaUI7WUFDM0JFLE1BQU1wQyxRQUFRLEdBQUc7UUFDbkI7UUFFQSxPQUFPbEMsSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDQyxRQUFRLENBQUM7WUFDOUJIO1lBQ0FJLFNBQVM7Z0JBQ1BDLFVBQVU7WUFDWjtZQUNBQyxTQUFTO2dCQUNQQyxXQUFXO1lBQ2I7UUFDRjtJQUNGO0lBRUYsbUNBQW1DO0lBQ25DQyxjQUFjbkYsZ0VBQWtCQSxDQUFDMEUsS0FBSyxDQUFDLE9BQU8sRUFBRXJFLEdBQUcsRUFBRTtRQUNuRCxPQUFPQSxJQUFJdUUsRUFBRSxDQUFDQyxRQUFRLENBQUNDLFFBQVEsQ0FBQztZQUM5QkgsT0FBTztnQkFDTGxDLGFBQWE7Z0JBQ2JGLFVBQVU7WUFDWjtZQUNBd0MsU0FBUztnQkFDUEMsVUFBVTtvQkFDUkwsT0FBTzt3QkFDTGxDLGFBQWE7d0JBQ2IyQixVQUFVO29CQUNaO2dCQUNGO1lBQ0Y7WUFDQWEsU0FBUztnQkFDUG5FLE1BQU07WUFDUjtRQUNGO0lBQ0Y7SUFFQSxzQkFBc0I7SUFDdEJzRSxTQUFTcEYsZ0VBQWtCQSxDQUN4QnVFLEtBQUssQ0FBQ3pFLGtDQUFDQSxDQUFDZSxNQUFNLENBQUM7UUFBRWdDLElBQUkvQyxrQ0FBQ0EsQ0FBQ2lCLE1BQU07SUFBRyxJQUNoQzJELEtBQUssQ0FBQyxPQUFPLEVBQUVyRSxHQUFHLEVBQUVrRSxLQUFLLEVBQUU7UUFDMUIsTUFBTU0sV0FBVyxNQUFNeEUsSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDUSxVQUFVLENBQUM7WUFDaERWLE9BQU87Z0JBQUU5QixJQUFJMEIsTUFBTTFCLEVBQUU7WUFBQztZQUN0QmtDLFNBQVM7Z0JBQ1BDLFVBQVU7WUFDWjtRQUNGO1FBRUEsSUFBSSxDQUFDSCxVQUFVO1lBQ2IsTUFBTSxJQUFJNUUsbURBQVNBLENBQUM7Z0JBQ2xCUyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLCtDQUErQztRQUMvQyxJQUFJLENBQUNrRSxTQUFTcEMsV0FBVyxJQUFJcEMsSUFBSUUsT0FBTyxDQUFDQyxJQUFJLENBQUNDLElBQUksS0FBSyxTQUFTO1lBQzlELE1BQU0sSUFBSVIsbURBQVNBLENBQUM7Z0JBQ2xCUyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE9BQU9rRTtJQUNUO0lBRUYsK0JBQStCO0lBQy9CUyxRQUFRbkYsZUFDTG9FLEtBQUssQ0FBQzNELHNCQUNOMkUsUUFBUSxDQUFDLE9BQU8sRUFBRWxGLEdBQUcsRUFBRWtFLEtBQUssRUFBRTtRQUM3QixNQUFNLEVBQUVyQyxJQUFJLEVBQUVFLGNBQWMsRUFBRUMsZUFBZSxFQUFFQyxTQUFTLEVBQUUsR0FBR2tELGNBQWMsR0FBR2pCO1FBRTlFLE1BQU1NLFdBQVcsTUFBTXhFLElBQUl1RSxFQUFFLENBQUNDLFFBQVEsQ0FBQ1MsTUFBTSxDQUFDO1lBQzVDRyxNQUFNO2dCQUNKLEdBQUdELFlBQVk7Z0JBQ2Z0RCxNQUFNQSxPQUFPd0QsS0FBS0MsU0FBUyxDQUFDekQsUUFBUTtnQkFDcENFLGdCQUFnQkEsaUJBQWlCc0QsS0FBS0MsU0FBUyxDQUFDdkQsa0JBQWtCO2dCQUNsRUMsaUJBQWlCQSxrQkFBa0JxRCxLQUFLQyxTQUFTLENBQUN0RCxtQkFBbUI7Z0JBQ3JFQyxXQUFXQSxZQUFZb0QsS0FBS0MsU0FBUyxDQUFDckQsYUFBYTtnQkFDbkRzRCxVQUFVckIsTUFBTWhDLFFBQVEsR0FBR2xDLElBQUlFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDcUMsRUFBRSxHQUFHO2dCQUNqRGdELFVBQVV0QixNQUFNaEMsUUFBUSxHQUFHLElBQUl1RCxTQUFTO2dCQUN4Q0MsYUFBYXhCLE1BQU05QixXQUFXLEdBQUcsSUFBSXFELFNBQVM7WUFDaEQ7UUFDRjtRQUVBLFlBQVk7UUFDWjVGLGlEQUFNQSxDQUFDOEYsSUFBSSxDQUFDLG9CQUFvQjtZQUM5QkMsUUFBUTVGLElBQUlFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDcUMsRUFBRTtZQUMzQnFELGVBQWU3RixJQUFJNkYsYUFBYTtRQUNsQyxHQUFHO1lBQ0RuRCxZQUFZOEIsU0FBU2hDLEVBQUU7WUFDdkJzRCxRQUFRO1FBQ1Y7UUFFQSxPQUFPdEI7SUFDVDtJQUVGLCtCQUErQjtJQUMvQnVCLFFBQVFqRyxlQUNMb0UsS0FBSyxDQUFDN0Isc0JBQ042QyxRQUFRLENBQUMsT0FBTyxFQUFFbEYsR0FBRyxFQUFFa0UsS0FBSyxFQUFFO1FBQzdCLE1BQU0sRUFBRTFCLEVBQUUsRUFBRVgsSUFBSSxFQUFFRSxjQUFjLEVBQUVDLGVBQWUsRUFBRUMsU0FBUyxFQUFFLEdBQUcrRCxZQUFZLEdBQUc5QjtRQUVoRixrQ0FBa0M7UUFDbEMsTUFBTStCLG1CQUFtQixNQUFNakcsSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDUSxVQUFVLENBQUM7WUFDeERWLE9BQU87Z0JBQUU5QjtZQUFHO1lBQ1owRCxRQUFRO2dCQUFFaEUsVUFBVTtnQkFBTUUsYUFBYTtZQUFLO1FBQzlDO1FBRUEsSUFBSSxDQUFDNkQsa0JBQWtCO1lBQ3JCLE1BQU0sSUFBSXJHLG1EQUFTQSxDQUFDO2dCQUNsQlMsTUFBTTtnQkFDTkMsU0FBUztZQUNYO1FBQ0Y7UUFFQSxNQUFNNkYsZUFBb0I7WUFBRSxHQUFHSCxVQUFVO1FBQUM7UUFFMUMscUJBQXFCO1FBQ3JCLElBQUluRSxTQUFTdUUsV0FBVztZQUN0QkQsYUFBYXRFLElBQUksR0FBR0EsT0FBT3dELEtBQUtDLFNBQVMsQ0FBQ3pELFFBQVE7UUFDcEQ7UUFDQSxJQUFJRSxtQkFBbUJxRSxXQUFXO1lBQ2hDRCxhQUFhcEUsY0FBYyxHQUFHQSxpQkFBaUJzRCxLQUFLQyxTQUFTLENBQUN2RCxrQkFBa0I7UUFDbEY7UUFDQSxJQUFJQyxvQkFBb0JvRSxXQUFXO1lBQ2pDRCxhQUFhbkUsZUFBZSxHQUFHQSxrQkFBa0JxRCxLQUFLQyxTQUFTLENBQUN0RCxtQkFBbUI7UUFDckY7UUFDQSxJQUFJQyxjQUFjbUUsV0FBVztZQUMzQkQsYUFBYWxFLFNBQVMsR0FBR0EsWUFBWW9ELEtBQUtDLFNBQVMsQ0FBQ3JELGFBQWE7UUFDbkU7UUFFQSx3Q0FBd0M7UUFDeEMsSUFBSWlDLE1BQU1oQyxRQUFRLEtBQUtrRSxhQUFhbEMsTUFBTWhDLFFBQVEsS0FBSytELGlCQUFpQi9ELFFBQVEsRUFBRTtZQUNoRmlFLGFBQWFaLFFBQVEsR0FBR3JCLE1BQU1oQyxRQUFRLEdBQUdsQyxJQUFJRSxPQUFPLENBQUNDLElBQUksQ0FBQ3FDLEVBQUUsR0FBRztZQUMvRDJELGFBQWFYLFFBQVEsR0FBR3RCLE1BQU1oQyxRQUFRLEdBQUcsSUFBSXVELFNBQVM7UUFDeEQ7UUFFQSwyQ0FBMkM7UUFDM0MsSUFBSXZCLE1BQU05QixXQUFXLEtBQUtnRSxhQUFhbEMsTUFBTTlCLFdBQVcsS0FBSzZELGlCQUFpQjdELFdBQVcsRUFBRTtZQUN6RitELGFBQWFULFdBQVcsR0FBR3hCLE1BQU05QixXQUFXLEdBQUcsSUFBSXFELFNBQVM7UUFDOUQ7UUFFQSxNQUFNakIsV0FBVyxNQUFNeEUsSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDdUIsTUFBTSxDQUFDO1lBQzVDekIsT0FBTztnQkFBRTlCO1lBQUc7WUFDWjRDLE1BQU1lO1FBQ1I7UUFFQSxZQUFZO1FBQ1p0RyxpREFBTUEsQ0FBQzhGLElBQUksQ0FBQyxvQkFBb0I7WUFDOUJDLFFBQVE1RixJQUFJRSxPQUFPLENBQUNDLElBQUksQ0FBQ3FDLEVBQUU7WUFDM0JxRCxlQUFlN0YsSUFBSTZGLGFBQWE7UUFDbEMsR0FBRztZQUNEbkQsWUFBWUY7WUFDWnNELFFBQVE7UUFDVjtRQUVBLE9BQU90QjtJQUNUO0lBRUYsK0JBQStCO0lBQy9CNkIsUUFBUXZHLGVBQ0xvRSxLQUFLLENBQUN6RSxrQ0FBQ0EsQ0FBQ2UsTUFBTSxDQUFDO1FBQUVnQyxJQUFJL0Msa0NBQUNBLENBQUNpQixNQUFNO0lBQUcsSUFDaEN3RSxRQUFRLENBQUMsT0FBTyxFQUFFbEYsR0FBRyxFQUFFa0UsS0FBSyxFQUFFO1FBQzdCLGtDQUFrQztRQUNsQyxNQUFNTSxXQUFXLE1BQU14RSxJQUFJdUUsRUFBRSxDQUFDQyxRQUFRLENBQUNRLFVBQVUsQ0FBQztZQUNoRFYsT0FBTztnQkFBRTlCLElBQUkwQixNQUFNMUIsRUFBRTtZQUFDO1lBQ3RCMEQsUUFBUTtnQkFBRXpGLE1BQU07WUFBSztRQUN2QjtRQUVBLElBQUksQ0FBQytELFVBQVU7WUFDYixNQUFNLElBQUk1RSxtREFBU0EsQ0FBQztnQkFDbEJTLE1BQU07Z0JBQ05DLFNBQVM7WUFDWDtRQUNGO1FBRUEsTUFBTU4sSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDNkIsTUFBTSxDQUFDO1lBQzNCL0IsT0FBTztnQkFBRTlCLElBQUkwQixNQUFNMUIsRUFBRTtZQUFDO1FBQ3hCO1FBRUEsWUFBWTtRQUNaM0MsaURBQU1BLENBQUM4RixJQUFJLENBQUMsb0JBQW9CO1lBQzlCQyxRQUFRNUYsSUFBSUUsT0FBTyxDQUFDQyxJQUFJLENBQUNxQyxFQUFFO1lBQzNCcUQsZUFBZTdGLElBQUk2RixhQUFhO1FBQ2xDLEdBQUc7WUFDRG5ELFlBQVl3QixNQUFNMUIsRUFBRTtZQUNwQjhELGNBQWM5QixTQUFTL0QsSUFBSTtZQUMzQnFGLFFBQVE7UUFDVjtRQUVBLE9BQU87WUFBRVMsU0FBUztRQUFLO0lBQ3pCO0lBRUYscUNBQXFDO0lBQ3JDQyxlQUFlMUcsZUFDWm9FLEtBQUssQ0FBQ3pFLGtDQUFDQSxDQUFDZSxNQUFNLENBQUM7UUFBRWdDLElBQUkvQyxrQ0FBQ0EsQ0FBQ2lCLE1BQU07SUFBRyxJQUNoQ3dFLFFBQVEsQ0FBQyxPQUFPLEVBQUVsRixHQUFHLEVBQUVrRSxLQUFLLEVBQUU7UUFDN0IsTUFBTU0sV0FBVyxNQUFNeEUsSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDUSxVQUFVLENBQUM7WUFDaERWLE9BQU87Z0JBQUU5QixJQUFJMEIsTUFBTTFCLEVBQUU7WUFBQztZQUN0QjBELFFBQVE7Z0JBQUVoRSxVQUFVO1lBQUs7UUFDM0I7UUFFQSxJQUFJLENBQUNzQyxVQUFVO1lBQ2IsTUFBTSxJQUFJNUUsbURBQVNBLENBQUM7Z0JBQ2xCUyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE1BQU1tRyxVQUFVLE1BQU16RyxJQUFJdUUsRUFBRSxDQUFDQyxRQUFRLENBQUN1QixNQUFNLENBQUM7WUFDM0N6QixPQUFPO2dCQUFFOUIsSUFBSTBCLE1BQU0xQixFQUFFO1lBQUM7WUFDdEI0QyxNQUFNO2dCQUNKbEQsVUFBVSxDQUFDc0MsU0FBU3RDLFFBQVE7Z0JBQzVCcUQsVUFBVSxDQUFDZixTQUFTdEMsUUFBUSxHQUFHbEMsSUFBSUUsT0FBTyxDQUFDQyxJQUFJLENBQUNxQyxFQUFFLEdBQUc7Z0JBQ3JEZ0QsVUFBVSxDQUFDaEIsU0FBU3RDLFFBQVEsR0FBRyxJQUFJdUQsU0FBUztZQUM5QztRQUNGO1FBRUEsWUFBWTtRQUNaNUYsaURBQU1BLENBQUM4RixJQUFJLENBQUMsbUNBQW1DO1lBQzdDQyxRQUFRNUYsSUFBSUUsT0FBTyxDQUFDQyxJQUFJLENBQUNxQyxFQUFFO1lBQzNCcUQsZUFBZTdGLElBQUk2RixhQUFhO1FBQ2xDLEdBQUc7WUFDRG5ELFlBQVl3QixNQUFNMUIsRUFBRTtZQUNwQk4sVUFBVXVFLFFBQVF2RSxRQUFRO1lBQzFCNEQsUUFBUTtRQUNWO1FBRUEsT0FBT1c7SUFDVDtJQUVGLHdDQUF3QztJQUN4Q0Msa0JBQWtCNUcsZUFDZm9FLEtBQUssQ0FBQ3pFLGtDQUFDQSxDQUFDZSxNQUFNLENBQUM7UUFBRWdDLElBQUkvQyxrQ0FBQ0EsQ0FBQ2lCLE1BQU07SUFBRyxJQUNoQ3dFLFFBQVEsQ0FBQyxPQUFPLEVBQUVsRixHQUFHLEVBQUVrRSxLQUFLLEVBQUU7UUFDN0IsTUFBTU0sV0FBVyxNQUFNeEUsSUFBSXVFLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDUSxVQUFVLENBQUM7WUFDaERWLE9BQU87Z0JBQUU5QixJQUFJMEIsTUFBTTFCLEVBQUU7WUFBQztZQUN0QjBELFFBQVE7Z0JBQUU5RCxhQUFhO2dCQUFNRixVQUFVO1lBQUs7UUFDOUM7UUFFQSxJQUFJLENBQUNzQyxVQUFVO1lBQ2IsTUFBTSxJQUFJNUUsbURBQVNBLENBQUM7Z0JBQ2xCUyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLElBQUksQ0FBQ2tFLFNBQVN0QyxRQUFRLElBQUksQ0FBQ3NDLFNBQVNwQyxXQUFXLEVBQUU7WUFDL0MsTUFBTSxJQUFJeEMsbURBQVNBLENBQUM7Z0JBQ2xCUyxNQUFNO2dCQUNOQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLE1BQU1tRyxVQUFVLE1BQU16RyxJQUFJdUUsRUFBRSxDQUFDQyxRQUFRLENBQUN1QixNQUFNLENBQUM7WUFDM0N6QixPQUFPO2dCQUFFOUIsSUFBSTBCLE1BQU0xQixFQUFFO1lBQUM7WUFDdEI0QyxNQUFNO2dCQUNKaEQsYUFBYSxDQUFDb0MsU0FBU3BDLFdBQVc7Z0JBQ2xDc0QsYUFBYSxDQUFDbEIsU0FBU3BDLFdBQVcsR0FBRyxJQUFJcUQsU0FBUztZQUNwRDtRQUNGO1FBRUEsWUFBWTtRQUNaNUYsaURBQU1BLENBQUM4RixJQUFJLENBQUMsc0NBQXNDO1lBQ2hEQyxRQUFRNUYsSUFBSUUsT0FBTyxDQUFDQyxJQUFJLENBQUNxQyxFQUFFO1lBQzNCcUQsZUFBZTdGLElBQUk2RixhQUFhO1FBQ2xDLEdBQUc7WUFDRG5ELFlBQVl3QixNQUFNMUIsRUFBRTtZQUNwQkosYUFBYXFFLFFBQVFyRSxXQUFXO1lBQ2hDMEQsUUFBUTtRQUNWO1FBRUEsT0FBT1c7SUFDVDtJQUVGLDZDQUE2QztJQUM3Q0UsZUFBZTdHLGVBQ1pvRSxLQUFLLENBQUN6QixxQkFDTnlDLFFBQVEsQ0FBQyxPQUFPLEVBQUVsRixHQUFHLEVBQUVrRSxLQUFLLEVBQUU7UUFDN0IsTUFBTSxFQUNKUCxXQUFXLEVBQ1hDLFlBQVksRUFDWkMsYUFBYSxFQUNiQyxVQUFVLEVBQ1YsR0FBRzhDLGFBQ0osR0FBRzFDO1FBRUosTUFBTTJDLFVBQVUsTUFBTTdHLElBQUl1RSxFQUFFLENBQUNzQyxPQUFPLENBQUM1QixNQUFNLENBQUM7WUFDMUNHLE1BQU07Z0JBQ0osR0FBR3dCLFdBQVc7Z0JBQ2RqRCxhQUFhQSxjQUFjMEIsS0FBS0MsU0FBUyxDQUFDM0IsZUFBZTtnQkFDekRDLGNBQWNBLGVBQWV5QixLQUFLQyxTQUFTLENBQUMxQixnQkFBZ0I7Z0JBQzVEQyxlQUFlQSxnQkFBZ0J3QixLQUFLQyxTQUFTLENBQUN6QixpQkFBaUI7Z0JBQy9EQyxZQUFZQSxhQUFhdUIsS0FBS0MsU0FBUyxDQUFDeEIsY0FBYztZQUN4RDtRQUNGO1FBRUEsT0FBTytDO0lBQ1Q7QUFDSixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3NlcnZlci9hcGkvcm91dGVycy9wcm92aWRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciwgcHJvdGVjdGVkUHJvY2VkdXJlIH0gZnJvbSBcIn4vc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tIFwiQHRycGMvc2VydmVyXCI7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwifi91dGlscy9sb2dnZXJcIjtcblxuLy8gQWRtaW4tb25seSBwcm9jZWR1cmVcbmNvbnN0IGFkbWluUHJvY2VkdXJlID0gcHJvdGVjdGVkUHJvY2VkdXJlLnVzZShhc3luYyAoeyBjdHgsIG5leHQgfSkgPT4ge1xuICBpZiAoY3R4LnNlc3Npb24udXNlci5yb2xlICE9PSBcIkFETUlOXCIpIHtcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgIGNvZGU6IFwiRk9SQklEREVOXCIsXG4gICAgICBtZXNzYWdlOiBcIk9ubHkgYWRtaW5zIGNhbiBwZXJmb3JtIHRoaXMgYWN0aW9uXCIsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn0pO1xuXG4vLyBJbnB1dCBzY2hlbWFzXG5jb25zdCBjcmVhdGVQcm92aWRlclNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgXCJOYW1lIGlzIHJlcXVpcmVkXCIpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICB3ZWJzaXRlOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCkub3Ioei5saXRlcmFsKFwiXCIpKSxcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKS5vcHRpb25hbCgpLm9yKHoubGl0ZXJhbChcIlwiKSksXG4gIHBob25lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGFkZHJlc3M6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3VidXJiOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN0YXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHBvc3Rjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGxhdGl0dWRlOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gIGxvbmdpdHVkZTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICBsb2dvVXJsOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCkub3Ioei5saXRlcmFsKFwiXCIpKSxcbiAgYmFubmVySW1hZ2VVcmw6IHouc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKS5vcih6LmxpdGVyYWwoXCJcIikpLFxuICB0YWdzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIGNlcnRpZmljYXRpb25zOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIHNwZWNpYWxpemF0aW9uczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICBhZ2VHcm91cHM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgaXNWZXR0ZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIGlzUHVibGlzaGVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxufSk7XG5cbmNvbnN0IHVwZGF0ZVByb3ZpZGVyU2NoZW1hID0gY3JlYXRlUHJvdmlkZXJTY2hlbWEucGFydGlhbCgpLmV4dGVuZCh7XG4gIGlkOiB6LnN0cmluZygpLFxufSk7XG5cbmNvbnN0IGNyZWF0ZVByb2dyYW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHByb3ZpZGVySWQ6IHouc3RyaW5nKCksXG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEsIFwiTmFtZSBpcyByZXF1aXJlZFwiKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY2F0ZWdvcnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc3RhcnREYXRlOiB6LmRhdGUoKS5vcHRpb25hbCgpLFxuICBlbmREYXRlOiB6LmRhdGUoKS5vcHRpb25hbCgpLFxuICBkdXJhdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzY2hlZHVsZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBtaW5BZ2U6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gIG1heEFnZTogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgY2FwYWNpdHk6IHoubnVtYmVyKCkuaW50KCkubWluKDApLm9wdGlvbmFsKCksXG4gIHNwb3RzQXZhaWxhYmxlOiB6Lm51bWJlcigpLmludCgpLm1pbigwKS5vcHRpb25hbCgpLFxuICBwcmljZTogei5udW1iZXIoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgZWFybHlCaXJkUHJpY2U6IHoubnVtYmVyKCkubWluKDApLm9wdGlvbmFsKCksXG4gIGVhcmx5QmlyZERlYWRsaW5lOiB6LmRhdGUoKS5vcHRpb25hbCgpLFxuICB2ZW51ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBhZGRyZXNzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN1YnVyYjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBpbWFnZVVybDogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLm9yKHoubGl0ZXJhbChcIlwiKSksXG4gIGdhbGxlcnlVcmxzOiB6LmFycmF5KHouc3RyaW5nKCkudXJsKCkpLm9wdGlvbmFsKCksXG4gIHJlcXVpcmVtZW50czogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICBpbmNsdWRlZEl0ZW1zOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIGFjdGl2aXRpZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgaXNBY3RpdmU6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gIGlzUHVibGlzaGVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBwcm92aWRlclJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICAvLyBHZXQgYWxsIHByb3ZpZGVycyAoYWRtaW4gb25seSlcbiAgZ2V0QWxsOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgaW5jbHVkZVVucHVibGlzaGVkOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICAgICAgICBpbmNsdWRlVW52ZXR0ZWQ6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgICB9KS5vcHRpb25hbCgpXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHdoZXJlOiBhbnkgPSB7fTtcbiAgICAgIFxuICAgICAgaWYgKCFpbnB1dD8uaW5jbHVkZVVucHVibGlzaGVkKSB7XG4gICAgICAgIHdoZXJlLmlzUHVibGlzaGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFpbnB1dD8uaW5jbHVkZVVudmV0dGVkKSB7XG4gICAgICAgIHdoZXJlLmlzVmV0dGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGN0eC5kYi5wcm92aWRlci5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlLFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgcHJvZ3JhbXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSksXG5cbiAgLy8gR2V0IHB1Ymxpc2hlZCBwcm92aWRlcnMgKHB1YmxpYylcbiAgZ2V0UHVibGlzaGVkOiBwcm90ZWN0ZWRQcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICByZXR1cm4gY3R4LmRiLnByb3ZpZGVyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlzUHVibGlzaGVkOiB0cnVlLFxuICAgICAgICBpc1ZldHRlZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHByb2dyYW1zOiB7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlzUHVibGlzaGVkOiB0cnVlLFxuICAgICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7XG4gICAgICAgIG5hbWU6IFwiYXNjXCIsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KSxcblxuICAvLyBHZXQgc2luZ2xlIHByb3ZpZGVyXG4gIGdldEJ5SWQ6IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgY3R4LmRiLnByb3ZpZGVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHByb2dyYW1zOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlByb3ZpZGVyIG5vdCBmb3VuZFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBjYW4gdmlldyB1bnB1Ymxpc2hlZCBwcm92aWRlcnNcbiAgICAgIGlmICghcHJvdmlkZXIuaXNQdWJsaXNoZWQgJiYgY3R4LnNlc3Npb24udXNlci5yb2xlICE9PSBcIkFETUlOXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogXCJGT1JCSURERU5cIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlRoaXMgcHJvdmlkZXIgaXMgbm90IHB1Ymxpc2hlZFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgIH0pLFxuXG4gIC8vIENyZWF0ZSBwcm92aWRlciAoYWRtaW4gb25seSlcbiAgY3JlYXRlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dChjcmVhdGVQcm92aWRlclNjaGVtYSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IHRhZ3MsIGNlcnRpZmljYXRpb25zLCBzcGVjaWFsaXphdGlvbnMsIGFnZUdyb3VwcywgLi4ucHJvdmlkZXJEYXRhIH0gPSBpbnB1dDtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCBjdHguZGIucHJvdmlkZXIuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICB0YWdzOiB0YWdzID8gSlNPTi5zdHJpbmdpZnkodGFncykgOiBudWxsLFxuICAgICAgICAgIGNlcnRpZmljYXRpb25zOiBjZXJ0aWZpY2F0aW9ucyA/IEpTT04uc3RyaW5naWZ5KGNlcnRpZmljYXRpb25zKSA6IG51bGwsXG4gICAgICAgICAgc3BlY2lhbGl6YXRpb25zOiBzcGVjaWFsaXphdGlvbnMgPyBKU09OLnN0cmluZ2lmeShzcGVjaWFsaXphdGlvbnMpIDogbnVsbCxcbiAgICAgICAgICBhZ2VHcm91cHM6IGFnZUdyb3VwcyA/IEpTT04uc3RyaW5naWZ5KGFnZUdyb3VwcykgOiBudWxsLFxuICAgICAgICAgIHZldHRlZEJ5OiBpbnB1dC5pc1ZldHRlZCA/IGN0eC5zZXNzaW9uLnVzZXIuaWQgOiBudWxsLFxuICAgICAgICAgIHZldHRlZEF0OiBpbnB1dC5pc1ZldHRlZCA/IG5ldyBEYXRlKCkgOiBudWxsLFxuICAgICAgICAgIHB1Ymxpc2hlZEF0OiBpbnB1dC5pc1B1Ymxpc2hlZCA/IG5ldyBEYXRlKCkgOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEF1ZGl0IGxvZ1xuICAgICAgbG9nZ2VyLmluZm8oXCJQcm92aWRlciBjcmVhdGVkXCIsIHtcbiAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBjdHguY29ycmVsYXRpb25JZCxcbiAgICAgIH0sIHtcbiAgICAgICAgcHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG4gICAgICAgIGFjdGlvbjogXCJQUk9WSURFUl9DUkVBVEVEXCIsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgIH0pLFxuXG4gIC8vIFVwZGF0ZSBwcm92aWRlciAoYWRtaW4gb25seSlcbiAgdXBkYXRlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh1cGRhdGVQcm92aWRlclNjaGVtYSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IGlkLCB0YWdzLCBjZXJ0aWZpY2F0aW9ucywgc3BlY2lhbGl6YXRpb25zLCBhZ2VHcm91cHMsIC4uLnVwZGF0ZURhdGEgfSA9IGlucHV0O1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB2ZXR0aW5nIHN0YXR1cyBjaGFuZ2VkXG4gICAgICBjb25zdCBleGlzdGluZ1Byb3ZpZGVyID0gYXdhaXQgY3R4LmRiLnByb3ZpZGVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgICBzZWxlY3Q6IHsgaXNWZXR0ZWQ6IHRydWUsIGlzUHVibGlzaGVkOiB0cnVlIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFleGlzdGluZ1Byb3ZpZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJQcm92aWRlciBub3QgZm91bmRcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGFUb1VwZGF0ZTogYW55ID0geyAuLi51cGRhdGVEYXRhIH07XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBKU09OIGZpZWxkc1xuICAgICAgaWYgKHRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkYXRhVG9VcGRhdGUudGFncyA9IHRhZ3MgPyBKU09OLnN0cmluZ2lmeSh0YWdzKSA6IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoY2VydGlmaWNhdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkYXRhVG9VcGRhdGUuY2VydGlmaWNhdGlvbnMgPSBjZXJ0aWZpY2F0aW9ucyA/IEpTT04uc3RyaW5naWZ5KGNlcnRpZmljYXRpb25zKSA6IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoc3BlY2lhbGl6YXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGF0YVRvVXBkYXRlLnNwZWNpYWxpemF0aW9ucyA9IHNwZWNpYWxpemF0aW9ucyA/IEpTT04uc3RyaW5naWZ5KHNwZWNpYWxpemF0aW9ucykgOiBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGFnZUdyb3VwcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGRhdGFUb1VwZGF0ZS5hZ2VHcm91cHMgPSBhZ2VHcm91cHMgPyBKU09OLnN0cmluZ2lmeShhZ2VHcm91cHMpIDogbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHZldHRpbmcgaW5mbyBpZiBzdGF0dXMgY2hhbmdlZFxuICAgICAgaWYgKGlucHV0LmlzVmV0dGVkICE9PSB1bmRlZmluZWQgJiYgaW5wdXQuaXNWZXR0ZWQgIT09IGV4aXN0aW5nUHJvdmlkZXIuaXNWZXR0ZWQpIHtcbiAgICAgICAgZGF0YVRvVXBkYXRlLnZldHRlZEJ5ID0gaW5wdXQuaXNWZXR0ZWQgPyBjdHguc2Vzc2lvbi51c2VyLmlkIDogbnVsbDtcbiAgICAgICAgZGF0YVRvVXBkYXRlLnZldHRlZEF0ID0gaW5wdXQuaXNWZXR0ZWQgPyBuZXcgRGF0ZSgpIDogbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHB1Ymxpc2hpbmcgaW5mbyBpZiBzdGF0dXMgY2hhbmdlZFxuICAgICAgaWYgKGlucHV0LmlzUHVibGlzaGVkICE9PSB1bmRlZmluZWQgJiYgaW5wdXQuaXNQdWJsaXNoZWQgIT09IGV4aXN0aW5nUHJvdmlkZXIuaXNQdWJsaXNoZWQpIHtcbiAgICAgICAgZGF0YVRvVXBkYXRlLnB1Ymxpc2hlZEF0ID0gaW5wdXQuaXNQdWJsaXNoZWQgPyBuZXcgRGF0ZSgpIDogbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvdmlkZXIgPSBhd2FpdCBjdHguZGIucHJvdmlkZXIudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgZGF0YTogZGF0YVRvVXBkYXRlLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEF1ZGl0IGxvZ1xuICAgICAgbG9nZ2VyLmluZm8oXCJQcm92aWRlciB1cGRhdGVkXCIsIHtcbiAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICBjb3JyZWxhdGlvbklkOiBjdHguY29ycmVsYXRpb25JZCxcbiAgICAgIH0sIHtcbiAgICAgICAgcHJvdmlkZXJJZDogaWQsXG4gICAgICAgIGFjdGlvbjogXCJQUk9WSURFUl9VUERBVEVEXCIsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHByb3ZpZGVyO1xuICAgIH0pLFxuXG4gIC8vIERlbGV0ZSBwcm92aWRlciAoYWRtaW4gb25seSlcbiAgZGVsZXRlOiBhZG1pblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IGlkOiB6LnN0cmluZygpIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIC8vIEdldCBwcm92aWRlciBuYW1lIGZvciBhdWRpdCBsb2dcbiAgICAgIGNvbnN0IHByb3ZpZGVyID0gYXdhaXQgY3R4LmRiLnByb3ZpZGVyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJQcm92aWRlciBub3QgZm91bmRcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGN0eC5kYi5wcm92aWRlci5kZWxldGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBdWRpdCBsb2dcbiAgICAgIGxvZ2dlci5pbmZvKFwiUHJvdmlkZXIgZGVsZXRlZFwiLCB7XG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgY29ycmVsYXRpb25JZDogY3R4LmNvcnJlbGF0aW9uSWQsXG4gICAgICB9LCB7XG4gICAgICAgIHByb3ZpZGVySWQ6IGlucHV0LmlkLFxuICAgICAgICBwcm92aWRlck5hbWU6IHByb3ZpZGVyLm5hbWUsXG4gICAgICAgIGFjdGlvbjogXCJQUk9WSURFUl9ERUxFVEVEXCIsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICAgIH0pLFxuXG4gIC8vIFRvZ2dsZSB2ZXR0aW5nIHN0YXR1cyAoYWRtaW4gb25seSlcbiAgdG9nZ2xlVmV0dGluZzogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IGN0eC5kYi5wcm92aWRlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmlkIH0sXG4gICAgICAgIHNlbGVjdDogeyBpc1ZldHRlZDogdHJ1ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcHJvdmlkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlByb3ZpZGVyIG5vdCBmb3VuZFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGN0eC5kYi5wcm92aWRlci51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogaW5wdXQuaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlzVmV0dGVkOiAhcHJvdmlkZXIuaXNWZXR0ZWQsXG4gICAgICAgICAgdmV0dGVkQnk6ICFwcm92aWRlci5pc1ZldHRlZCA/IGN0eC5zZXNzaW9uLnVzZXIuaWQgOiBudWxsLFxuICAgICAgICAgIHZldHRlZEF0OiAhcHJvdmlkZXIuaXNWZXR0ZWQgPyBuZXcgRGF0ZSgpIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBdWRpdCBsb2dcbiAgICAgIGxvZ2dlci5pbmZvKFwiUHJvdmlkZXIgdmV0dGluZyBzdGF0dXMgY2hhbmdlZFwiLCB7XG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgY29ycmVsYXRpb25JZDogY3R4LmNvcnJlbGF0aW9uSWQsXG4gICAgICB9LCB7XG4gICAgICAgIHByb3ZpZGVySWQ6IGlucHV0LmlkLFxuICAgICAgICBpc1ZldHRlZDogdXBkYXRlZC5pc1ZldHRlZCxcbiAgICAgICAgYWN0aW9uOiBcIlBST1ZJREVSX1ZFVFRJTkdfVE9HR0xFRFwiLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgIH0pLFxuXG4gIC8vIFRvZ2dsZSBwdWJsaXNoaW5nIHN0YXR1cyAoYWRtaW4gb25seSlcbiAgdG9nZ2xlUHVibGlzaGluZzogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBpZDogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IGN0eC5kYi5wcm92aWRlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGlucHV0LmlkIH0sXG4gICAgICAgIHNlbGVjdDogeyBpc1B1Ymxpc2hlZDogdHJ1ZSwgaXNWZXR0ZWQ6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXByb3ZpZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgICAgbWVzc2FnZTogXCJQcm92aWRlciBub3QgZm91bmRcIixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcHJvdmlkZXIuaXNWZXR0ZWQgJiYgIXByb3ZpZGVyLmlzUHVibGlzaGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIlByb3ZpZGVyIG11c3QgYmUgdmV0dGVkIGJlZm9yZSBwdWJsaXNoaW5nXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgY3R4LmRiLnByb3ZpZGVyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBpbnB1dC5pZCB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaXNQdWJsaXNoZWQ6ICFwcm92aWRlci5pc1B1Ymxpc2hlZCxcbiAgICAgICAgICBwdWJsaXNoZWRBdDogIXByb3ZpZGVyLmlzUHVibGlzaGVkID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQXVkaXQgbG9nXG4gICAgICBsb2dnZXIuaW5mbyhcIlByb3ZpZGVyIHB1Ymxpc2hpbmcgc3RhdHVzIGNoYW5nZWRcIiwge1xuICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6IGN0eC5jb3JyZWxhdGlvbklkLFxuICAgICAgfSwge1xuICAgICAgICBwcm92aWRlcklkOiBpbnB1dC5pZCxcbiAgICAgICAgaXNQdWJsaXNoZWQ6IHVwZGF0ZWQuaXNQdWJsaXNoZWQsXG4gICAgICAgIGFjdGlvbjogXCJQUk9WSURFUl9QVUJMSVNISU5HX1RPR0dMRURcIixcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICB9KSxcblxuICAvLyBDcmVhdGUgcHJvZ3JhbSBmb3IgYSBwcm92aWRlciAoYWRtaW4gb25seSlcbiAgY3JlYXRlUHJvZ3JhbTogYWRtaW5Qcm9jZWR1cmVcbiAgICAuaW5wdXQoY3JlYXRlUHJvZ3JhbVNjaGVtYSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICBjb25zdCB7IFxuICAgICAgICBnYWxsZXJ5VXJscywgXG4gICAgICAgIHJlcXVpcmVtZW50cywgXG4gICAgICAgIGluY2x1ZGVkSXRlbXMsIFxuICAgICAgICBhY3Rpdml0aWVzLCBcbiAgICAgICAgLi4ucHJvZ3JhbURhdGEgXG4gICAgICB9ID0gaW5wdXQ7XG5cbiAgICAgIGNvbnN0IHByb2dyYW0gPSBhd2FpdCBjdHguZGIucHJvZ3JhbS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4ucHJvZ3JhbURhdGEsXG4gICAgICAgICAgZ2FsbGVyeVVybHM6IGdhbGxlcnlVcmxzID8gSlNPTi5zdHJpbmdpZnkoZ2FsbGVyeVVybHMpIDogbnVsbCxcbiAgICAgICAgICByZXF1aXJlbWVudHM6IHJlcXVpcmVtZW50cyA/IEpTT04uc3RyaW5naWZ5KHJlcXVpcmVtZW50cykgOiBudWxsLFxuICAgICAgICAgIGluY2x1ZGVkSXRlbXM6IGluY2x1ZGVkSXRlbXMgPyBKU09OLnN0cmluZ2lmeShpbmNsdWRlZEl0ZW1zKSA6IG51bGwsXG4gICAgICAgICAgYWN0aXZpdGllczogYWN0aXZpdGllcyA/IEpTT04uc3RyaW5naWZ5KGFjdGl2aXRpZXMpIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9KSxcbn0pOyJdLCJuYW1lcyI6WyJ6IiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2NlZHVyZSIsIlRSUENFcnJvciIsImxvZ2dlciIsImFkbWluUHJvY2VkdXJlIiwidXNlIiwiY3R4IiwibmV4dCIsInNlc3Npb24iLCJ1c2VyIiwicm9sZSIsImNvZGUiLCJtZXNzYWdlIiwiY3JlYXRlUHJvdmlkZXJTY2hlbWEiLCJvYmplY3QiLCJuYW1lIiwic3RyaW5nIiwibWluIiwiZGVzY3JpcHRpb24iLCJvcHRpb25hbCIsIndlYnNpdGUiLCJ1cmwiLCJvciIsImxpdGVyYWwiLCJlbWFpbCIsInBob25lIiwiYWRkcmVzcyIsInN1YnVyYiIsInN0YXRlIiwicG9zdGNvZGUiLCJsYXRpdHVkZSIsIm51bWJlciIsImxvbmdpdHVkZSIsImxvZ29VcmwiLCJiYW5uZXJJbWFnZVVybCIsInRhZ3MiLCJhcnJheSIsImNlcnRpZmljYXRpb25zIiwic3BlY2lhbGl6YXRpb25zIiwiYWdlR3JvdXBzIiwiaXNWZXR0ZWQiLCJib29sZWFuIiwiaXNQdWJsaXNoZWQiLCJ1cGRhdGVQcm92aWRlclNjaGVtYSIsInBhcnRpYWwiLCJleHRlbmQiLCJpZCIsImNyZWF0ZVByb2dyYW1TY2hlbWEiLCJwcm92aWRlcklkIiwiY2F0ZWdvcnkiLCJzdGFydERhdGUiLCJkYXRlIiwiZW5kRGF0ZSIsImR1cmF0aW9uIiwic2NoZWR1bGUiLCJtaW5BZ2UiLCJpbnQiLCJtYXhBZ2UiLCJjYXBhY2l0eSIsInNwb3RzQXZhaWxhYmxlIiwicHJpY2UiLCJlYXJseUJpcmRQcmljZSIsImVhcmx5QmlyZERlYWRsaW5lIiwidmVudWUiLCJpbWFnZVVybCIsImdhbGxlcnlVcmxzIiwicmVxdWlyZW1lbnRzIiwiaW5jbHVkZWRJdGVtcyIsImFjdGl2aXRpZXMiLCJpc0FjdGl2ZSIsInByb3ZpZGVyUm91dGVyIiwiZ2V0QWxsIiwiaW5wdXQiLCJpbmNsdWRlVW5wdWJsaXNoZWQiLCJpbmNsdWRlVW52ZXR0ZWQiLCJxdWVyeSIsIndoZXJlIiwiZGIiLCJwcm92aWRlciIsImZpbmRNYW55IiwiaW5jbHVkZSIsInByb2dyYW1zIiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImdldFB1Ymxpc2hlZCIsImdldEJ5SWQiLCJmaW5kVW5pcXVlIiwiY3JlYXRlIiwibXV0YXRpb24iLCJwcm92aWRlckRhdGEiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInZldHRlZEJ5IiwidmV0dGVkQXQiLCJEYXRlIiwicHVibGlzaGVkQXQiLCJpbmZvIiwidXNlcklkIiwiY29ycmVsYXRpb25JZCIsImFjdGlvbiIsInVwZGF0ZSIsInVwZGF0ZURhdGEiLCJleGlzdGluZ1Byb3ZpZGVyIiwic2VsZWN0IiwiZGF0YVRvVXBkYXRlIiwidW5kZWZpbmVkIiwiZGVsZXRlIiwicHJvdmlkZXJOYW1lIiwic3VjY2VzcyIsInRvZ2dsZVZldHRpbmciLCJ1cGRhdGVkIiwidG9nZ2xlUHVibGlzaGluZyIsImNyZWF0ZVByb2dyYW0iLCJwcm9ncmFtRGF0YSIsInByb2dyYW0iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/provider.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/subscription.ts":
/*!************************************************!*\
  !*** ./src/server/api/routers/subscription.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subscriptionRouter: () => (/* binding */ subscriptionRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/services/subscription.service */ \"(api-node)/./src/services/subscription.service.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst subscriptionRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    getSubscriptionStatus: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        return await service.getSubscriptionStatus(ctx.session.user.id);\n    }),\n    getStatus: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        const subscription = await service.getSubscription(ctx.session.user.id);\n        if (!subscription) {\n            return null;\n        }\n        return {\n            status: subscription.status,\n            expiresAt: subscription.expiresAt,\n            currentPeriodEnd: subscription.currentPeriodEnd,\n            cancelAtPeriodEnd: subscription.cancelAtPeriodEnd\n        };\n    }),\n    createCheckoutSession: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        priceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        const { user } = ctx.session;\n        const { req } = ctx;\n        // Build URLs for redirect\n        const host = req?.headers?.host ?? \"localhost:3000\";\n        const protocol = host.includes(\"localhost\") ? \"http\" : \"https\";\n        const baseUrl = `${protocol}://${host}`;\n        const successUrl = `${baseUrl}/subscription/success?session_id={CHECKOUT_SESSION_ID}`;\n        const cancelUrl = `${baseUrl}/subscription/cancelled`;\n        return await service.createCheckoutSession(user.id, user.email, successUrl, cancelUrl);\n    }),\n    cancelSubscription: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.mutation(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        return await service.cancelSubscription(ctx.session.user.id);\n    }),\n    resumeSubscription: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.mutation(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        return await service.resumeSubscription(ctx.session.user.id);\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvc3Vic2NyaXB0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0I7QUFDaUQ7QUFDSDtBQUUvRCxNQUFNSSxxQkFBcUJILGtFQUFnQkEsQ0FBQztJQUNqREksdUJBQXVCSCxnRUFBa0JBLENBQUNJLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUM1RCxNQUFNQyxVQUFVLElBQUlMLCtFQUFtQkEsQ0FBQ0ksSUFBSUUsRUFBRTtRQUM5QyxPQUFPLE1BQU1ELFFBQVFILHFCQUFxQixDQUFDRSxJQUFJRyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtJQUNoRTtJQUVBQyxXQUFXWCxnRUFBa0JBLENBQUNJLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUNoRCxNQUFNQyxVQUFVLElBQUlMLCtFQUFtQkEsQ0FBQ0ksSUFBSUUsRUFBRTtRQUM5QyxNQUFNSyxlQUFlLE1BQU1OLFFBQVFPLGVBQWUsQ0FBQ1IsSUFBSUcsT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7UUFFdEUsSUFBSSxDQUFDRSxjQUFjO1lBQ2pCLE9BQU87UUFDVDtRQUVBLE9BQU87WUFDTEUsUUFBUUYsYUFBYUUsTUFBTTtZQUMzQkMsV0FBV0gsYUFBYUcsU0FBUztZQUNqQ0Msa0JBQWtCSixhQUFhSSxnQkFBZ0I7WUFDL0NDLG1CQUFtQkwsYUFBYUssaUJBQWlCO1FBQ25EO0lBQ0Y7SUFFQUMsdUJBQXVCbEIsZ0VBQWtCQSxDQUN0Q21CLEtBQUssQ0FDSnJCLGtDQUFDQSxDQUFDc0IsTUFBTSxDQUFDO1FBQ1BDLFNBQVN2QixrQ0FBQ0EsQ0FBQ3dCLE1BQU0sR0FBR0MsUUFBUTtJQUM5QixJQUVEQyxRQUFRLENBQUMsT0FBTyxFQUFFbkIsR0FBRyxFQUFFYyxLQUFLLEVBQUU7UUFDN0IsTUFBTWIsVUFBVSxJQUFJTCwrRUFBbUJBLENBQUNJLElBQUlFLEVBQUU7UUFDOUMsTUFBTSxFQUFFRSxJQUFJLEVBQUUsR0FBR0osSUFBSUcsT0FBTztRQUM1QixNQUFNLEVBQUVpQixHQUFHLEVBQUUsR0FBR3BCO1FBRWhCLDBCQUEwQjtRQUMxQixNQUFNcUIsT0FBT0QsS0FBS0UsU0FBU0QsUUFBUTtRQUNuQyxNQUFNRSxXQUFXRixLQUFLRyxRQUFRLENBQUMsZUFBZSxTQUFTO1FBQ3ZELE1BQU1DLFVBQVUsR0FBR0YsU0FBUyxHQUFHLEVBQUVGLE1BQU07UUFFdkMsTUFBTUssYUFBYSxHQUFHRCxRQUFRLHNEQUFzRCxDQUFDO1FBQ3JGLE1BQU1FLFlBQVksR0FBR0YsUUFBUSx1QkFBdUIsQ0FBQztRQUVyRCxPQUFPLE1BQU14QixRQUFRWSxxQkFBcUIsQ0FDeENULEtBQUtDLEVBQUUsRUFDUEQsS0FBS3dCLEtBQUssRUFDVkYsWUFDQUM7SUFFSjtJQUVGRSxvQkFBb0JsQyxnRUFBa0JBLENBQUN3QixRQUFRLENBQUMsT0FBTyxFQUFFbkIsR0FBRyxFQUFFO1FBQzVELE1BQU1DLFVBQVUsSUFBSUwsK0VBQW1CQSxDQUFDSSxJQUFJRSxFQUFFO1FBQzlDLE9BQU8sTUFBTUQsUUFBUTRCLGtCQUFrQixDQUFDN0IsSUFBSUcsT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7SUFDN0Q7SUFFQXlCLG9CQUFvQm5DLGdFQUFrQkEsQ0FBQ3dCLFFBQVEsQ0FBQyxPQUFPLEVBQUVuQixHQUFHLEVBQUU7UUFDNUQsTUFBTUMsVUFBVSxJQUFJTCwrRUFBbUJBLENBQUNJLElBQUlFLEVBQUU7UUFDOUMsT0FBTyxNQUFNRCxRQUFRNkIsa0JBQWtCLENBQUM5QixJQUFJRyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtJQUM3RDtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3N1YnNjcmlwdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciwgcHJvdGVjdGVkUHJvY2VkdXJlIH0gZnJvbSBcIn4vc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TZXJ2aWNlIH0gZnJvbSBcIn4vc2VydmljZXMvc3Vic2NyaXB0aW9uLnNlcnZpY2VcIjtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmlwdGlvblJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBnZXRTdWJzY3JpcHRpb25TdGF0dXM6IHByb3RlY3RlZFByb2NlZHVyZS5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgU3Vic2NyaXB0aW9uU2VydmljZShjdHguZGIpO1xuICAgIHJldHVybiBhd2FpdCBzZXJ2aWNlLmdldFN1YnNjcmlwdGlvblN0YXR1cyhjdHguc2Vzc2lvbi51c2VyLmlkKTtcbiAgfSksXG5cbiAgZ2V0U3RhdHVzOiBwcm90ZWN0ZWRQcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFN1YnNjcmlwdGlvblNlcnZpY2UoY3R4LmRiKTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCBzZXJ2aWNlLmdldFN1YnNjcmlwdGlvbihjdHguc2Vzc2lvbi51c2VyLmlkKTtcbiAgICBcbiAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogc3Vic2NyaXB0aW9uLnN0YXR1cyxcbiAgICAgIGV4cGlyZXNBdDogc3Vic2NyaXB0aW9uLmV4cGlyZXNBdCxcbiAgICAgIGN1cnJlbnRQZXJpb2RFbmQ6IHN1YnNjcmlwdGlvbi5jdXJyZW50UGVyaW9kRW5kLFxuICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IHN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCxcbiAgICB9O1xuICB9KSxcblxuICBjcmVhdGVDaGVja291dFNlc3Npb246IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJpY2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBTdWJzY3JpcHRpb25TZXJ2aWNlKGN0eC5kYik7XG4gICAgICBjb25zdCB7IHVzZXIgfSA9IGN0eC5zZXNzaW9uO1xuICAgICAgY29uc3QgeyByZXEgfSA9IGN0eDtcblxuICAgICAgLy8gQnVpbGQgVVJMcyBmb3IgcmVkaXJlY3RcbiAgICAgIGNvbnN0IGhvc3QgPSByZXE/LmhlYWRlcnM/Lmhvc3QgPz8gXCJsb2NhbGhvc3Q6MzAwMFwiO1xuICAgICAgY29uc3QgcHJvdG9jb2wgPSBob3N0LmluY2x1ZGVzKFwibG9jYWxob3N0XCIpID8gXCJodHRwXCIgOiBcImh0dHBzXCI7XG4gICAgICBjb25zdCBiYXNlVXJsID0gYCR7cHJvdG9jb2x9Oi8vJHtob3N0fWA7XG4gICAgICBcbiAgICAgIGNvbnN0IHN1Y2Nlc3NVcmwgPSBgJHtiYXNlVXJsfS9zdWJzY3JpcHRpb24vc3VjY2Vzcz9zZXNzaW9uX2lkPXtDSEVDS09VVF9TRVNTSU9OX0lEfWA7XG4gICAgICBjb25zdCBjYW5jZWxVcmwgPSBgJHtiYXNlVXJsfS9zdWJzY3JpcHRpb24vY2FuY2VsbGVkYDtcblxuICAgICAgcmV0dXJuIGF3YWl0IHNlcnZpY2UuY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKFxuICAgICAgICB1c2VyLmlkLFxuICAgICAgICB1c2VyLmVtYWlsISxcbiAgICAgICAgc3VjY2Vzc1VybCxcbiAgICAgICAgY2FuY2VsVXJsXG4gICAgICApO1xuICAgIH0pLFxuXG4gIGNhbmNlbFN1YnNjcmlwdGlvbjogcHJvdGVjdGVkUHJvY2VkdXJlLm11dGF0aW9uKGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgY29uc3Qgc2VydmljZSA9IG5ldyBTdWJzY3JpcHRpb25TZXJ2aWNlKGN0eC5kYik7XG4gICAgcmV0dXJuIGF3YWl0IHNlcnZpY2UuY2FuY2VsU3Vic2NyaXB0aW9uKGN0eC5zZXNzaW9uLnVzZXIuaWQpO1xuICB9KSxcblxuICByZXN1bWVTdWJzY3JpcHRpb246IHByb3RlY3RlZFByb2NlZHVyZS5tdXRhdGlvbihhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgU3Vic2NyaXB0aW9uU2VydmljZShjdHguZGIpO1xuICAgIHJldHVybiBhd2FpdCBzZXJ2aWNlLnJlc3VtZVN1YnNjcmlwdGlvbihjdHguc2Vzc2lvbi51c2VyLmlkKTtcbiAgfSksXG59KTsiXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJTdWJzY3JpcHRpb25TZXJ2aWNlIiwic3Vic2NyaXB0aW9uUm91dGVyIiwiZ2V0U3Vic2NyaXB0aW9uU3RhdHVzIiwicXVlcnkiLCJjdHgiLCJzZXJ2aWNlIiwiZGIiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiZ2V0U3RhdHVzIiwic3Vic2NyaXB0aW9uIiwiZ2V0U3Vic2NyaXB0aW9uIiwic3RhdHVzIiwiZXhwaXJlc0F0IiwiY3VycmVudFBlcmlvZEVuZCIsImNhbmNlbEF0UGVyaW9kRW5kIiwiY3JlYXRlQ2hlY2tvdXRTZXNzaW9uIiwiaW5wdXQiLCJvYmplY3QiLCJwcmljZUlkIiwic3RyaW5nIiwib3B0aW9uYWwiLCJtdXRhdGlvbiIsInJlcSIsImhvc3QiLCJoZWFkZXJzIiwicHJvdG9jb2wiLCJpbmNsdWRlcyIsImJhc2VVcmwiLCJzdWNjZXNzVXJsIiwiY2FuY2VsVXJsIiwiZW1haWwiLCJjYW5jZWxTdWJzY3JpcHRpb24iLCJyZXN1bWVTdWJzY3JpcHRpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/subscription.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/user.ts":
/*!****************************************!*\
  !*** ./src/server/api/routers/user.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userRouter: () => (/* binding */ userRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _utils_encryption__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/encryption */ \"(api-node)/./src/utils/encryption.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _utils_encryption__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _utils_encryption__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst userRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    me: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        return ctx.session.user;\n    }),\n    updateProfile: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        phoneNumber: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        dateOfBirth: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const { name, phoneNumber, dateOfBirth, address } = input;\n        // Encrypt PII fields\n        const encryptedPhone = phoneNumber ? (0,_utils_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptPII)(phoneNumber) : undefined;\n        const encryptedDOB = dateOfBirth ? (0,_utils_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptPII)(dateOfBirth) : undefined;\n        const encryptedAddress = address ? (0,_utils_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptPII)(address) : undefined;\n        const updatedUser = await ctx.db.user.update({\n            where: {\n                id: ctx.session.user.id\n            },\n            data: {\n                name,\n                phoneNumber: encryptedPhone,\n                dateOfBirth: encryptedDOB,\n                address: encryptedAddress\n            },\n            select: {\n                id: true,\n                name: true,\n                email: true\n            }\n        });\n        return updatedUser;\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvdXNlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdCO0FBQ2lEO0FBQ3pCO0FBRXpDLE1BQU1JLGFBQWFILGtFQUFnQkEsQ0FBQztJQUN6Q0ksSUFBSUgsZ0VBQWtCQSxDQUFDSSxLQUFLLENBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7UUFDekMsT0FBT0EsSUFBSUMsT0FBTyxDQUFDQyxJQUFJO0lBQ3pCO0lBRUFDLGVBQWVSLGdFQUFrQkEsQ0FDOUJTLEtBQUssQ0FBQ1gsa0NBQUNBLENBQUNZLE1BQU0sQ0FBQztRQUNkQyxNQUFNYixrQ0FBQ0EsQ0FBQ2MsTUFBTSxHQUFHQyxRQUFRO1FBQ3pCQyxhQUFhaEIsa0NBQUNBLENBQUNjLE1BQU0sR0FBR0MsUUFBUTtRQUNoQ0UsYUFBYWpCLGtDQUFDQSxDQUFDYyxNQUFNLEdBQUdDLFFBQVE7UUFDaENHLFNBQVNsQixrQ0FBQ0EsQ0FBQ2MsTUFBTSxHQUFHQyxRQUFRO0lBQzlCLElBQ0NJLFFBQVEsQ0FBQyxPQUFPLEVBQUVaLEdBQUcsRUFBRUksS0FBSyxFQUFFO1FBQzdCLE1BQU0sRUFBRUUsSUFBSSxFQUFFRyxXQUFXLEVBQUVDLFdBQVcsRUFBRUMsT0FBTyxFQUFFLEdBQUdQO1FBRXBELHFCQUFxQjtRQUNyQixNQUFNUyxpQkFBaUJKLGNBQWNiLDZEQUFVQSxDQUFDYSxlQUFlSztRQUMvRCxNQUFNQyxlQUFlTCxjQUFjZCw2REFBVUEsQ0FBQ2MsZUFBZUk7UUFDN0QsTUFBTUUsbUJBQW1CTCxVQUFVZiw2REFBVUEsQ0FBQ2UsV0FBV0c7UUFFekQsTUFBTUcsY0FBYyxNQUFNakIsSUFBSWtCLEVBQUUsQ0FBQ2hCLElBQUksQ0FBQ2lCLE1BQU0sQ0FBQztZQUMzQ0MsT0FBTztnQkFBRUMsSUFBSXJCLElBQUlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDbUIsRUFBRTtZQUFDO1lBQ2pDQyxNQUFNO2dCQUNKaEI7Z0JBQ0FHLGFBQWFJO2dCQUNiSCxhQUFhSztnQkFDYkosU0FBU0s7WUFDWDtZQUNBTyxRQUFRO2dCQUNORixJQUFJO2dCQUNKZixNQUFNO2dCQUNOa0IsT0FBTztZQUVUO1FBQ0Y7UUFFQSxPQUFPUDtJQUNUO0FBQ0osR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvdXNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciwgcHJvdGVjdGVkUHJvY2VkdXJlIH0gZnJvbSBcIn4vc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBlbmNyeXB0UElJIH0gZnJvbSBcIn4vdXRpbHMvZW5jcnlwdGlvblwiO1xuXG5leHBvcnQgY29uc3QgdXNlclJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBtZTogcHJvdGVjdGVkUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgcmV0dXJuIGN0eC5zZXNzaW9uLnVzZXI7XG4gIH0pLFxuICBcbiAgdXBkYXRlUHJvZmlsZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHtcbiAgICAgIG5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIHBob25lTnVtYmVyOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBkYXRlT2ZCaXJ0aDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgYWRkcmVzczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBjdHgsIGlucHV0IH0pID0+IHtcbiAgICAgIGNvbnN0IHsgbmFtZSwgcGhvbmVOdW1iZXIsIGRhdGVPZkJpcnRoLCBhZGRyZXNzIH0gPSBpbnB1dDtcblxuICAgICAgLy8gRW5jcnlwdCBQSUkgZmllbGRzXG4gICAgICBjb25zdCBlbmNyeXB0ZWRQaG9uZSA9IHBob25lTnVtYmVyID8gZW5jcnlwdFBJSShwaG9uZU51bWJlcikgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBlbmNyeXB0ZWRET0IgPSBkYXRlT2ZCaXJ0aCA/IGVuY3J5cHRQSUkoZGF0ZU9mQmlydGgpIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3QgZW5jcnlwdGVkQWRkcmVzcyA9IGFkZHJlc3MgPyBlbmNyeXB0UElJKGFkZHJlc3MpIDogdW5kZWZpbmVkO1xuXG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IGN0eC5kYi51c2VyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBjdHguc2Vzc2lvbi51c2VyLmlkIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHBob25lTnVtYmVyOiBlbmNyeXB0ZWRQaG9uZSxcbiAgICAgICAgICBkYXRlT2ZCaXJ0aDogZW5jcnlwdGVkRE9CLFxuICAgICAgICAgIGFkZHJlc3M6IGVuY3J5cHRlZEFkZHJlc3MsXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgLy8gRG9uJ3QgcmV0dXJuIGVuY3J5cHRlZCBmaWVsZHNcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdXBkYXRlZFVzZXI7XG4gICAgfSksXG59KTsiXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJlbmNyeXB0UElJIiwidXNlclJvdXRlciIsIm1lIiwicXVlcnkiLCJjdHgiLCJzZXNzaW9uIiwidXNlciIsInVwZGF0ZVByb2ZpbGUiLCJpbnB1dCIsIm9iamVjdCIsIm5hbWUiLCJzdHJpbmciLCJvcHRpb25hbCIsInBob25lTnVtYmVyIiwiZGF0ZU9mQmlydGgiLCJhZGRyZXNzIiwibXV0YXRpb24iLCJlbmNyeXB0ZWRQaG9uZSIsInVuZGVmaW5lZCIsImVuY3J5cHRlZERPQiIsImVuY3J5cHRlZEFkZHJlc3MiLCJ1cGRhdGVkVXNlciIsImRiIiwidXBkYXRlIiwid2hlcmUiLCJpZCIsImRhdGEiLCJzZWxlY3QiLCJlbWFpbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/user.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/trpc.ts":
/*!********************************!*\
  !*** ./src/server/api/trpc.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInnerTRPCContext: () => (/* binding */ createInnerTRPCContext),\n/* harmony export */   createTRPCContext: () => (/* binding */ createTRPCContext),\n/* harmony export */   createTRPCRouter: () => (/* binding */ createTRPCRouter),\n/* harmony export */   premiumProcedure: () => (/* binding */ premiumProcedure),\n/* harmony export */   protectedProcedure: () => (/* binding */ protectedProcedure),\n/* harmony export */   publicProcedure: () => (/* binding */ publicProcedure),\n/* harmony export */   t: () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! superjson */ \"superjson\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _server_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ~/server/auth */ \"(api-node)/./src/server/auth.ts\");\n/* harmony import */ var _server_db__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ~/server/db */ \"(api-node)/./src/server/db.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\n/* harmony import */ var _utils_requestContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ~/utils/requestContext */ \"(api-node)/./src/utils/requestContext.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server__WEBPACK_IMPORTED_MODULE_0__, superjson__WEBPACK_IMPORTED_MODULE_1__, zod__WEBPACK_IMPORTED_MODULE_2__, _server_auth__WEBPACK_IMPORTED_MODULE_4__, _server_db__WEBPACK_IMPORTED_MODULE_5__]);\n([_trpc_server__WEBPACK_IMPORTED_MODULE_0__, superjson__WEBPACK_IMPORTED_MODULE_1__, zod__WEBPACK_IMPORTED_MODULE_2__, _server_auth__WEBPACK_IMPORTED_MODULE_4__, _server_db__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst createInnerTRPCContext = (opts)=>{\n    return {\n        session: opts.session,\n        db: _server_db__WEBPACK_IMPORTED_MODULE_5__.db,\n        correlationId: opts.correlationId,\n        requestPath: opts.requestPath,\n        req: opts.req,\n        res: opts.res\n    };\n};\nconst createTRPCContext = async (opts)=>{\n    const { req, res } = opts;\n    const session = await (0,_server_auth__WEBPACK_IMPORTED_MODULE_4__.getServerAuthSession)({\n        req,\n        res\n    });\n    // Get correlation ID from headers (set by middleware) or generate secure one\n    const correlationId = req.headers['x-correlation-id'] || `${Date.now()}-${(0,crypto__WEBPACK_IMPORTED_MODULE_3__.randomBytes)(6).toString('hex')}`;\n    // Get request path for logging\n    const requestPath = req.url;\n    return createInnerTRPCContext({\n        session,\n        correlationId,\n        requestPath,\n        req,\n        res\n    });\n};\nconst t = _trpc_server__WEBPACK_IMPORTED_MODULE_0__.initTRPC.context().create({\n    transformer: superjson__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    errorFormatter ({ shape, error }) {\n        return {\n            ...shape,\n            data: {\n                ...shape.data,\n                zodError: error.cause instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodError ? error.cause.flatten() : null\n            }\n        };\n    }\n});\n// Logging middleware\nconst loggingMiddleware = t.middleware(async ({ path, next, ctx })=>{\n    const logContext = {\n        correlationId: ctx.correlationId,\n        userId: ctx.session?.user?.id,\n        sessionId: ctx.session?.user?.email || undefined\n    };\n    const requestContext = {\n        ...logContext,\n        journey: path,\n        startTime: Date.now()\n    };\n    // Log the incoming request\n    _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.info(`tRPC request started: ${path}`, logContext, {\n        path,\n        hasSession: !!ctx.session\n    });\n    try {\n        // Run the procedure with request context\n        const result = await (0,_utils_requestContext__WEBPACK_IMPORTED_MODULE_7__.withRequestContext)(requestContext, ()=>next({\n                ctx\n            }));\n        // Log successful completion\n        const duration = Date.now() - requestContext.startTime;\n        _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.info(`tRPC request completed: ${path}`, logContext, {\n            path,\n            duration,\n            success: true\n        });\n        return result;\n    } catch (error) {\n        // Log error\n        const duration = Date.now() - requestContext.startTime;\n        _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.error(`tRPC request failed: ${path}`, logContext, error instanceof Error ? error : new Error('Unknown error'), {\n            path,\n            duration,\n            errorType: error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError ? error.code : 'UNKNOWN'\n        });\n        throw error;\n    }\n});\nconst createTRPCRouter = t.router;\n// Public procedure with logging\nconst publicProcedure = t.procedure.use(loggingMiddleware);\n// Protected procedure with logging (for future use when auth is implemented)\nconst protectedProcedure = t.procedure.use(loggingMiddleware).use({\n    \"use[protectedProcedure]\": ({ ctx, next })=>{\n        if (!ctx.session || !ctx.session.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                code: \"UNAUTHORIZED\"\n            });\n        }\n        return next({\n            ctx: {\n                // infers the `session` as non-nullable\n                session: {\n                    ...ctx.session,\n                    user: ctx.session.user\n                }\n            }\n        });\n    }\n}[\"use[protectedProcedure]\"]);\n// Premium procedure that requires an active subscription\nconst premiumProcedure = protectedProcedure.use({\n    \"use[premiumProcedure]\": async ({ ctx, next })=>{\n        const { isSubscriptionActive } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ~/utils/subscription */ \"(api-node)/./src/utils/subscription.ts\"));\n        const { SubscriptionStatus } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ~/server/db */ \"(api-node)/./src/server/db.ts\"));\n        const subscription = await ctx.db.subscription.findUnique({\n            where: {\n                userId: ctx.session.user.id\n            }\n        });\n        if (!isSubscriptionActive(subscription)) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.warn('Access denied - no active subscription', {\n                correlationId: ctx.correlationId,\n                userId: ctx.session.user.id,\n                subscriptionStatus: subscription?.status\n            });\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                code: 'FORBIDDEN',\n                message: 'Active subscription required'\n            });\n        }\n        // Check if subscription has expired and needs status update\n        if (subscription && subscription.expiresAt && subscription.expiresAt < new Date() && subscription.status === SubscriptionStatus.ACTIVE) {\n            // Update status to expired\n            await ctx.db.subscription.update({\n                where: {\n                    id: subscription.id\n                },\n                data: {\n                    status: SubscriptionStatus.EXPIRED\n                }\n            });\n            _utils_logger__WEBPACK_IMPORTED_MODULE_6__.logger.info('Subscription expired and status updated', {\n                correlationId: ctx.correlationId,\n                subscriptionId: subscription.id,\n                userId: ctx.session.user.id\n            });\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                code: 'FORBIDDEN',\n                message: 'Subscription has expired'\n            });\n        }\n        return next({\n            ctx\n        });\n    }\n}[\"use[premiumProcedure]\"]);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPLENBQUM2QixJQUFJLENBQUNDLEVBQUU7WUFBQztRQUN2QztRQUVBLElBQUksQ0FBQ3NCLHFCQUFxQkUsZUFBZTtZQUN2QzFELGlEQUFNQSxDQUFDNkQsSUFBSSxDQUFDLDBDQUEwQztnQkFDcER4RCxlQUFleUIsSUFBSXpCLGFBQWE7Z0JBQ2hDMkIsUUFBUUYsSUFBSTFCLE9BQU8sQ0FBQzZCLElBQUksQ0FBQ0MsRUFBRTtnQkFDM0I0QixvQkFBb0JKLGNBQWNLO1lBQ3BDO1lBRUEsTUFBTSxJQUFJckUsbURBQVNBLENBQUM7Z0JBQ2xCc0QsTUFBTTtnQkFDTmdCLFNBQVM7WUFDWDtRQUNGO1FBRUEsNERBQTREO1FBQzVELElBQUlOLGdCQUFnQkEsYUFBYU8sU0FBUyxJQUFJUCxhQUFhTyxTQUFTLEdBQUcsSUFBSXRELFVBQVUrQyxhQUFhSyxNQUFNLEtBQUtOLG1CQUFtQlMsTUFBTSxFQUFFO1lBQ3RJLDJCQUEyQjtZQUMzQixNQUFNcEMsSUFBSS9CLEVBQUUsQ0FBQzJELFlBQVksQ0FBQ1MsTUFBTSxDQUFDO2dCQUMvQlAsT0FBTztvQkFBRTFCLElBQUl3QixhQUFheEIsRUFBRTtnQkFBQztnQkFDN0JaLE1BQU07b0JBQUV5QyxRQUFRTixtQkFBbUJXLE9BQU87Z0JBQUM7WUFDN0M7WUFFQXBFLGlEQUFNQSxDQUFDeUMsSUFBSSxDQUFDLDJDQUEyQztnQkFDckRwQyxlQUFleUIsSUFBSXpCLGFBQWE7Z0JBQ2hDZ0UsZ0JBQWdCWCxhQUFheEIsRUFBRTtnQkFDL0JGLFFBQVFGLElBQUkxQixPQUFPLENBQUM2QixJQUFJLENBQUNDLEVBQUU7WUFDN0I7WUFFQSxNQUFNLElBQUl4QyxtREFBU0EsQ0FBQztnQkFDbEJzRCxNQUFNO2dCQUNOZ0IsU0FBUztZQUNYO1FBQ0Y7UUFFQSxPQUFPbkMsS0FBSztZQUNWQztRQUNGO0lBQ0Y7NEJBQUciLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvc2VydmVyL2FwaS90cnBjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRUUlBDLCBUUlBDRXJyb3IgfSBmcm9tIFwiQHRycGMvc2VydmVyXCI7XG5pbXBvcnQgeyB0eXBlIENyZWF0ZU5leHRDb250ZXh0T3B0aW9ucyB9IGZyb20gXCJAdHJwYy9zZXJ2ZXIvYWRhcHRlcnMvbmV4dFwiO1xuaW1wb3J0IHsgdHlwZSBTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHN1cGVyanNvbiBmcm9tIFwic3VwZXJqc29uXCI7XG5pbXBvcnQgeyBab2RFcnJvciB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IHJhbmRvbUJ5dGVzIH0gZnJvbSBcImNyeXB0b1wiO1xuXG5pbXBvcnQgeyBnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiB9IGZyb20gXCJ+L3NlcnZlci9hdXRoXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCJ+L3NlcnZlci9kYlwiO1xuaW1wb3J0IHsgbG9nZ2VyLCB0eXBlIExvZ0NvbnRleHQgfSBmcm9tIFwifi91dGlscy9sb2dnZXJcIjtcbmltcG9ydCB7IHdpdGhSZXF1ZXN0Q29udGV4dCwgdHlwZSBSZXF1ZXN0Q29udGV4dCB9IGZyb20gXCJ+L3V0aWxzL3JlcXVlc3RDb250ZXh0XCI7XG5cbnR5cGUgQ3JlYXRlQ29udGV4dE9wdGlvbnMgPSB7XG4gIHNlc3Npb246IFNlc3Npb24gfCBudWxsO1xuICBjb3JyZWxhdGlvbklkOiBzdHJpbmc7XG4gIHJlcXVlc3RQYXRoPzogc3RyaW5nO1xuICByZXE/OiBDcmVhdGVOZXh0Q29udGV4dE9wdGlvbnNbJ3JlcSddO1xuICByZXM/OiBDcmVhdGVOZXh0Q29udGV4dE9wdGlvbnNbJ3JlcyddO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUlubmVyVFJQQ0NvbnRleHQgPSAob3B0czogQ3JlYXRlQ29udGV4dE9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9uOiBvcHRzLnNlc3Npb24sXG4gICAgZGIsXG4gICAgY29ycmVsYXRpb25JZDogb3B0cy5jb3JyZWxhdGlvbklkLFxuICAgIHJlcXVlc3RQYXRoOiBvcHRzLnJlcXVlc3RQYXRoLFxuICAgIHJlcTogb3B0cy5yZXEsXG4gICAgcmVzOiBvcHRzLnJlcyxcbiAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIENvbnRleHQgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZVRSUENDb250ZXh0Pj47XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVUUlBDQ29udGV4dCA9IGFzeW5jIChvcHRzOiBDcmVhdGVOZXh0Q29udGV4dE9wdGlvbnMpID0+IHtcbiAgY29uc3QgeyByZXEsIHJlcyB9ID0gb3B0cztcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlckF1dGhTZXNzaW9uKHsgcmVxLCByZXMgfSk7XG4gIFxuICAvLyBHZXQgY29ycmVsYXRpb24gSUQgZnJvbSBoZWFkZXJzIChzZXQgYnkgbWlkZGxld2FyZSkgb3IgZ2VuZXJhdGUgc2VjdXJlIG9uZVxuICBjb25zdCBjb3JyZWxhdGlvbklkID0gcmVxLmhlYWRlcnNbJ3gtY29ycmVsYXRpb24taWQnXSBhcyBzdHJpbmcgfHwgXG4gICAgYCR7RGF0ZS5ub3coKX0tJHtyYW5kb21CeXRlcyg2KS50b1N0cmluZygnaGV4Jyl9YDtcbiAgXG4gIC8vIEdldCByZXF1ZXN0IHBhdGggZm9yIGxvZ2dpbmdcbiAgY29uc3QgcmVxdWVzdFBhdGggPSByZXEudXJsO1xuXG4gIHJldHVybiBjcmVhdGVJbm5lclRSUENDb250ZXh0KHtcbiAgICBzZXNzaW9uLFxuICAgIGNvcnJlbGF0aW9uSWQsXG4gICAgcmVxdWVzdFBhdGgsXG4gICAgcmVxLFxuICAgIHJlcyxcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgdCA9IGluaXRUUlBDLmNvbnRleHQ8dHlwZW9mIGNyZWF0ZVRSUENDb250ZXh0PigpLmNyZWF0ZSh7XG4gIHRyYW5zZm9ybWVyOiBzdXBlcmpzb24sXG4gIGVycm9yRm9ybWF0dGVyKHsgc2hhcGUsIGVycm9yIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc2hhcGUsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIC4uLnNoYXBlLmRhdGEsXG4gICAgICAgIHpvZEVycm9yOlxuICAgICAgICAgIGVycm9yLmNhdXNlIGluc3RhbmNlb2YgWm9kRXJyb3IgPyBlcnJvci5jYXVzZS5mbGF0dGVuKCkgOiBudWxsLFxuICAgICAgfSxcbiAgICB9O1xuICB9LFxufSk7XG5cbi8vIExvZ2dpbmcgbWlkZGxld2FyZVxuY29uc3QgbG9nZ2luZ01pZGRsZXdhcmUgPSB0Lm1pZGRsZXdhcmUoYXN5bmMgKHsgcGF0aCwgbmV4dCwgY3R4IH0pID0+IHtcbiAgY29uc3QgbG9nQ29udGV4dDogTG9nQ29udGV4dCA9IHtcbiAgICBjb3JyZWxhdGlvbklkOiBjdHguY29ycmVsYXRpb25JZCxcbiAgICB1c2VySWQ6IGN0eC5zZXNzaW9uPy51c2VyPy5pZCxcbiAgICBzZXNzaW9uSWQ6IGN0eC5zZXNzaW9uPy51c2VyPy5lbWFpbCB8fCB1bmRlZmluZWQsIC8vIFVzaW5nIGVtYWlsIGFzIHNlc3Npb24gaWRlbnRpZmllciBmb3Igbm93XG4gIH07XG5cbiAgY29uc3QgcmVxdWVzdENvbnRleHQ6IFJlcXVlc3RDb250ZXh0ID0ge1xuICAgIC4uLmxvZ0NvbnRleHQsXG4gICAgam91cm5leTogcGF0aCxcbiAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gIH07XG5cbiAgLy8gTG9nIHRoZSBpbmNvbWluZyByZXF1ZXN0XG4gIGxvZ2dlci5pbmZvKGB0UlBDIHJlcXVlc3Qgc3RhcnRlZDogJHtwYXRofWAsIGxvZ0NvbnRleHQsIHtcbiAgICBwYXRoLFxuICAgIGhhc1Nlc3Npb246ICEhY3R4LnNlc3Npb24sXG4gIH0pO1xuXG4gIHRyeSB7XG4gICAgLy8gUnVuIHRoZSBwcm9jZWR1cmUgd2l0aCByZXF1ZXN0IGNvbnRleHRcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXRoUmVxdWVzdENvbnRleHQocmVxdWVzdENvbnRleHQsICgpID0+IG5leHQoeyBjdHggfSkpO1xuICAgIFxuICAgIC8vIExvZyBzdWNjZXNzZnVsIGNvbXBsZXRpb25cbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSByZXF1ZXN0Q29udGV4dC5zdGFydFRpbWU7XG4gICAgbG9nZ2VyLmluZm8oYHRSUEMgcmVxdWVzdCBjb21wbGV0ZWQ6ICR7cGF0aH1gLCBsb2dDb250ZXh0LCB7XG4gICAgICBwYXRoLFxuICAgICAgZHVyYXRpb24sXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTG9nIGVycm9yXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gcmVxdWVzdENvbnRleHQuc3RhcnRUaW1lO1xuICAgIGxvZ2dlci5lcnJvcihcbiAgICAgIGB0UlBDIHJlcXVlc3QgZmFpbGVkOiAke3BhdGh9YCxcbiAgICAgIGxvZ0NvbnRleHQsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKSxcbiAgICAgIHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGVycm9yVHlwZTogZXJyb3IgaW5zdGFuY2VvZiBUUlBDRXJyb3IgPyBlcnJvci5jb2RlIDogJ1VOS05PV04nLFxuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVFJQQ1JvdXRlciA9IHQucm91dGVyO1xuXG4vLyBQdWJsaWMgcHJvY2VkdXJlIHdpdGggbG9nZ2luZ1xuZXhwb3J0IGNvbnN0IHB1YmxpY1Byb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShsb2dnaW5nTWlkZGxld2FyZSk7XG5cbi8vIFByb3RlY3RlZCBwcm9jZWR1cmUgd2l0aCBsb2dnaW5nIChmb3IgZnV0dXJlIHVzZSB3aGVuIGF1dGggaXMgaW1wbGVtZW50ZWQpXG5leHBvcnQgY29uc3QgcHJvdGVjdGVkUHJvY2VkdXJlID0gdC5wcm9jZWR1cmVcbiAgLnVzZShsb2dnaW5nTWlkZGxld2FyZSlcbiAgLnVzZSgoeyBjdHgsIG5leHQgfSkgPT4ge1xuICAgIGlmICghY3R4LnNlc3Npb24gfHwgIWN0eC5zZXNzaW9uLnVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiBcIlVOQVVUSE9SSVpFRFwiIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBjdHg6IHtcbiAgICAgICAgLy8gaW5mZXJzIHRoZSBgc2Vzc2lvbmAgYXMgbm9uLW51bGxhYmxlXG4gICAgICAgIHNlc3Npb246IHsgLi4uY3R4LnNlc3Npb24sIHVzZXI6IGN0eC5zZXNzaW9uLnVzZXIgfSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4vLyBJbXBvcnQgdGhlIHN1YnNjcmlwdGlvbiBtaWRkbGV3YXJlXG5pbXBvcnQgeyByZXF1aXJlQWN0aXZlU3Vic2NyaXB0aW9uTWlkZGxld2FyZSB9IGZyb20gXCIuL21pZGRsZXdhcmUvcmVxdWlyZUFjdGl2ZVN1YnNjcmlwdGlvblwiO1xuXG4vLyBQcmVtaXVtIHByb2NlZHVyZSB0aGF0IHJlcXVpcmVzIGFuIGFjdGl2ZSBzdWJzY3JpcHRpb25cbmV4cG9ydCBjb25zdCBwcmVtaXVtUHJvY2VkdXJlID0gcHJvdGVjdGVkUHJvY2VkdXJlXG4gIC51c2UoYXN5bmMgKHsgY3R4LCBuZXh0IH0pID0+IHtcbiAgICBjb25zdCB7IGlzU3Vic2NyaXB0aW9uQWN0aXZlIH0gPSBhd2FpdCBpbXBvcnQoXCJ+L3V0aWxzL3N1YnNjcmlwdGlvblwiKTtcbiAgICBjb25zdCB7IFN1YnNjcmlwdGlvblN0YXR1cyB9ID0gYXdhaXQgaW1wb3J0KFwifi9zZXJ2ZXIvZGJcIik7XG4gICAgXG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgY3R4LmRiLnN1YnNjcmlwdGlvbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWlzU3Vic2NyaXB0aW9uQWN0aXZlKHN1YnNjcmlwdGlvbikpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdBY2Nlc3MgZGVuaWVkIC0gbm8gYWN0aXZlIHN1YnNjcmlwdGlvbicsIHtcbiAgICAgICAgY29ycmVsYXRpb25JZDogY3R4LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgc3Vic2NyaXB0aW9uU3RhdHVzOiBzdWJzY3JpcHRpb24/LnN0YXR1c1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBcbiAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICAgIG1lc3NhZ2U6ICdBY3RpdmUgc3Vic2NyaXB0aW9uIHJlcXVpcmVkJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgc3Vic2NyaXB0aW9uIGhhcyBleHBpcmVkIGFuZCBuZWVkcyBzdGF0dXMgdXBkYXRlXG4gICAgaWYgKHN1YnNjcmlwdGlvbiAmJiBzdWJzY3JpcHRpb24uZXhwaXJlc0F0ICYmIHN1YnNjcmlwdGlvbi5leHBpcmVzQXQgPCBuZXcgRGF0ZSgpICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUpIHtcbiAgICAgIC8vIFVwZGF0ZSBzdGF0dXMgdG8gZXhwaXJlZFxuICAgICAgYXdhaXQgY3R4LmRiLnN1YnNjcmlwdGlvbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogc3Vic2NyaXB0aW9uLmlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiBTdWJzY3JpcHRpb25TdGF0dXMuRVhQSVJFRCB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ1N1YnNjcmlwdGlvbiBleHBpcmVkIGFuZCBzdGF0dXMgdXBkYXRlZCcsIHtcbiAgICAgICAgY29ycmVsYXRpb25JZDogY3R4LmNvcnJlbGF0aW9uSWQsXG4gICAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBcbiAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICAgIG1lc3NhZ2U6ICdTdWJzY3JpcHRpb24gaGFzIGV4cGlyZWQnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBjdHgsXG4gICAgfSk7XG4gIH0pOyJdLCJuYW1lcyI6WyJpbml0VFJQQyIsIlRSUENFcnJvciIsInN1cGVyanNvbiIsIlpvZEVycm9yIiwicmFuZG9tQnl0ZXMiLCJnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiIsImRiIiwibG9nZ2VyIiwid2l0aFJlcXVlc3RDb250ZXh0IiwiY3JlYXRlSW5uZXJUUlBDQ29udGV4dCIsIm9wdHMiLCJzZXNzaW9uIiwiY29ycmVsYXRpb25JZCIsInJlcXVlc3RQYXRoIiwicmVxIiwicmVzIiwiY3JlYXRlVFJQQ0NvbnRleHQiLCJoZWFkZXJzIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidXJsIiwidCIsImNvbnRleHQiLCJjcmVhdGUiLCJ0cmFuc2Zvcm1lciIsImVycm9yRm9ybWF0dGVyIiwic2hhcGUiLCJlcnJvciIsImRhdGEiLCJ6b2RFcnJvciIsImNhdXNlIiwiZmxhdHRlbiIsImxvZ2dpbmdNaWRkbGV3YXJlIiwibWlkZGxld2FyZSIsInBhdGgiLCJuZXh0IiwiY3R4IiwibG9nQ29udGV4dCIsInVzZXJJZCIsInVzZXIiLCJpZCIsInNlc3Npb25JZCIsImVtYWlsIiwidW5kZWZpbmVkIiwicmVxdWVzdENvbnRleHQiLCJqb3VybmV5Iiwic3RhcnRUaW1lIiwiaW5mbyIsImhhc1Nlc3Npb24iLCJyZXN1bHQiLCJkdXJhdGlvbiIsInN1Y2Nlc3MiLCJFcnJvciIsImVycm9yVHlwZSIsImNvZGUiLCJjcmVhdGVUUlBDUm91dGVyIiwicm91dGVyIiwicHVibGljUHJvY2VkdXJlIiwicHJvY2VkdXJlIiwidXNlIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwicHJlbWl1bVByb2NlZHVyZSIsImlzU3Vic2NyaXB0aW9uQWN0aXZlIiwiU3Vic2NyaXB0aW9uU3RhdHVzIiwic3Vic2NyaXB0aW9uIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwid2FybiIsInN1YnNjcmlwdGlvblN0YXR1cyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJleHBpcmVzQXQiLCJBQ1RJVkUiLCJ1cGRhdGUiLCJFWFBJUkVEIiwic3Vic2NyaXB0aW9uSWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/trpc.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/auth.ts":
/*!****************************!*\
  !*** ./src/server/auth.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getServerAuthSession: () => (/* binding */ getServerAuthSession)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _server_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ~/server/db */ \"(api-node)/./src/server/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_4__, zod__WEBPACK_IMPORTED_MODULE_5__, _env_mjs__WEBPACK_IMPORTED_MODULE_6__, _server_db__WEBPACK_IMPORTED_MODULE_7__]);\n([bcryptjs__WEBPACK_IMPORTED_MODULE_4__, zod__WEBPACK_IMPORTED_MODULE_5__, _env_mjs__WEBPACK_IMPORTED_MODULE_6__, _server_db__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst credentialsSchema = zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().email(),\n    password: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().min(6)\n});\nconst authOptions = {\n    callbacks: {\n        session: async ({ session, token })=>{\n            if (token.sub) {\n                // Fetch user role from database\n                const user = await _server_db__WEBPACK_IMPORTED_MODULE_7__.db.user.findUnique({\n                    where: {\n                        id: token.sub\n                    },\n                    select: {\n                        role: true\n                    }\n                });\n                return {\n                    ...session,\n                    user: {\n                        ...session.user,\n                        id: token.sub,\n                        role: user?.role ?? \"USER\"\n                    }\n                };\n            }\n            return session;\n        },\n        jwt: async ({ token, user })=>{\n            if (user) {\n                token.role = user.role;\n            }\n            return token;\n        }\n    },\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__.PrismaAdapter)(_server_db__WEBPACK_IMPORTED_MODULE_7__.db),\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: _env_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GOOGLE_CLIENT_ID ?? \"\",\n            clientSecret: _env_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GOOGLE_CLIENT_SECRET ?? \"\",\n            authorization: {\n                params: {\n                    prompt: \"consent\",\n                    access_type: \"offline\",\n                    response_type: \"code\"\n                }\n            }\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                const parsed = credentialsSchema.safeParse(credentials);\n                if (!parsed.success) {\n                    return null;\n                }\n                const { email, password } = parsed.data;\n                // Find user by email\n                const user = await _server_db__WEBPACK_IMPORTED_MODULE_7__.db.user.findUnique({\n                    where: {\n                        email\n                    }\n                });\n                if (!user || !user.password) {\n                    return null;\n                }\n                // Verify password\n                const passwordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].compare(password, user.password);\n                if (!passwordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image,\n                    role: user.role\n                };\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    },\n    session: {\n        strategy: \"jwt\"\n    }\n};\nconst getServerAuthSession = (ctx)=>{\n    return (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(ctx.req, ctx.res, authOptions);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBbkMsU0FBUztRQUNQb0MsVUFBVTtJQUNaO0FBQ0YsRUFBRTtBQUVLLE1BQU1DLHVCQUF1QixDQUFDQztJQUluQyxPQUFPdEQsMkRBQWdCQSxDQUFDc0QsSUFBSUMsR0FBRyxFQUFFRCxJQUFJRSxHQUFHLEVBQUUxQztBQUM1QyxFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3NlcnZlci9hdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uLCB0eXBlIE5leHRBdXRoT3B0aW9ucywgdHlwZSBEZWZhdWx0U2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGVcIjtcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzXCI7XG5pbXBvcnQgeyBQcmlzbWFBZGFwdGVyIH0gZnJvbSBcIkBuZXh0LWF1dGgvcHJpc21hLWFkYXB0ZXJcIjtcbmltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwifi9lbnYubWpzXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCJ+L3NlcnZlci9kYlwiO1xuXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aFwiIHtcbiAgaW50ZXJmYWNlIFNlc3Npb24gZXh0ZW5kcyBEZWZhdWx0U2Vzc2lvbiB7XG4gICAgdXNlcjoge1xuICAgICAgaWQ6IHN0cmluZztcbiAgICAgIHJvbGU6IFwiVVNFUlwiIHwgXCJBRE1JTlwiO1xuICAgIH0gJiBEZWZhdWx0U2Vzc2lvbltcInVzZXJcIl07XG4gIH1cbiAgXG4gIGludGVyZmFjZSBVc2VyIHtcbiAgICByb2xlOiBcIlVTRVJcIiB8IFwiQURNSU5cIjtcbiAgfVxufVxuXG5jb25zdCBjcmVkZW50aWFsc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWluKDYpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBjYWxsYmFja3M6IHtcbiAgICBzZXNzaW9uOiBhc3luYyAoeyBzZXNzaW9uLCB0b2tlbiB9KSA9PiB7XG4gICAgICBpZiAodG9rZW4uc3ViKSB7XG4gICAgICAgIC8vIEZldGNoIHVzZXIgcm9sZSBmcm9tIGRhdGFiYXNlXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB0b2tlbi5zdWIgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgcm9sZTogdHJ1ZSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uc2Vzc2lvbixcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAuLi5zZXNzaW9uLnVzZXIsXG4gICAgICAgICAgICBpZDogdG9rZW4uc3ViLFxuICAgICAgICAgICAgcm9sZTogdXNlcj8ucm9sZSA/PyBcIlVTRVJcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgICBqd3Q6IGFzeW5jICh7IHRva2VuLCB1c2VyIH0pID0+IHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgfSxcbiAgYWRhcHRlcjogUHJpc21hQWRhcHRlcihkYiksXG4gIHByb3ZpZGVyczogW1xuICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBlbnYuR09PR0xFX0NMSUVOVF9JRCA/PyBcIlwiLFxuICAgICAgY2xpZW50U2VjcmV0OiBlbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQgPz8gXCJcIixcbiAgICAgIGF1dGhvcml6YXRpb246IHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgcHJvbXB0OiBcImNvbnNlbnRcIixcbiAgICAgICAgICBhY2Nlc3NfdHlwZTogXCJvZmZsaW5lXCIsXG4gICAgICAgICAgcmVzcG9uc2VfdHlwZTogXCJjb2RlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9LFxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBjcmVkZW50aWFsc1NjaGVtYS5zYWZlUGFyc2UoY3JlZGVudGlhbHMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHBhcnNlZC5kYXRhO1xuXG4gICAgICAgIC8vIEZpbmQgdXNlciBieSBlbWFpbFxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBlbWFpbCB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXVzZXIgfHwgIXVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZlcmlmeSBwYXNzd29yZFxuICAgICAgICBjb25zdCBwYXNzd29yZFZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwYXNzd29yZFZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSxcbiAgICAgICAgICByb2xlOiB1c2VyLnJvbGUgYXMgXCJVU0VSXCIgfCBcIkFETUlOXCIsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0pLFxuICBdLFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvYXV0aC9zaWduaW5cIixcbiAgICBlcnJvcjogXCIvYXV0aC9lcnJvclwiLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U2VydmVyQXV0aFNlc3Npb24gPSAoY3R4OiB7XG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXTtcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdO1xufSkgPT4ge1xuICByZXR1cm4gZ2V0U2VydmVyU2Vzc2lvbihjdHgucmVxLCBjdHgucmVzLCBhdXRoT3B0aW9ucyk7XG59OyJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiR29vZ2xlUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiUHJpc21hQWRhcHRlciIsImJjcnlwdCIsInoiLCJlbnYiLCJkYiIsImNyZWRlbnRpYWxzU2NoZW1hIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJwYXNzd29yZCIsIm1pbiIsImF1dGhPcHRpb25zIiwiY2FsbGJhY2tzIiwic2Vzc2lvbiIsInRva2VuIiwic3ViIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0Iiwicm9sZSIsImp3dCIsImFkYXB0ZXIiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsIkdPT0dMRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsImF1dGhvcml6YXRpb24iLCJwYXJhbXMiLCJwcm9tcHQiLCJhY2Nlc3NfdHlwZSIsInJlc3BvbnNlX3R5cGUiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJsYWJlbCIsInR5cGUiLCJhdXRob3JpemUiLCJwYXJzZWQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZGF0YSIsInBhc3N3b3JkVmFsaWQiLCJjb21wYXJlIiwiaW1hZ2UiLCJwYWdlcyIsInNpZ25JbiIsImVycm9yIiwic3RyYXRlZ3kiLCJnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiIsImN0eCIsInJlcSIsInJlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/server/auth.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/db.ts":
/*!**************************!*\
  !*** ./src/server/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProgramStatus: () => (/* reexport safe */ _types_database__WEBPACK_IMPORTED_MODULE_2__.ProgramStatus),\n/* harmony export */   SubscriptionStatus: () => (/* reexport safe */ _types_database__WEBPACK_IMPORTED_MODULE_2__.SubscriptionStatus),\n/* harmony export */   UserRole: () => (/* reexport safe */ _types_database__WEBPACK_IMPORTED_MODULE_2__.UserRole),\n/* harmony export */   VettingStatus: () => (/* reexport safe */ _types_database__WEBPACK_IMPORTED_MODULE_2__.VettingStatus),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _types_database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/types/database */ \"(api-node)/./src/types/database.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_env_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n_env_mjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Re-export enum replacements for SQLite compatibility\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV === \"development\" ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : [\n        \"error\"\n    ]\n});\nif (_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\n// Also export as prisma for compatibility\nconst prisma = db;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUE4QztBQUVkO0FBRWhDLHVEQUF1RDtBQUN1QztBQUU5RixNQUFNTSxrQkFBa0JDO0FBSWpCLE1BQU1DLEtBQ1hGLGdCQUFnQkcsTUFBTSxJQUN0QixJQUFJVCx3REFBWUEsQ0FBQztJQUNmVSxLQUNFVCx5Q0FBR0EsQ0FBQ1UsUUFBUSxLQUFLLGdCQUFnQjtRQUFDO1FBQVM7UUFBUztLQUFPLEdBQUc7UUFBQztLQUFRO0FBQzNFLEdBQUc7QUFFTCxJQUFJVix5Q0FBR0EsQ0FBQ1UsUUFBUSxLQUFLLGNBQWNMLGdCQUFnQkcsTUFBTSxHQUFHRDtBQUU1RCwwQ0FBMEM7QUFDbkMsTUFBTUMsU0FBU0QsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2ZXIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmltcG9ydCB7IGVudiB9IGZyb20gXCJ+L2Vudi5tanNcIjtcblxuLy8gUmUtZXhwb3J0IGVudW0gcmVwbGFjZW1lbnRzIGZvciBTUUxpdGUgY29tcGF0aWJpbGl0eVxuZXhwb3J0IHsgVXNlclJvbGUsIFN1YnNjcmlwdGlvblN0YXR1cywgVmV0dGluZ1N0YXR1cywgUHJvZ3JhbVN0YXR1cyB9IGZyb20gXCJ+L3R5cGVzL2RhdGFiYXNlXCI7XG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IGRiID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6XG4gICAgICBlbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IFtcInF1ZXJ5XCIsIFwiZXJyb3JcIiwgXCJ3YXJuXCJdIDogW1wiZXJyb3JcIl0sXG4gIH0pO1xuXG5pZiAoZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IGRiO1xuXG4vLyBBbHNvIGV4cG9ydCBhcyBwcmlzbWEgZm9yIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBkYjsiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZW52IiwiVXNlclJvbGUiLCJTdWJzY3JpcHRpb25TdGF0dXMiLCJWZXR0aW5nU3RhdHVzIiwiUHJvZ3JhbVN0YXR1cyIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJkYiIsInByaXNtYSIsImxvZyIsIk5PREVfRU5WIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/server/db.ts\n");

/***/ }),

/***/ "(api-node)/./src/services/subscription.service.ts":
/*!**********************************************!*\
  !*** ./src/services/subscription.service.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SubscriptionService: () => (/* binding */ SubscriptionService)\n/* harmony export */ });\n/* harmony import */ var _server_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ~/server/db */ \"(api-node)/./src/server/db.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _utils_stripe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/stripe */ \"(api-node)/./src/utils/stripe.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _utils_subscription__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ~/utils/subscription */ \"(api-node)/./src/utils/subscription.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_db__WEBPACK_IMPORTED_MODULE_0__, _trpc_server__WEBPACK_IMPORTED_MODULE_1__, _utils_stripe__WEBPACK_IMPORTED_MODULE_2__, _env_mjs__WEBPACK_IMPORTED_MODULE_4__]);\n([_server_db__WEBPACK_IMPORTED_MODULE_0__, _trpc_server__WEBPACK_IMPORTED_MODULE_1__, _utils_stripe__WEBPACK_IMPORTED_MODULE_2__, _env_mjs__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nclass SubscriptionService {\n    constructor(db){\n        this.db = db;\n    }\n    /**\n   * Get subscription status for a user\n   */ async getSubscriptionStatus(userId) {\n        const subscription = await this.db.subscription.findUnique({\n            where: {\n                userId\n            }\n        });\n        return {\n            hasSubscription: !!subscription,\n            status: subscription?.status ?? null,\n            expiresAt: subscription?.expiresAt ?? null,\n            currentPeriodEnd: subscription?.currentPeriodEnd ?? null,\n            cancelAtPeriodEnd: subscription?.cancelAtPeriodEnd ?? false\n        };\n    }\n    /**\n   * Get full subscription details for a user\n   */ async getSubscription(userId) {\n        return await this.db.subscription.findUnique({\n            where: {\n                userId\n            }\n        });\n    }\n    /**\n   * Create Stripe checkout session for subscription\n   */ async createCheckoutSession(userId, email, successUrl, cancelUrl) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Creating checkout session\", {\n            correlationId: 'checkout-' + Date.now(),\n            userId,\n            email,\n            stripeConfig: {\n                hasSecretKey: !!_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_SECRET_KEY,\n                hasPriceId: !!_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID,\n                priceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID\n            }\n        });\n        if (!_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_SECRET_KEY || !_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID) {\n            throw new Error(\"Stripe configuration is missing. Please set STRIPE_SECRET_KEY and STRIPE_ANNUAL_PRICE_ID in your .env file. \" + `Current config: STRIPE_SECRET_KEY=${_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_SECRET_KEY ? 'set' : 'missing'}, ` + `STRIPE_ANNUAL_PRICE_ID=${_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID || 'missing'}`);\n        }\n        // Check if user already has an active subscription\n        const existingSubscription = await this.getSubscription(userId);\n        if ((0,_utils_subscription__WEBPACK_IMPORTED_MODULE_5__.isSubscriptionActive)(existingSubscription)) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"You already have an active subscription\"\n            });\n        }\n        // Get or create Stripe customer\n        let stripeCustomerId = existingSubscription?.stripeCustomerId;\n        if (!stripeCustomerId) {\n            const customer = await (0,_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.createStripeCustomer)(email, userId);\n            stripeCustomerId = customer.id;\n            // Store customer ID if we have a subscription record\n            if (existingSubscription) {\n                await this.db.subscription.update({\n                    where: {\n                        id: existingSubscription.id\n                    },\n                    data: {\n                        stripeCustomerId\n                    }\n                });\n            }\n        }\n        // Create checkout session\n        const session = await (0,_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.createCheckoutSession)(stripeCustomerId, userId, _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID, successUrl, cancelUrl);\n        // Create or update subscription record with pending status\n        await this.db.subscription.upsert({\n            where: {\n                userId\n            },\n            create: {\n                userId,\n                stripeCustomerId,\n                status: _server_db__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING,\n                stripePriceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID\n            },\n            update: {\n                stripeCustomerId,\n                status: _server_db__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING,\n                stripePriceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID\n            }\n        });\n        return {\n            sessionId: session.id,\n            url: session.url\n        };\n    }\n    /**\n   * Cancel a subscription\n   */ async cancelSubscription(userId) {\n        const subscription = await this.getSubscription(userId);\n        if (!subscription || !subscription.stripeSubscriptionId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"No active subscription found\"\n            });\n        }\n        if (!_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"Stripe is not configured\"\n            });\n        }\n        // Cancel at period end in Stripe\n        const stripeSubscription = await _utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe.subscriptions.update(subscription.stripeSubscriptionId, {\n            cancel_at_period_end: true\n        });\n        // Update database\n        await this.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: {\n                cancelAtPeriodEnd: true,\n                canceledAt: new Date()\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Subscription canceled\", {\n            correlationId: 'cancel-' + Date.now(),\n            userId,\n            subscriptionId: subscription.id,\n            stripeSubscriptionId: subscription.stripeSubscriptionId\n        });\n        return {\n            success: true,\n            cancelAtPeriodEnd: stripeSubscription.cancel_at_period_end,\n            currentPeriodEnd: subscription.currentPeriodEnd\n        };\n    }\n    /**\n   * Resume a canceled subscription\n   */ async resumeSubscription(userId) {\n        const subscription = await this.getSubscription(userId);\n        if (!subscription || !subscription.stripeSubscriptionId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"No subscription found\"\n            });\n        }\n        if (!subscription.cancelAtPeriodEnd) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Subscription is not scheduled for cancellation\"\n            });\n        }\n        if (!_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"Stripe is not configured\"\n            });\n        }\n        // Resume subscription in Stripe\n        const stripeSubscription = await _utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe.subscriptions.update(subscription.stripeSubscriptionId, {\n            cancel_at_period_end: false\n        });\n        // Update database\n        await this.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: {\n                cancelAtPeriodEnd: false,\n                canceledAt: null\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Subscription resumed\", {\n            correlationId: 'resume-' + Date.now(),\n            userId,\n            subscriptionId: subscription.id,\n            stripeSubscriptionId: subscription.stripeSubscriptionId\n        });\n        return {\n            success: true,\n            cancelAtPeriodEnd: stripeSubscription.cancel_at_period_end\n        };\n    }\n    /**\n   * Handle successful subscription checkout\n   */ async handleCheckoutComplete(userId, stripeSubscriptionId, stripePriceId, currentPeriodStart, currentPeriodEnd) {\n        await this.db.subscription.upsert({\n            where: {\n                userId\n            },\n            create: {\n                userId,\n                stripeSubscriptionId,\n                stripePriceId,\n                status: _server_db__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE,\n                currentPeriodStart,\n                currentPeriodEnd,\n                expiresAt: currentPeriodEnd\n            },\n            update: {\n                stripeSubscriptionId,\n                stripePriceId,\n                status: _server_db__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE,\n                currentPeriodStart,\n                currentPeriodEnd,\n                expiresAt: currentPeriodEnd\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Checkout completed and subscription activated\", {\n            correlationId: 'checkout-complete-' + Date.now(),\n            userId,\n            stripeSubscriptionId\n        });\n    }\n    /**\n   * Update subscription status from Stripe webhook\n   */ async updateSubscriptionFromWebhook(stripeSubscriptionId, updates) {\n        const subscription = await this.db.subscription.findFirst({\n            where: {\n                stripeSubscriptionId\n            }\n        });\n        if (!subscription) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Subscription not found for webhook update\", {\n                correlationId: 'webhook-error-' + Date.now(),\n                stripeSubscriptionId\n            });\n            throw new Error(\"Subscription not found\");\n        }\n        await this.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: updates\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Subscription updated from webhook\", {\n            correlationId: 'webhook-update-' + Date.now(),\n            subscriptionId: subscription.id,\n            stripeSubscriptionId,\n            updates\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9zdWJzY3JpcHRpb24uc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQ2lEO0FBQ1I7QUFNakI7QUFDZ0I7QUFDUjtBQUM0QjtBQUVyRCxNQUFNUTtJQUNYLFlBQVksRUFBd0IsQ0FBRTthQUFsQkMsS0FBQUE7SUFBbUI7SUFFdkM7O0dBRUMsR0FDRCxNQUFNQyxzQkFBc0JDLE1BQWMsRUFBRTtRQUMxQyxNQUFNQyxlQUFlLE1BQU0sSUFBSSxDQUFDSCxFQUFFLENBQUNHLFlBQVksQ0FBQ0MsVUFBVSxDQUFDO1lBQ3pEQyxPQUFPO2dCQUFFSDtZQUFPO1FBQ2xCO1FBRUEsT0FBTztZQUNMSSxpQkFBaUIsQ0FBQyxDQUFDSDtZQUNuQkksUUFBUUosY0FBY0ksVUFBVTtZQUNoQ0MsV0FBV0wsY0FBY0ssYUFBYTtZQUN0Q0Msa0JBQWtCTixjQUFjTSxvQkFBb0I7WUFDcERDLG1CQUFtQlAsY0FBY08scUJBQXFCO1FBQ3hEO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE1BQU1DLGdCQUFnQlQsTUFBYyxFQUFFO1FBQ3BDLE9BQU8sTUFBTSxJQUFJLENBQUNGLEVBQUUsQ0FBQ0csWUFBWSxDQUFDQyxVQUFVLENBQUM7WUFDM0NDLE9BQU87Z0JBQUVIO1lBQU87UUFDbEI7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTVIsc0JBQ0pRLE1BQWMsRUFDZFUsS0FBYSxFQUNiQyxVQUFrQixFQUNsQkMsU0FBaUIsRUFDakI7UUFDQWxCLGlEQUFNQSxDQUFDbUIsSUFBSSxDQUFDLDZCQUE2QjtZQUN2Q0MsZUFBZSxjQUFjQyxLQUFLQyxHQUFHO1lBQ3JDaEI7WUFDQVU7WUFDQU8sY0FBYztnQkFDWkMsY0FBYyxDQUFDLENBQUN2Qix5Q0FBR0EsQ0FBQ3dCLGlCQUFpQjtnQkFDckNDLFlBQVksQ0FBQyxDQUFDekIseUNBQUdBLENBQUMwQixzQkFBc0I7Z0JBQ3hDQyxTQUFTM0IseUNBQUdBLENBQUMwQixzQkFBc0I7WUFD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RjtZQUNBLE1BQU0sSUFBSWpCLE1BQU07UUFDbEI7UUFFQSxNQUFNLElBQUksQ0FBQ3pCLEVBQUUsQ0FBQ0csWUFBWSxDQUFDNkIsTUFBTSxDQUFDO1lBQ2hDM0IsT0FBTztnQkFBRTBCLElBQUk1QixhQUFhNEIsRUFBRTtZQUFDO1lBQzdCRSxNQUFNcUI7UUFDUjtRQUVBMUQsaURBQU1BLENBQUNtQixJQUFJLENBQUMscUNBQXFDO1lBQy9DQyxlQUFlLG9CQUFvQkMsS0FBS0MsR0FBRztZQUMzQzZCLGdCQUFnQjVDLGFBQWE0QixFQUFFO1lBQy9CVztZQUNBWTtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2aWNlcy9zdWJzY3JpcHRpb24uc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIFByaXNtYSwgdHlwZSBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvblN0YXR1cyB9IGZyb20gXCJ+L3NlcnZlci9kYlwiO1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSBcIkB0cnBjL3NlcnZlclwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlU3RyaXBlQ3VzdG9tZXIsXG4gIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbixcbiAgQU5OVUFMX1NVQlNDUklQVElPTl9DT05GSUcsXG4gIHN0cmlwZSxcbn0gZnJvbSBcIn4vdXRpbHMvc3RyaXBlXCI7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwifi91dGlscy9sb2dnZXJcIjtcbmltcG9ydCB7IGVudiB9IGZyb20gXCJ+L2Vudi5tanNcIjtcbmltcG9ydCB7IGlzU3Vic2NyaXB0aW9uQWN0aXZlIH0gZnJvbSBcIn4vdXRpbHMvc3Vic2NyaXB0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBTdWJzY3JpcHRpb25TZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYjogUHJpc21hQ2xpZW50KSB7fVxuXG4gIC8qKlxuICAgKiBHZXQgc3Vic2NyaXB0aW9uIHN0YXR1cyBmb3IgYSB1c2VyXG4gICAqL1xuICBhc3luYyBnZXRTdWJzY3JpcHRpb25TdGF0dXModXNlcklkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCB0aGlzLmRiLnN1YnNjcmlwdGlvbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc1N1YnNjcmlwdGlvbjogISFzdWJzY3JpcHRpb24sXG4gICAgICBzdGF0dXM6IHN1YnNjcmlwdGlvbj8uc3RhdHVzID8/IG51bGwsXG4gICAgICBleHBpcmVzQXQ6IHN1YnNjcmlwdGlvbj8uZXhwaXJlc0F0ID8/IG51bGwsXG4gICAgICBjdXJyZW50UGVyaW9kRW5kOiBzdWJzY3JpcHRpb24/LmN1cnJlbnRQZXJpb2RFbmQgPz8gbnVsbCxcbiAgICAgIGNhbmNlbEF0UGVyaW9kRW5kOiBzdWJzY3JpcHRpb24/LmNhbmNlbEF0UGVyaW9kRW5kID8/IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZ1bGwgc3Vic2NyaXB0aW9uIGRldGFpbHMgZm9yIGEgdXNlclxuICAgKi9cbiAgYXN5bmMgZ2V0U3Vic2NyaXB0aW9uKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZGIuc3Vic2NyaXB0aW9uLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIFN0cmlwZSBjaGVja291dCBzZXNzaW9uIGZvciBzdWJzY3JpcHRpb25cbiAgICovXG4gIGFzeW5jIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbihcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBlbWFpbDogc3RyaW5nLFxuICAgIHN1Y2Nlc3NVcmw6IHN0cmluZyxcbiAgICBjYW5jZWxVcmw6IHN0cmluZ1xuICApIHtcbiAgICBsb2dnZXIuaW5mbyhcIkNyZWF0aW5nIGNoZWNrb3V0IHNlc3Npb25cIiwge1xuICAgICAgY29ycmVsYXRpb25JZDogJ2NoZWNrb3V0LScgKyBEYXRlLm5vdygpLFxuICAgICAgdXNlcklkLFxuICAgICAgZW1haWwsXG4gICAgICBzdHJpcGVDb25maWc6IHtcbiAgICAgICAgaGFzU2VjcmV0S2V5OiAhIWVudi5TVFJJUEVfU0VDUkVUX0tFWSxcbiAgICAgICAgaGFzUHJpY2VJZDogISFlbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCxcbiAgICAgICAgcHJpY2VJZDogZW52LlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFlbnYuU1RSSVBFX1NFQ1JFVF9LRVkgfHwgIWVudi5TVFJJUEVfQU5OVUFMX1BSSUNFX0lEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiU3RyaXBlIGNvbmZpZ3VyYXRpb24gaXMgbWlzc2luZy4gUGxlYXNlIHNldCBTVFJJUEVfU0VDUkVUX0tFWSBhbmQgU1RSSVBFX0FOTlVBTF9QUklDRV9JRCBpbiB5b3VyIC5lbnYgZmlsZS4gXCIgK1xuICAgICAgICBgQ3VycmVudCBjb25maWc6IFNUUklQRV9TRUNSRVRfS0VZPSR7ZW52LlNUUklQRV9TRUNSRVRfS0VZID8gJ3NldCcgOiAnbWlzc2luZyd9LCBgICtcbiAgICAgICAgYFNUUklQRV9BTk5VQUxfUFJJQ0VfSUQ9JHtlbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCB8fCAnbWlzc2luZyd9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgaGFzIGFuIGFjdGl2ZSBzdWJzY3JpcHRpb25cbiAgICBjb25zdCBleGlzdGluZ1N1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMuZ2V0U3Vic2NyaXB0aW9uKHVzZXJJZCk7XG4gICAgaWYgKGlzU3Vic2NyaXB0aW9uQWN0aXZlKGV4aXN0aW5nU3Vic2NyaXB0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJZb3UgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSBzdWJzY3JpcHRpb25cIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBvciBjcmVhdGUgU3RyaXBlIGN1c3RvbWVyXG4gICAgbGV0IHN0cmlwZUN1c3RvbWVySWQgPSBleGlzdGluZ1N1YnNjcmlwdGlvbj8uc3RyaXBlQ3VzdG9tZXJJZDtcbiAgICBpZiAoIXN0cmlwZUN1c3RvbWVySWQpIHtcbiAgICAgIGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgY3JlYXRlU3RyaXBlQ3VzdG9tZXIoZW1haWwsIHVzZXJJZCk7XG4gICAgICBzdHJpcGVDdXN0b21lcklkID0gY3VzdG9tZXIuaWQ7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGN1c3RvbWVyIElEIGlmIHdlIGhhdmUgYSBzdWJzY3JpcHRpb24gcmVjb3JkXG4gICAgICBpZiAoZXhpc3RpbmdTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdTdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0cmlwZUN1c3RvbWVySWQgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGNoZWNrb3V0IHNlc3Npb25cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKFxuICAgICAgc3RyaXBlQ3VzdG9tZXJJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGVudi5TVFJJUEVfQU5OVUFMX1BSSUNFX0lELFxuICAgICAgc3VjY2Vzc1VybCxcbiAgICAgIGNhbmNlbFVybFxuICAgICk7XG5cbiAgICAvLyBDcmVhdGUgb3IgdXBkYXRlIHN1YnNjcmlwdGlvbiByZWNvcmQgd2l0aCBwZW5kaW5nIHN0YXR1c1xuICAgIGF3YWl0IHRoaXMuZGIuc3Vic2NyaXB0aW9uLnVwc2VydCh7XG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgIGNyZWF0ZToge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHN0cmlwZUN1c3RvbWVySWQsXG4gICAgICAgIHN0YXR1czogU3Vic2NyaXB0aW9uU3RhdHVzLlBFTkRJTkcsXG4gICAgICAgIHN0cmlwZVByaWNlSWQ6IGVudi5TVFJJUEVfQU5OVUFMX1BSSUNFX0lELFxuICAgICAgfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICBzdHJpcGVDdXN0b21lcklkLFxuICAgICAgICBzdGF0dXM6IFN1YnNjcmlwdGlvblN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBzdHJpcGVQcmljZUlkOiBlbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uLmlkLFxuICAgICAgdXJsOiBzZXNzaW9uLnVybCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhIHN1YnNjcmlwdGlvblxuICAgKi9cbiAgYXN5bmMgY2FuY2VsU3Vic2NyaXB0aW9uKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgdGhpcy5nZXRTdWJzY3JpcHRpb24odXNlcklkKTtcbiAgICBcbiAgICBpZiAoIXN1YnNjcmlwdGlvbiB8fCAhc3Vic2NyaXB0aW9uLnN0cmlwZVN1YnNjcmlwdGlvbklkKSB7XG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgbWVzc2FnZTogXCJObyBhY3RpdmUgc3Vic2NyaXB0aW9uIGZvdW5kXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXN0cmlwZSkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDYW5jZWwgYXQgcGVyaW9kIGVuZCBpbiBTdHJpcGVcbiAgICBjb25zdCBzdHJpcGVTdWJzY3JpcHRpb24gPSBhd2FpdCBzdHJpcGUuc3Vic2NyaXB0aW9ucy51cGRhdGUoXG4gICAgICBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQsXG4gICAgICB7IGNhbmNlbF9hdF9wZXJpb2RfZW5kOiB0cnVlIH1cbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIGRhdGFiYXNlXG4gICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBzdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IHRydWUsXG4gICAgICAgIGNhbmNlbGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgbG9nZ2VyLmluZm8oXCJTdWJzY3JpcHRpb24gY2FuY2VsZWRcIiwge1xuICAgICAgY29ycmVsYXRpb25JZDogJ2NhbmNlbC0nICsgRGF0ZS5ub3coKSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLnN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjYW5jZWxBdFBlcmlvZEVuZDogc3RyaXBlU3Vic2NyaXB0aW9uLmNhbmNlbF9hdF9wZXJpb2RfZW5kLFxuICAgICAgY3VycmVudFBlcmlvZEVuZDogc3Vic2NyaXB0aW9uLmN1cnJlbnRQZXJpb2RFbmQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1bWUgYSBjYW5jZWxlZCBzdWJzY3JpcHRpb25cbiAgICovXG4gIGFzeW5jIHJlc3VtZVN1YnNjcmlwdGlvbih1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMuZ2V0U3Vic2NyaXB0aW9uKHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5zdHJpcGVTdWJzY3JpcHRpb25JZCkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gc3Vic2NyaXB0aW9uIGZvdW5kXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJTdWJzY3JpcHRpb24gaXMgbm90IHNjaGVkdWxlZCBmb3IgY2FuY2VsbGF0aW9uXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXN0cmlwZSkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXN1bWUgc3Vic2NyaXB0aW9uIGluIFN0cmlwZVxuICAgIGNvbnN0IHN0cmlwZVN1YnNjcmlwdGlvbiA9IGF3YWl0IHN0cmlwZS5zdWJzY3JpcHRpb25zLnVwZGF0ZShcbiAgICAgIHN1YnNjcmlwdGlvbi5zdHJpcGVTdWJzY3JpcHRpb25JZCxcbiAgICAgIHsgY2FuY2VsX2F0X3BlcmlvZF9lbmQ6IGZhbHNlIH1cbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIGRhdGFiYXNlXG4gICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBzdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IGZhbHNlLFxuICAgICAgICBjYW5jZWxlZEF0OiBudWxsLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5pbmZvKFwiU3Vic2NyaXB0aW9uIHJlc3VtZWRcIiwge1xuICAgICAgY29ycmVsYXRpb25JZDogJ3Jlc3VtZS0nICsgRGF0ZS5ub3coKSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLnN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjYW5jZWxBdFBlcmlvZEVuZDogc3RyaXBlU3Vic2NyaXB0aW9uLmNhbmNlbF9hdF9wZXJpb2RfZW5kLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHN1Y2Nlc3NmdWwgc3Vic2NyaXB0aW9uIGNoZWNrb3V0XG4gICAqL1xuICBhc3luYyBoYW5kbGVDaGVja291dENvbXBsZXRlKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdHJpbmcsXG4gICAgc3RyaXBlUHJpY2VJZDogc3RyaW5nLFxuICAgIGN1cnJlbnRQZXJpb2RTdGFydDogRGF0ZSxcbiAgICBjdXJyZW50UGVyaW9kRW5kOiBEYXRlXG4gICkge1xuICAgIGF3YWl0IHRoaXMuZGIuc3Vic2NyaXB0aW9uLnVwc2VydCh7XG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgIGNyZWF0ZToge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgICAgICBzdHJpcGVQcmljZUlkLFxuICAgICAgICBzdGF0dXM6IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUsXG4gICAgICAgIGN1cnJlbnRQZXJpb2RTdGFydCxcbiAgICAgICAgY3VycmVudFBlcmlvZEVuZCxcbiAgICAgICAgZXhwaXJlc0F0OiBjdXJyZW50UGVyaW9kRW5kLFxuICAgICAgfSxcbiAgICAgIHVwZGF0ZToge1xuICAgICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZCxcbiAgICAgICAgc3RyaXBlUHJpY2VJZCxcbiAgICAgICAgc3RhdHVzOiBTdWJzY3JpcHRpb25TdGF0dXMuQUNUSVZFLFxuICAgICAgICBjdXJyZW50UGVyaW9kU3RhcnQsXG4gICAgICAgIGN1cnJlbnRQZXJpb2RFbmQsXG4gICAgICAgIGV4cGlyZXNBdDogY3VycmVudFBlcmlvZEVuZCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyhcIkNoZWNrb3V0IGNvbXBsZXRlZCBhbmQgc3Vic2NyaXB0aW9uIGFjdGl2YXRlZFwiLCB7XG4gICAgICBjb3JyZWxhdGlvbklkOiAnY2hlY2tvdXQtY29tcGxldGUtJyArIERhdGUubm93KCksXG4gICAgICB1c2VySWQsXG4gICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgc3Vic2NyaXB0aW9uIHN0YXR1cyBmcm9tIFN0cmlwZSB3ZWJob29rXG4gICAqL1xuICBhc3luYyB1cGRhdGVTdWJzY3JpcHRpb25Gcm9tV2ViaG9vayhcbiAgICBzdHJpcGVTdWJzY3JpcHRpb25JZDogc3RyaW5nLFxuICAgIHVwZGF0ZXM6IFBhcnRpYWw8UHJpc21hLlN1YnNjcmlwdGlvblVwZGF0ZUlucHV0PlxuICApIHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCB0aGlzLmRiLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgc3RyaXBlU3Vic2NyaXB0aW9uSWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghc3Vic2NyaXB0aW9uKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXCJTdWJzY3JpcHRpb24gbm90IGZvdW5kIGZvciB3ZWJob29rIHVwZGF0ZVwiLCB7XG4gICAgICAgIGNvcnJlbGF0aW9uSWQ6ICd3ZWJob29rLWVycm9yLScgKyBEYXRlLm5vdygpLFxuICAgICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZCxcbiAgICAgIH0pO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3Vic2NyaXB0aW9uIG5vdCBmb3VuZFwiKTtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLmRiLnN1YnNjcmlwdGlvbi51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHN1YnNjcmlwdGlvbi5pZCB9LFxuICAgICAgZGF0YTogdXBkYXRlcyxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5pbmZvKFwiU3Vic2NyaXB0aW9uIHVwZGF0ZWQgZnJvbSB3ZWJob29rXCIsIHtcbiAgICAgIGNvcnJlbGF0aW9uSWQ6ICd3ZWJob29rLXVwZGF0ZS0nICsgRGF0ZS5ub3coKSxcbiAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZCxcbiAgICAgIHVwZGF0ZXMsXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiU3Vic2NyaXB0aW9uU3RhdHVzIiwiVFJQQ0Vycm9yIiwiY3JlYXRlU3RyaXBlQ3VzdG9tZXIiLCJjcmVhdGVDaGVja291dFNlc3Npb24iLCJzdHJpcGUiLCJsb2dnZXIiLCJlbnYiLCJpc1N1YnNjcmlwdGlvbkFjdGl2ZSIsIlN1YnNjcmlwdGlvblNlcnZpY2UiLCJkYiIsImdldFN1YnNjcmlwdGlvblN0YXR1cyIsInVzZXJJZCIsInN1YnNjcmlwdGlvbiIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImhhc1N1YnNjcmlwdGlvbiIsInN0YXR1cyIsImV4cGlyZXNBdCIsImN1cnJlbnRQZXJpb2RFbmQiLCJjYW5jZWxBdFBlcmlvZEVuZCIsImdldFN1YnNjcmlwdGlvbiIsImVtYWlsIiwic3VjY2Vzc1VybCIsImNhbmNlbFVybCIsImluZm8iLCJjb3JyZWxhdGlvbklkIiwiRGF0ZSIsIm5vdyIsInN0cmlwZUNvbmZpZyIsImhhc1NlY3JldEtleSIsIlNUUklQRV9TRUNSRVRfS0VZIiwiaGFzUHJpY2VJZCIsIlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQiLCJwcmljZUlkIiwiRXJyb3IiLCJleGlzdGluZ1N1YnNjcmlwdGlvbiIsImNvZGUiLCJtZXNzYWdlIiwic3RyaXBlQ3VzdG9tZXJJZCIsImN1c3RvbWVyIiwiaWQiLCJ1cGRhdGUiLCJkYXRhIiwic2Vzc2lvbiIsInVwc2VydCIsImNyZWF0ZSIsIlBFTkRJTkciLCJzdHJpcGVQcmljZUlkIiwic2Vzc2lvbklkIiwidXJsIiwiY2FuY2VsU3Vic2NyaXB0aW9uIiwic3RyaXBlU3Vic2NyaXB0aW9uSWQiLCJzdHJpcGVTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25zIiwiY2FuY2VsX2F0X3BlcmlvZF9lbmQiLCJjYW5jZWxlZEF0Iiwic3Vic2NyaXB0aW9uSWQiLCJzdWNjZXNzIiwicmVzdW1lU3Vic2NyaXB0aW9uIiwiaGFuZGxlQ2hlY2tvdXRDb21wbGV0ZSIsImN1cnJlbnRQZXJpb2RTdGFydCIsIkFDVElWRSIsInVwZGF0ZVN1YnNjcmlwdGlvbkZyb21XZWJob29rIiwidXBkYXRlcyIsImZpbmRGaXJzdCIsImVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/services/subscription.service.ts\n");

/***/ }),

/***/ "(api-node)/./src/types/database.ts":
/*!*******************************!*\
  !*** ./src/types/database.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PrismaProgramStatus: () => (/* binding */ ProgramStatus),\n/* harmony export */   PrismaSubscriptionStatus: () => (/* binding */ SubscriptionStatus),\n/* harmony export */   PrismaUserRole: () => (/* binding */ UserRole),\n/* harmony export */   PrismaVettingStatus: () => (/* binding */ VettingStatus),\n/* harmony export */   ProgramStatus: () => (/* binding */ ProgramStatus),\n/* harmony export */   SubscriptionStatus: () => (/* binding */ SubscriptionStatus),\n/* harmony export */   UserRole: () => (/* binding */ UserRole),\n/* harmony export */   VettingStatus: () => (/* binding */ VettingStatus)\n/* harmony export */ });\n/**\n * Database type definitions\n * These types are used when the database provider doesn't support enums (SQLite)\n */ // User roles\nconst UserRole = {\n    USER: 'USER',\n    ADMIN: 'ADMIN',\n    PROVIDER: 'PROVIDER'\n};\n// Subscription statuses\nconst SubscriptionStatus = {\n    PENDING: 'PENDING',\n    ACTIVE: 'ACTIVE',\n    TRIALING: 'TRIALING',\n    PAST_DUE: 'PAST_DUE',\n    CANCELED: 'CANCELED',\n    EXPIRED: 'EXPIRED'\n};\n// Vetting statuses\nconst VettingStatus = {\n    PENDING: 'PENDING',\n    IN_REVIEW: 'IN_REVIEW',\n    APPROVED: 'APPROVED',\n    REJECTED: 'REJECTED',\n    SUSPENDED: 'SUSPENDED'\n};\n// Program statuses\nconst ProgramStatus = {\n    DRAFT: 'DRAFT',\n    PUBLISHED: 'PUBLISHED',\n    FULLY_BOOKED: 'FULLY_BOOKED',\n    CANCELLED: 'CANCELLED',\n    COMPLETED: 'COMPLETED'\n};\n// Re-export for compatibility with @prisma/client when using SQLite\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy90eXBlcy9kYXRhYmFzZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUVELGFBQWE7QUFDTixNQUFNQSxXQUFXO0lBQ3RCQyxNQUFNO0lBQ05DLE9BQU87SUFDUEMsVUFBVTtBQUNaLEVBQVc7QUFJWCx3QkFBd0I7QUFDakIsTUFBTUMscUJBQXFCO0lBQ2hDQyxTQUFTO0lBQ1RDLFFBQVE7SUFDUkMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLFVBQVU7SUFDVkMsU0FBUztBQUNYLEVBQVc7QUFJWCxtQkFBbUI7QUFDWixNQUFNQyxnQkFBZ0I7SUFDM0JOLFNBQVM7SUFDVE8sV0FBVztJQUNYQyxVQUFVO0lBQ1ZDLFVBQVU7SUFDVkMsV0FBVztBQUNiLEVBQVc7QUFJWCxtQkFBbUI7QUFDWixNQUFNQyxnQkFBZ0I7SUFDM0JDLE9BQU87SUFDUEMsV0FBVztJQUNYQyxjQUFjO0lBQ2RDLFdBQVc7SUFDWEMsV0FBVztBQUNiLEVBQVc7QUFJWCxvRUFBb0U7QUFNbEUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdHlwZXMvZGF0YWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEYXRhYmFzZSB0eXBlIGRlZmluaXRpb25zXG4gKiBUaGVzZSB0eXBlcyBhcmUgdXNlZCB3aGVuIHRoZSBkYXRhYmFzZSBwcm92aWRlciBkb2Vzbid0IHN1cHBvcnQgZW51bXMgKFNRTGl0ZSlcbiAqL1xuXG4vLyBVc2VyIHJvbGVzXG5leHBvcnQgY29uc3QgVXNlclJvbGUgPSB7XG4gIFVTRVI6ICdVU0VSJyxcbiAgQURNSU46ICdBRE1JTicsXG4gIFBST1ZJREVSOiAnUFJPVklERVInLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgVXNlclJvbGUgPSB0eXBlb2YgVXNlclJvbGVba2V5b2YgdHlwZW9mIFVzZXJSb2xlXTtcblxuLy8gU3Vic2NyaXB0aW9uIHN0YXR1c2VzXG5leHBvcnQgY29uc3QgU3Vic2NyaXB0aW9uU3RhdHVzID0ge1xuICBQRU5ESU5HOiAnUEVORElORycsXG4gIEFDVElWRTogJ0FDVElWRScsXG4gIFRSSUFMSU5HOiAnVFJJQUxJTkcnLFxuICBQQVNUX0RVRTogJ1BBU1RfRFVFJyxcbiAgQ0FOQ0VMRUQ6ICdDQU5DRUxFRCcsXG4gIEVYUElSRUQ6ICdFWFBJUkVEJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIFN1YnNjcmlwdGlvblN0YXR1cyA9IHR5cGVvZiBTdWJzY3JpcHRpb25TdGF0dXNba2V5b2YgdHlwZW9mIFN1YnNjcmlwdGlvblN0YXR1c107XG5cbi8vIFZldHRpbmcgc3RhdHVzZXNcbmV4cG9ydCBjb25zdCBWZXR0aW5nU3RhdHVzID0ge1xuICBQRU5ESU5HOiAnUEVORElORycsXG4gIElOX1JFVklFVzogJ0lOX1JFVklFVycsXG4gIEFQUFJPVkVEOiAnQVBQUk9WRUQnLFxuICBSRUpFQ1RFRDogJ1JFSkVDVEVEJyxcbiAgU1VTUEVOREVEOiAnU1VTUEVOREVEJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIFZldHRpbmdTdGF0dXMgPSB0eXBlb2YgVmV0dGluZ1N0YXR1c1trZXlvZiB0eXBlb2YgVmV0dGluZ1N0YXR1c107XG5cbi8vIFByb2dyYW0gc3RhdHVzZXNcbmV4cG9ydCBjb25zdCBQcm9ncmFtU3RhdHVzID0ge1xuICBEUkFGVDogJ0RSQUZUJyxcbiAgUFVCTElTSEVEOiAnUFVCTElTSEVEJyxcbiAgRlVMTFlfQk9PS0VEOiAnRlVMTFlfQk9PS0VEJyxcbiAgQ0FOQ0VMTEVEOiAnQ0FOQ0VMTEVEJyxcbiAgQ09NUExFVEVEOiAnQ09NUExFVEVEJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIFByb2dyYW1TdGF0dXMgPSB0eXBlb2YgUHJvZ3JhbVN0YXR1c1trZXlvZiB0eXBlb2YgUHJvZ3JhbVN0YXR1c107XG5cbi8vIFJlLWV4cG9ydCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEBwcmlzbWEvY2xpZW50IHdoZW4gdXNpbmcgU1FMaXRlXG5leHBvcnQgeyBcbiAgVXNlclJvbGUgYXMgUHJpc21hVXNlclJvbGUsXG4gIFN1YnNjcmlwdGlvblN0YXR1cyBhcyBQcmlzbWFTdWJzY3JpcHRpb25TdGF0dXMsXG4gIFZldHRpbmdTdGF0dXMgYXMgUHJpc21hVmV0dGluZ1N0YXR1cyxcbiAgUHJvZ3JhbVN0YXR1cyBhcyBQcmlzbWFQcm9ncmFtU3RhdHVzLFxufTsiXSwibmFtZXMiOlsiVXNlclJvbGUiLCJVU0VSIiwiQURNSU4iLCJQUk9WSURFUiIsIlN1YnNjcmlwdGlvblN0YXR1cyIsIlBFTkRJTkciLCJBQ1RJVkUiLCJUUklBTElORyIsIlBBU1RfRFVFIiwiQ0FOQ0VMRUQiLCJFWFBJUkVEIiwiVmV0dGluZ1N0YXR1cyIsIklOX1JFVklFVyIsIkFQUFJPVkVEIiwiUkVKRUNURUQiLCJTVVNQRU5ERUQiLCJQcm9ncmFtU3RhdHVzIiwiRFJBRlQiLCJQVUJMSVNIRUQiLCJGVUxMWV9CT09LRUQiLCJDQU5DRUxMRUQiLCJDT01QTEVURUQiLCJQcmlzbWFVc2VyUm9sZSIsIlByaXNtYVN1YnNjcmlwdGlvblN0YXR1cyIsIlByaXNtYVZldHRpbmdTdGF0dXMiLCJQcmlzbWFQcm9ncmFtU3RhdHVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/types/database.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/encryption.ts":
/*!*********************************!*\
  !*** ./src/utils/encryption.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptPII: () => (/* binding */ decryptPII),\n/* harmony export */   encryptPII: () => (/* binding */ encryptPII),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword)\n/* harmony export */ });\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto-js */ \"crypto-js\");\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_env_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n_env_mjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Use environment variable or fallback for development\nconst ENCRYPTION_KEY = _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.ENCRYPTION_KEY || \"dev-32-character-encryption-key!!\";\nfunction encryptPII(text) {\n    if (!text) return null;\n    try {\n        return crypto_js__WEBPACK_IMPORTED_MODULE_0___default().AES.encrypt(text, ENCRYPTION_KEY).toString();\n    } catch (error) {\n        console.error(\"Encryption error:\", error);\n        throw new Error(\"Failed to encrypt PII\");\n    }\n}\nfunction decryptPII(encryptedText) {\n    if (!encryptedText) return null;\n    try {\n        const decrypted = crypto_js__WEBPACK_IMPORTED_MODULE_0___default().AES.decrypt(encryptedText, ENCRYPTION_KEY);\n        return decrypted.toString((crypto_js__WEBPACK_IMPORTED_MODULE_0___default().enc).Utf8);\n    } catch (error) {\n        console.error(\"Decryption error:\", error);\n        throw new Error(\"Failed to decrypt PII\");\n    }\n}\n// Hash password using bcrypt\nasync function hashPassword(password) {\n    const bcrypt = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! bcryptjs */ \"bcryptjs\"));\n    return bcrypt.hash(password, 12);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9lbmNyeXB0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNEO0FBRWhDLHVEQUF1RDtBQUN2RCxNQUFNRSxpQkFBaUJELHlDQUFHQSxDQUFDQyxjQUFjLElBQUk7QUFFdEMsU0FBU0MsV0FBV0MsSUFBK0I7SUFDeEQsSUFBSSxDQUFDQSxNQUFNLE9BQU87SUFFbEIsSUFBSTtRQUNGLE9BQU9KLG9EQUFZLENBQUNNLE9BQU8sQ0FBQ0YsTUFBTUYsZ0JBQWdCSyxRQUFRO0lBQzVELEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxNQUFNLElBQUlFLE1BQU07SUFDbEI7QUFDRjtBQUVPLFNBQVNDLFdBQVdDLGFBQXdDO0lBQ2pFLElBQUksQ0FBQ0EsZUFBZSxPQUFPO0lBRTNCLElBQUk7UUFDRixNQUFNQyxZQUFZYixvREFBWSxDQUFDYyxPQUFPLENBQUNGLGVBQWVWO1FBQ3RELE9BQU9XLFVBQVVOLFFBQVEsQ0FBQ1Asc0RBQVksQ0FBQ2dCLElBQUk7SUFDN0MsRUFBRSxPQUFPUixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxxQkFBcUJBO1FBQ25DLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtBQUNGO0FBRUEsNkJBQTZCO0FBQ3RCLGVBQWVPLGFBQWFDLFFBQWdCO0lBQ2pELE1BQU1DLFNBQVMsTUFBTSxnSEFBa0I7SUFDdkMsT0FBT0EsT0FBT0MsSUFBSSxDQUFDRixVQUFVO0FBQy9CIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3V0aWxzL2VuY3J5cHRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENyeXB0b0pTIGZyb20gXCJjcnlwdG8tanNcIjtcbmltcG9ydCB7IGVudiB9IGZyb20gXCJ+L2Vudi5tanNcIjtcblxuLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlIG9yIGZhbGxiYWNrIGZvciBkZXZlbG9wbWVudFxuY29uc3QgRU5DUllQVElPTl9LRVkgPSBlbnYuRU5DUllQVElPTl9LRVkgfHwgXCJkZXYtMzItY2hhcmFjdGVyLWVuY3J5cHRpb24ta2V5ISFcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRQSUkodGV4dDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIXRleHQpIHJldHVybiBudWxsO1xuICBcbiAgdHJ5IHtcbiAgICByZXR1cm4gQ3J5cHRvSlMuQUVTLmVuY3J5cHQodGV4dCwgRU5DUllQVElPTl9LRVkpLnRvU3RyaW5nKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVuY3J5cHRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZW5jcnlwdCBQSUlcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY3J5cHRQSUkoZW5jcnlwdGVkVGV4dDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIWVuY3J5cHRlZFRleHQpIHJldHVybiBudWxsO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdChlbmNyeXB0ZWRUZXh0LCBFTkNSWVBUSU9OX0tFWSk7XG4gICAgcmV0dXJuIGRlY3J5cHRlZC50b1N0cmluZyhDcnlwdG9KUy5lbmMuVXRmOCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRlY3J5cHRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZGVjcnlwdCBQSUlcIik7XG4gIH1cbn1cblxuLy8gSGFzaCBwYXNzd29yZCB1c2luZyBiY3J5cHRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGJjcnlwdCA9IGF3YWl0IGltcG9ydChcImJjcnlwdGpzXCIpO1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcbn0iXSwibmFtZXMiOlsiQ3J5cHRvSlMiLCJlbnYiLCJFTkNSWVBUSU9OX0tFWSIsImVuY3J5cHRQSUkiLCJ0ZXh0IiwiQUVTIiwiZW5jcnlwdCIsInRvU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJkZWNyeXB0UElJIiwiZW5jcnlwdGVkVGV4dCIsImRlY3J5cHRlZCIsImRlY3J5cHQiLCJlbmMiLCJVdGY4IiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/encryption.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StructuredLogger: () => (/* binding */ StructuredLogger),\n/* harmony export */   generateCorrelationId: () => (/* binding */ generateCorrelationId),\n/* harmony export */   getCorrelationId: () => (/* binding */ getCorrelationId),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n// PII patterns to scrub from logs\nconst PII_PATTERNS = [\n    // Email addresses\n    {\n        pattern: /([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})/g,\n        replacement: '[REDACTED_EMAIL]'\n    },\n    // Phone numbers (Australian format)\n    {\n        pattern: /(\\+?61|0)[2-9]\\d{8}/g,\n        replacement: '[REDACTED_PHONE]'\n    },\n    // Credit card numbers\n    {\n        pattern: /\\b\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}\\b/g,\n        replacement: '[REDACTED_CC]'\n    },\n    // Australian Tax File Numbers\n    {\n        pattern: /\\b\\d{3}[\\s-]?\\d{3}[\\s-]?\\d{3}\\b/g,\n        replacement: '[REDACTED_TFN]'\n    },\n    // Names in common fields (updated to handle JSON structure)\n    {\n        pattern: /\"((?:[\\w.]+\\.)?(?:name|firstName|lastName|fullName))\"\\s*:\\s*\"[^\"]+\"/gi,\n        replacement: (match, field)=>`\"${field}\":\"[REDACTED_NAME]\"`\n    },\n    // Addresses\n    {\n        pattern: /\\d+\\s+[\\w\\s]+\\s+(Street|St|Avenue|Ave|Road|Rd|Drive|Dr|Court|Ct|Lane|Ln)/gi,\n        replacement: '[REDACTED_ADDRESS]'\n    },\n    // API keys and tokens (updated to handle JSON structure)\n    {\n        pattern: /\"(api[_-]?key|apiKey|token|secret|password)\"\\s*:\\s*\"[^\"]+\"/gi,\n        replacement: (match, field)=>`\"${field}\":\"[REDACTED]\"`\n    }\n];\nclass StructuredLogger {\n    constructor(environment = \"development\" || 0, service = 'holiday-aggregator'){\n        this.environment = environment;\n        this.service = service;\n    }\n    /**\n   * Scrubs PII from any data object\n   */ scrubPII(data) {\n        if (!data) return data;\n        const jsonString = JSON.stringify(data);\n        let scrubbed = jsonString;\n        for (const { pattern, replacement } of PII_PATTERNS){\n            if (typeof replacement === 'string') {\n                scrubbed = scrubbed.replace(pattern, replacement);\n            } else {\n                scrubbed = scrubbed.replace(pattern, replacement);\n            }\n        }\n        try {\n            return JSON.parse(scrubbed);\n        } catch  {\n            // If we can't parse it back, return the original data\n            // but log a warning\n            console.warn('Failed to parse scrubbed data, returning original');\n            return data;\n        }\n    }\n    /**\n   * Creates a log entry with proper structure\n   */ createLogEntry(level, message, context, data, error) {\n        const entry = {\n            timestamp: new Date().toISOString(),\n            level,\n            message,\n            context: {\n                ...context,\n                environment: this.environment,\n                service: this.service\n            }\n        };\n        if (data) {\n            entry.data = this.scrubPII(data);\n        }\n        if (error) {\n            entry.error = {\n                name: error.name,\n                message: error.message,\n                stack: this.environment === 'development' || this.environment === 'test' ? error.stack : undefined\n            };\n        }\n        return entry;\n    }\n    /**\n   * Outputs the log entry\n   */ output(entry) {\n        const json = JSON.stringify(entry);\n        // In production, we'd send this to a log aggregation service\n        // For now, we'll use console methods based on level\n        switch(entry.level){\n            case 'debug':\n                if (this.environment === 'development') {\n                    console.debug(json);\n                }\n                break;\n            case 'info':\n                console.info(json);\n                break;\n            case 'warn':\n                console.warn(json);\n                break;\n            case 'error':\n                console.error(json);\n                break;\n        }\n    }\n    debug(message, context, data) {\n        const entry = this.createLogEntry('debug', message, context, data);\n        this.output(entry);\n    }\n    info(message, context, data) {\n        const entry = this.createLogEntry('info', message, context, data);\n        this.output(entry);\n    }\n    warn(message, context, data) {\n        const entry = this.createLogEntry('warn', message, context, data);\n        this.output(entry);\n    }\n    error(message, context, error, data) {\n        const entry = this.createLogEntry('error', message, context, data, error);\n        this.output(entry);\n    }\n}\n// Default logger instance\nconst logger = new StructuredLogger();\n/**\n * Extracts or generates a correlation ID from a request\n */ function getCorrelationId(req) {\n    const correlationId = req.headers['x-correlation-id'];\n    return correlationId || generateCorrelationId();\n}\n/**\n * Generates a new correlation ID\n */ function generateCorrelationId() {\n    // Use crypto API for secure correlation IDs\n    if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n        return crypto.randomUUID();\n    }\n    // Server-side Node.js fallback\n    if (true) {\n        const { randomBytes } = __webpack_require__(/*! crypto */ \"crypto\");\n        return randomBytes(16).toString('hex');\n    }\n    // Browser fallback using crypto.getRandomValues\n    if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n        const array = new Uint8Array(16);\n        crypto.getRandomValues(array);\n        return Array.from(array, (byte)=>byte.toString(16).padStart(2, '0')).join('');\n    }\n    throw new Error('No secure random number generator available');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFO1FBQ3RELE9BQU9ELE9BQU9DLFVBQVU7SUFDMUI7SUFFQSwrQkFBK0I7SUFDL0IsSUFBSSxJQUE2QixFQUFFO1FBQ2pDLE1BQU0sRUFBRUMsV0FBVyxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDLHNCQUFRO1FBQ3hDLE9BQU9ELFlBQVksSUFBSUUsUUFBUSxDQUFDO0lBQ2xDO0lBRUEsZ0RBQWdEO0lBQ2hELElBQUksT0FBT0osV0FBVyxlQUFlQSxPQUFPSyxlQUFlLEVBQUU7UUFDM0QsTUFBTUMsUUFBUSxJQUFJQyxXQUFXO1FBQzdCUCxPQUFPSyxlQUFlLENBQUNDO1FBQ3ZCLE9BQU9FLE1BQU1DLElBQUksQ0FBQ0gsT0FBT0ksQ0FBQUEsT0FBUUEsS0FBS04sUUFBUSxDQUFDLElBQUlPLFFBQVEsQ0FBQyxHQUFHLE1BQU1DLElBQUksQ0FBQztJQUM1RTtJQUVBLE1BQU0sSUFBSUMsTUFBTTtBQUNsQiIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy91dGlscy9sb2dnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBOZXh0QXBpUmVxdWVzdCB9IGZyb20gJ25leHQnO1xuXG5leHBvcnQgdHlwZSBMb2dMZXZlbCA9ICdkZWJ1ZycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIExvZ0NvbnRleHQge1xuICBjb3JyZWxhdGlvbklkOiBzdHJpbmc7XG4gIHVzZXJJZD86IHN0cmluZztcbiAgc2Vzc2lvbklkPzogc3RyaW5nO1xuICBqb3VybmV5Pzogc3RyaW5nO1xuICB0cmFjZUlkPzogc3RyaW5nO1xuICBzcGFuSWQ/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IHVua25vd247IC8vIEFsbG93IGFkZGl0aW9uYWwgcHJvcGVydGllc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ0VudHJ5IHtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIGxldmVsOiBMb2dMZXZlbDtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb250ZXh0OiBMb2dDb250ZXh0O1xuICBkYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIGVycm9yPzoge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgc3RhY2s/OiBzdHJpbmc7XG4gIH07XG59XG5cbi8vIFBJSSBwYXR0ZXJucyB0byBzY3J1YiBmcm9tIGxvZ3NcbmNvbnN0IFBJSV9QQVRURVJOUzogQXJyYXk8eyBwYXR0ZXJuOiBSZWdFeHA7IHJlcGxhY2VtZW50OiBzdHJpbmcgfCAoKG1hdGNoOiBzdHJpbmcsIC4uLmFyZ3M6IHN0cmluZ1tdKSA9PiBzdHJpbmcpIH0+ID0gW1xuICAvLyBFbWFpbCBhZGRyZXNzZXNcbiAgeyBwYXR0ZXJuOiAvKFthLXpBLVowLTkuXyUrLV0rKUAoW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0pL2csIHJlcGxhY2VtZW50OiAnW1JFREFDVEVEX0VNQUlMXScgfSxcbiAgLy8gUGhvbmUgbnVtYmVycyAoQXVzdHJhbGlhbiBmb3JtYXQpXG4gIHsgcGF0dGVybjogLyhcXCs/NjF8MClbMi05XVxcZHs4fS9nLCByZXBsYWNlbWVudDogJ1tSRURBQ1RFRF9QSE9ORV0nIH0sXG4gIC8vIENyZWRpdCBjYXJkIG51bWJlcnNcbiAgeyBwYXR0ZXJuOiAvXFxiXFxkezR9W1xccy1dP1xcZHs0fVtcXHMtXT9cXGR7NH1bXFxzLV0/XFxkezR9XFxiL2csIHJlcGxhY2VtZW50OiAnW1JFREFDVEVEX0NDXScgfSxcbiAgLy8gQXVzdHJhbGlhbiBUYXggRmlsZSBOdW1iZXJzXG4gIHsgcGF0dGVybjogL1xcYlxcZHszfVtcXHMtXT9cXGR7M31bXFxzLV0/XFxkezN9XFxiL2csIHJlcGxhY2VtZW50OiAnW1JFREFDVEVEX1RGTl0nIH0sXG4gIC8vIE5hbWVzIGluIGNvbW1vbiBmaWVsZHMgKHVwZGF0ZWQgdG8gaGFuZGxlIEpTT04gc3RydWN0dXJlKVxuICB7IFxuICAgIHBhdHRlcm46IC9cIigoPzpbXFx3Ll0rXFwuKT8oPzpuYW1lfGZpcnN0TmFtZXxsYXN0TmFtZXxmdWxsTmFtZSkpXCJcXHMqOlxccypcIlteXCJdK1wiL2dpLCBcbiAgICByZXBsYWNlbWVudDogKG1hdGNoOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcpID0+IGBcIiR7ZmllbGR9XCI6XCJbUkVEQUNURURfTkFNRV1cImBcbiAgfSxcbiAgLy8gQWRkcmVzc2VzXG4gIHsgcGF0dGVybjogL1xcZCtcXHMrW1xcd1xcc10rXFxzKyhTdHJlZXR8U3R8QXZlbnVlfEF2ZXxSb2FkfFJkfERyaXZlfERyfENvdXJ0fEN0fExhbmV8TG4pL2dpLCByZXBsYWNlbWVudDogJ1tSRURBQ1RFRF9BRERSRVNTXScgfSxcbiAgLy8gQVBJIGtleXMgYW5kIHRva2VucyAodXBkYXRlZCB0byBoYW5kbGUgSlNPTiBzdHJ1Y3R1cmUpXG4gIHsgXG4gICAgcGF0dGVybjogL1wiKGFwaVtfLV0/a2V5fGFwaUtleXx0b2tlbnxzZWNyZXR8cGFzc3dvcmQpXCJcXHMqOlxccypcIlteXCJdK1wiL2dpLCBcbiAgICByZXBsYWNlbWVudDogKG1hdGNoOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcpID0+IGBcIiR7ZmllbGR9XCI6XCJbUkVEQUNURURdXCJgXG4gIH0sXG5dO1xuXG5leHBvcnQgY2xhc3MgU3RydWN0dXJlZExvZ2dlciB7XG4gIHByaXZhdGUgZW52aXJvbm1lbnQ6IHN0cmluZztcbiAgcHJpdmF0ZSBzZXJ2aWNlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoZW52aXJvbm1lbnQgPSBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnLCBzZXJ2aWNlID0gJ2hvbGlkYXktYWdncmVnYXRvcicpIHtcbiAgICB0aGlzLmVudmlyb25tZW50ID0gZW52aXJvbm1lbnQ7XG4gICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3J1YnMgUElJIGZyb20gYW55IGRhdGEgb2JqZWN0XG4gICAqL1xuICBwcml2YXRlIHNjcnViUElJKGRhdGE6IHVua25vd24pOiB1bmtub3duIHtcbiAgICBpZiAoIWRhdGEpIHJldHVybiBkYXRhO1xuXG4gICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIGxldCBzY3J1YmJlZCA9IGpzb25TdHJpbmc7XG5cbiAgICBmb3IgKGNvbnN0IHsgcGF0dGVybiwgcmVwbGFjZW1lbnQgfSBvZiBQSUlfUEFUVEVSTlMpIHtcbiAgICAgIGlmICh0eXBlb2YgcmVwbGFjZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNjcnViYmVkID0gc2NydWJiZWQucmVwbGFjZShwYXR0ZXJuLCByZXBsYWNlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY3J1YmJlZCA9IHNjcnViYmVkLnJlcGxhY2UocGF0dGVybiwgcmVwbGFjZW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShzY3J1YmJlZCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBJZiB3ZSBjYW4ndCBwYXJzZSBpdCBiYWNrLCByZXR1cm4gdGhlIG9yaWdpbmFsIGRhdGFcbiAgICAgIC8vIGJ1dCBsb2cgYSB3YXJuaW5nXG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBwYXJzZSBzY3J1YmJlZCBkYXRhLCByZXR1cm5pbmcgb3JpZ2luYWwnKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbG9nIGVudHJ5IHdpdGggcHJvcGVyIHN0cnVjdHVyZVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhdGVMb2dFbnRyeShcbiAgICBsZXZlbDogTG9nTGV2ZWwsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGNvbnRleHQ6IExvZ0NvbnRleHQsXG4gICAgZGF0YT86IHVua25vd24sXG4gICAgZXJyb3I/OiBFcnJvclxuICApOiBMb2dFbnRyeSB7XG4gICAgY29uc3QgZW50cnk6IExvZ0VudHJ5ID0ge1xuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBsZXZlbCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIC4uLmNvbnRleHQsXG4gICAgICAgIGVudmlyb25tZW50OiB0aGlzLmVudmlyb25tZW50LFxuICAgICAgICBzZXJ2aWNlOiB0aGlzLnNlcnZpY2UsXG4gICAgICB9IGFzIExvZ0NvbnRleHQsXG4gICAgfTtcblxuICAgIGlmIChkYXRhKSB7XG4gICAgICBlbnRyeS5kYXRhID0gdGhpcy5zY3J1YlBJSShkYXRhKSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVudHJ5LmVycm9yID0ge1xuICAgICAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGFjazogdGhpcy5lbnZpcm9ubWVudCA9PT0gJ2RldmVsb3BtZW50JyB8fCB0aGlzLmVudmlyb25tZW50ID09PSAndGVzdCcgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIE91dHB1dHMgdGhlIGxvZyBlbnRyeVxuICAgKi9cbiAgcHJpdmF0ZSBvdXRwdXQoZW50cnk6IExvZ0VudHJ5KTogdm9pZCB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KGVudHJ5KTtcblxuICAgIC8vIEluIHByb2R1Y3Rpb24sIHdlJ2Qgc2VuZCB0aGlzIHRvIGEgbG9nIGFnZ3JlZ2F0aW9uIHNlcnZpY2VcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCB1c2UgY29uc29sZSBtZXRob2RzIGJhc2VkIG9uIGxldmVsXG4gICAgc3dpdGNoIChlbnRyeS5sZXZlbCkge1xuICAgICAgY2FzZSAnZGVidWcnOlxuICAgICAgICBpZiAodGhpcy5lbnZpcm9ubWVudCA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIGNvbnNvbGUuZGVidWcoanNvbik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgY29uc29sZS5pbmZvKGpzb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICBjb25zb2xlLndhcm4oanNvbik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICBjb25zb2xlLmVycm9yKGpzb24pO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBkZWJ1ZyhtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ6IExvZ0NvbnRleHQsIGRhdGE/OiB1bmtub3duKTogdm9pZCB7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmNyZWF0ZUxvZ0VudHJ5KCdkZWJ1ZycsIG1lc3NhZ2UsIGNvbnRleHQsIGRhdGEpO1xuICAgIHRoaXMub3V0cHV0KGVudHJ5KTtcbiAgfVxuXG4gIGluZm8obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0OiBMb2dDb250ZXh0LCBkYXRhPzogdW5rbm93bik6IHZvaWQge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jcmVhdGVMb2dFbnRyeSgnaW5mbycsIG1lc3NhZ2UsIGNvbnRleHQsIGRhdGEpO1xuICAgIHRoaXMub3V0cHV0KGVudHJ5KTtcbiAgfVxuXG4gIHdhcm4obWVzc2FnZTogc3RyaW5nLCBjb250ZXh0OiBMb2dDb250ZXh0LCBkYXRhPzogdW5rbm93bik6IHZvaWQge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jcmVhdGVMb2dFbnRyeSgnd2FybicsIG1lc3NhZ2UsIGNvbnRleHQsIGRhdGEpO1xuICAgIHRoaXMub3V0cHV0KGVudHJ5KTtcbiAgfVxuXG4gIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dDogTG9nQ29udGV4dCwgZXJyb3I/OiBFcnJvciwgZGF0YT86IHVua25vd24pOiB2b2lkIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuY3JlYXRlTG9nRW50cnkoJ2Vycm9yJywgbWVzc2FnZSwgY29udGV4dCwgZGF0YSwgZXJyb3IpO1xuICAgIHRoaXMub3V0cHV0KGVudHJ5KTtcbiAgfVxufVxuXG4vLyBEZWZhdWx0IGxvZ2dlciBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGxvZ2dlciA9IG5ldyBTdHJ1Y3R1cmVkTG9nZ2VyKCk7XG5cbi8qKlxuICogRXh0cmFjdHMgb3IgZ2VuZXJhdGVzIGEgY29ycmVsYXRpb24gSUQgZnJvbSBhIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvcnJlbGF0aW9uSWQocmVxOiBOZXh0QXBpUmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSByZXEuaGVhZGVyc1sneC1jb3JyZWxhdGlvbi1pZCddIGFzIHN0cmluZztcbiAgcmV0dXJuIGNvcnJlbGF0aW9uSWQgfHwgZ2VuZXJhdGVDb3JyZWxhdGlvbklkKCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgbmV3IGNvcnJlbGF0aW9uIElEXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNvcnJlbGF0aW9uSWQoKTogc3RyaW5nIHtcbiAgLy8gVXNlIGNyeXB0byBBUEkgZm9yIHNlY3VyZSBjb3JyZWxhdGlvbiBJRHNcbiAgaWYgKHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5yYW5kb21VVUlEKSB7XG4gICAgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7XG4gIH1cbiAgXG4gIC8vIFNlcnZlci1zaWRlIE5vZGUuanMgZmFsbGJhY2tcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgeyByYW5kb21CeXRlcyB9ID0gcmVxdWlyZSgnY3J5cHRvJyk7XG4gICAgcmV0dXJuIHJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnaGV4Jyk7XG4gIH1cbiAgXG4gIC8vIEJyb3dzZXIgZmFsbGJhY2sgdXNpbmcgY3J5cHRvLmdldFJhbmRvbVZhbHVlc1xuICBpZiAodHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIGNvbnN0IGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyYXkpO1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFycmF5LCBieXRlID0+IGJ5dGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xuICB9XG4gIFxuICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlY3VyZSByYW5kb20gbnVtYmVyIGdlbmVyYXRvciBhdmFpbGFibGUnKTtcbn0iXSwibmFtZXMiOlsiUElJX1BBVFRFUk5TIiwicGF0dGVybiIsInJlcGxhY2VtZW50IiwibWF0Y2giLCJmaWVsZCIsIlN0cnVjdHVyZWRMb2dnZXIiLCJlbnZpcm9ubWVudCIsInByb2Nlc3MiLCJzZXJ2aWNlIiwic2NydWJQSUkiLCJkYXRhIiwianNvblN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzY3J1YmJlZCIsInJlcGxhY2UiLCJwYXJzZSIsImNvbnNvbGUiLCJ3YXJuIiwiY3JlYXRlTG9nRW50cnkiLCJsZXZlbCIsIm1lc3NhZ2UiLCJjb250ZXh0IiwiZXJyb3IiLCJlbnRyeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm5hbWUiLCJzdGFjayIsInVuZGVmaW5lZCIsIm91dHB1dCIsImpzb24iLCJkZWJ1ZyIsImluZm8iLCJsb2dnZXIiLCJnZXRDb3JyZWxhdGlvbklkIiwicmVxIiwiY29ycmVsYXRpb25JZCIsImhlYWRlcnMiLCJnZW5lcmF0ZUNvcnJlbGF0aW9uSWQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwicmFuZG9tQnl0ZXMiLCJyZXF1aXJlIiwidG9TdHJpbmciLCJnZXRSYW5kb21WYWx1ZXMiLCJhcnJheSIsIlVpbnQ4QXJyYXkiLCJBcnJheSIsImZyb20iLCJieXRlIiwicGFkU3RhcnQiLCJqb2luIiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/logger.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/requestContext.ts":
/*!*************************************!*\
  !*** ./src/utils/requestContext.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentCorrelationId: () => (/* binding */ getCurrentCorrelationId),\n/* harmony export */   getRequestContext: () => (/* binding */ getRequestContext),\n/* harmony export */   requestContextStorage: () => (/* binding */ requestContextStorage),\n/* harmony export */   updateRequestContext: () => (/* binding */ updateRequestContext),\n/* harmony export */   withRequestContext: () => (/* binding */ withRequestContext)\n/* harmony export */ });\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:async_hooks */ \"node:async_hooks\");\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_async_hooks__WEBPACK_IMPORTED_MODULE_0__);\n\n// Create AsyncLocalStorage instance for request context\nconst requestContextStorage = new node_async_hooks__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorage();\n/**\n * Runs a function with the given request context\n */ function withRequestContext(context, fn) {\n    return requestContextStorage.run(context, fn);\n}\n/**\n * Gets the current request context\n */ function getRequestContext() {\n    return requestContextStorage.getStore();\n}\n/**\n * Gets the current correlation ID from context\n */ function getCurrentCorrelationId() {\n    const context = getRequestContext();\n    return context?.correlationId;\n}\n/**\n * Updates the current request context with additional data\n */ function updateRequestContext(updates) {\n    const currentContext = getRequestContext();\n    if (currentContext) {\n        Object.assign(currentContext, updates);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9yZXF1ZXN0Q29udGV4dC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBVXJELHdEQUF3RDtBQUNqRCxNQUFNQyx3QkFBd0IsSUFBSUQsK0RBQWlCQSxHQUFtQjtBQUU3RTs7Q0FFQyxHQUNNLFNBQVNFLG1CQUNkQyxPQUF1QixFQUN2QkMsRUFBd0I7SUFFeEIsT0FBT0gsc0JBQXNCSSxHQUFHLENBQUNGLFNBQVNDO0FBQzVDO0FBRUE7O0NBRUMsR0FDTSxTQUFTRTtJQUNkLE9BQU9MLHNCQUFzQk0sUUFBUTtBQUN2QztBQUVBOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxNQUFNTCxVQUFVRztJQUNoQixPQUFPSCxTQUFTTTtBQUNsQjtBQUVBOztDQUVDLEdBQ00sU0FBU0MscUJBQXFCQyxPQUFnQztJQUNuRSxNQUFNQyxpQkFBaUJOO0lBQ3ZCLElBQUlNLGdCQUFnQjtRQUNsQkMsT0FBT0MsTUFBTSxDQUFDRixnQkFBZ0JEO0lBQ2hDO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdXRpbHMvcmVxdWVzdENvbnRleHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tICdub2RlOmFzeW5jX2hvb2tzJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0Q29udGV4dCB7XG4gIGNvcnJlbGF0aW9uSWQ6IHN0cmluZztcbiAgdXNlcklkPzogc3RyaW5nO1xuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XG4gIGpvdXJuZXk/OiBzdHJpbmc7XG4gIHN0YXJ0VGltZTogbnVtYmVyO1xufVxuXG4vLyBDcmVhdGUgQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgZm9yIHJlcXVlc3QgY29udGV4dFxuZXhwb3J0IGNvbnN0IHJlcXVlc3RDb250ZXh0U3RvcmFnZSA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZTxSZXF1ZXN0Q29udGV4dD4oKTtcblxuLyoqXG4gKiBSdW5zIGEgZnVuY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gcmVxdWVzdCBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmVxdWVzdENvbnRleHQ8VD4oXG4gIGNvbnRleHQ6IFJlcXVlc3RDb250ZXh0LFxuICBmbjogKCkgPT4gVCB8IFByb21pc2U8VD5cbik6IFQgfCBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIHJlcXVlc3RDb250ZXh0U3RvcmFnZS5ydW4oY29udGV4dCwgZm4pO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgcmVxdWVzdCBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1ZXN0Q29udGV4dCgpOiBSZXF1ZXN0Q29udGV4dCB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiByZXF1ZXN0Q29udGV4dFN0b3JhZ2UuZ2V0U3RvcmUoKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IGNvcnJlbGF0aW9uIElEIGZyb20gY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudENvcnJlbGF0aW9uSWQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgY29udGV4dCA9IGdldFJlcXVlc3RDb250ZXh0KCk7XG4gIHJldHVybiBjb250ZXh0Py5jb3JyZWxhdGlvbklkO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgcmVxdWVzdCBjb250ZXh0IHdpdGggYWRkaXRpb25hbCBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZXF1ZXN0Q29udGV4dCh1cGRhdGVzOiBQYXJ0aWFsPFJlcXVlc3RDb250ZXh0Pik6IHZvaWQge1xuICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldFJlcXVlc3RDb250ZXh0KCk7XG4gIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgIE9iamVjdC5hc3NpZ24oY3VycmVudENvbnRleHQsIHVwZGF0ZXMpO1xuICB9XG59Il0sIm5hbWVzIjpbIkFzeW5jTG9jYWxTdG9yYWdlIiwicmVxdWVzdENvbnRleHRTdG9yYWdlIiwid2l0aFJlcXVlc3RDb250ZXh0IiwiY29udGV4dCIsImZuIiwicnVuIiwiZ2V0UmVxdWVzdENvbnRleHQiLCJnZXRTdG9yZSIsImdldEN1cnJlbnRDb3JyZWxhdGlvbklkIiwiY29ycmVsYXRpb25JZCIsInVwZGF0ZVJlcXVlc3RDb250ZXh0IiwidXBkYXRlcyIsImN1cnJlbnRDb250ZXh0IiwiT2JqZWN0IiwiYXNzaWduIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/requestContext.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/stripe.ts":
/*!*****************************!*\
  !*** ./src/utils/stripe.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANNUAL_SUBSCRIPTION_CONFIG: () => (/* binding */ ANNUAL_SUBSCRIPTION_CONFIG),\n/* harmony export */   cancelSubscription: () => (/* binding */ cancelSubscription),\n/* harmony export */   constructWebhookEvent: () => (/* binding */ constructWebhookEvent),\n/* harmony export */   createCheckoutSession: () => (/* binding */ createCheckoutSession),\n/* harmony export */   createStripeCustomer: () => (/* binding */ createStripeCustomer),\n/* harmony export */   getSubscription: () => (/* binding */ getSubscription),\n/* harmony export */   stripe: () => (/* binding */ stripe)\n/* harmony export */ });\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([stripe__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n([stripe__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst stripe = _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_SECRET_KEY ? new stripe__WEBPACK_IMPORTED_MODULE_0__[\"default\"](_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_SECRET_KEY, {\n    apiVersion: \"2025-07-30.basil\",\n    typescript: true\n}) : null;\nconst ANNUAL_SUBSCRIPTION_CONFIG = {\n    mode: \"subscription\",\n    priceId: _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_ANNUAL_PRICE_ID ?? \"\",\n    recurring: {\n        interval: \"year\",\n        interval_count: 1\n    }\n};\nasync function createStripeCustomer(email, userId, name) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    const customer = await stripe.customers.create({\n        email,\n        name: name ?? undefined,\n        metadata: {\n            userId\n        }\n    });\n    return customer;\n}\nasync function createCheckoutSession(customerId, userId, priceId, successUrl, cancelUrl) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    if (!priceId || priceId === \"price_...\") {\n        throw new Error(\"Invalid Stripe price ID. Please set STRIPE_ANNUAL_PRICE_ID in your .env file with a valid price ID from your Stripe dashboard.\");\n    }\n    const session = await stripe.checkout.sessions.create({\n        customer: customerId,\n        payment_method_types: [\n            \"card\"\n        ],\n        billing_address_collection: \"required\",\n        line_items: [\n            {\n                price: priceId,\n                quantity: 1\n            }\n        ],\n        mode: \"subscription\",\n        allow_promotion_codes: true,\n        subscription_data: {\n            metadata: {\n                userId\n            }\n        },\n        success_url: successUrl,\n        cancel_url: cancelUrl,\n        metadata: {\n            userId\n        }\n    });\n    return session;\n}\nasync function constructWebhookEvent(rawBody, signature) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    if (!_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_WEBHOOK_SECRET) {\n        throw new Error(\"Stripe webhook secret is not configured. Please set STRIPE_WEBHOOK_SECRET in your .env file.\");\n    }\n    try {\n        const event = stripe.webhooks.constructEvent(rawBody, signature, _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_WEBHOOK_SECRET);\n        return event;\n    } catch (err) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Webhook signature verification failed\", {\n            correlationId: 'webhook-verify-' + Date.now(),\n            error: err\n        });\n        throw new Error(\"Webhook signature verification failed\");\n    }\n}\nasync function getSubscription(subscriptionId) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    return stripe.subscriptions.retrieve(subscriptionId);\n}\nasync function cancelSubscription(subscriptionId) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    return stripe.subscriptions.update(subscriptionId, {\n        cancel_at_period_end: true\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9zdHJpcGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUE0QjtBQUNJO0FBQ1E7QUFFakMsTUFBTUcsU0FBU0YseUNBQUdBLENBQUNHLGlCQUFpQixHQUN2QyxJQUFJSiw4Q0FBTUEsQ0FDUkMseUNBQUdBLENBQUNHLGlCQUFpQixFQUNyQjtJQUNFQyxZQUFZO0lBQ1pDLFlBQVk7QUFDZCxLQUVGLEtBQUs7QUFFRixNQUFNQyw2QkFBNkI7SUFDeENDLE1BQU07SUFDTkMsU0FBU1IseUNBQUdBLENBQUNTLHNCQUFzQixJQUFJO0lBQ3ZDQyxXQUFXO1FBQ1RDLFVBQVU7UUFDVkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsRUFBRTtBQUVLLGVBQWVDLHFCQUNwQkMsS0FBYSxFQUNiQyxNQUFjLEVBQ2RDLElBQW9CO0lBRXBCLElBQUksQ0FBQ2QsUUFBUTtRQUNYLE1BQU0sSUFBSWUsTUFDUjtJQUVKO0lBRUEsTUFBTUMsV0FBVyxNQUFNaEIsT0FBT2lCLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDO1FBQzdDTjtRQUNBRSxNQUFNQSxRQUFRSztRQUNkQyxVQUFVO1lBQ1JQO1FBQ0Y7SUFDRjtJQUVBLE9BQU9HO0FBQ1Q7QUFFTyxlQUFlSyxzQkFDcEJDLFVBQWtCLEVBQ2xCVCxNQUFjLEVBQ2RQLE9BQWUsRUFDZmlCLFVBQWtCLEVBQ2xCQyxTQUFpQjtJQUVqQixJQUFJLENBQUN4QixRQUFRO1FBQ1gsTUFBTSxJQUFJZSxNQUNSO0lBRUo7SUFFQSxJQUFJLENBQUNULFdBQVdBLFlBQVksYUFBYTtRQUN2QyxNQUFNLElBQUlTLE1BQ1I7SUFFSjtJQUVBLE1BQU1VLFVBQVUsTUFBTXpCLE9BQU8wQixRQUFRLENBQUNDLFFBQVEsQ0FBQ1QsTUFBTSxDQUFDO1FBQ3BERixVQUFVTTtRQUNWTSxzQkFBc0I7WUFBQztTQUFPO1FBQzlCQyw0QkFBNEI7UUFDNUJDLFlBQVk7WUFDVjtnQkFDRUMsT0FBT3pCO2dCQUNQMEIsVUFBVTtZQUNaO1NBQ0Q7UUFDRDNCLE1BQU07UUFDTjRCLHVCQUF1QjtRQUN2QkMsbUJBQW1CO1lBQ2pCZCxVQUFVO2dCQUNSUDtZQUNGO1FBQ0Y7UUFDQXNCLGFBQWFaO1FBQ2JhLFlBQVlaO1FBQ1pKLFVBQVU7WUFDUlA7UUFDRjtJQUNGO0lBRUEsT0FBT1k7QUFDVDtBQUVPLGVBQWVZLHNCQUNwQkMsT0FBd0IsRUFDeEJDLFNBQWlCO0lBRWpCLElBQUksQ0FBQ3ZDLFFBQVE7UUFDWCxNQUFNLElBQUllLE1BQ1I7SUFFSjtJQUVBLElBQUksQ0FBQ2pCLHlDQUFHQSxDQUFDMEMscUJBQXFCLEVBQUU7UUFDOUIsTUFBTSxJQUFJekIsTUFDUjtJQUVKO0lBRUEsSUFBSTtRQUNGLE1BQU0wQixRQUFRekMsT0FBTzBDLFFBQVEsQ0FBQ0MsY0FBYyxDQUMxQ0wsU0FDQUMsV0FDQXpDLHlDQUFHQSxDQUFDMEMscUJBQXFCO1FBRTNCLE9BQU9DO0lBQ1QsRUFBRSxPQUFPRyxLQUFLO1FBQ1o3QyxpREFBTUEsQ0FBQzhDLEtBQUssQ0FBQyx5Q0FBeUM7WUFBRUMsZUFBZSxvQkFBb0JDLEtBQUtDLEdBQUc7WUFBSUgsT0FBT0Q7UUFBSTtRQUNsSCxNQUFNLElBQUk3QixNQUFNO0lBQ2xCO0FBQ0Y7QUFFTyxlQUFla0MsZ0JBQWdCQyxjQUFzQjtJQUMxRCxJQUFJLENBQUNsRCxRQUFRO1FBQ1gsTUFBTSxJQUFJZSxNQUNSO0lBRUo7SUFFQSxPQUFPZixPQUFPbUQsYUFBYSxDQUFDQyxRQUFRLENBQUNGO0FBQ3ZDO0FBRU8sZUFBZUcsbUJBQW1CSCxjQUFzQjtJQUM3RCxJQUFJLENBQUNsRCxRQUFRO1FBQ1gsTUFBTSxJQUFJZSxNQUNSO0lBRUo7SUFFQSxPQUFPZixPQUFPbUQsYUFBYSxDQUFDRyxNQUFNLENBQUNKLGdCQUFnQjtRQUNqREssc0JBQXNCO0lBQ3hCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdXRpbHMvc3RyaXBlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdHJpcGUgZnJvbSBcInN0cmlwZVwiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIn4vZW52Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIn4vdXRpbHMvbG9nZ2VyXCI7XG5cbmV4cG9ydCBjb25zdCBzdHJpcGUgPSBlbnYuU1RSSVBFX1NFQ1JFVF9LRVkgXG4gID8gbmV3IFN0cmlwZShcbiAgICAgIGVudi5TVFJJUEVfU0VDUkVUX0tFWSxcbiAgICAgIHtcbiAgICAgICAgYXBpVmVyc2lvbjogXCIyMDI1LTA3LTMwLmJhc2lsXCIsXG4gICAgICAgIHR5cGVzY3JpcHQ6IHRydWUsXG4gICAgICB9XG4gICAgKVxuICA6IG51bGw7XG5cbmV4cG9ydCBjb25zdCBBTk5VQUxfU1VCU0NSSVBUSU9OX0NPTkZJRyA9IHtcbiAgbW9kZTogXCJzdWJzY3JpcHRpb25cIiBhcyBjb25zdCxcbiAgcHJpY2VJZDogZW52LlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQgPz8gXCJcIixcbiAgcmVjdXJyaW5nOiB7XG4gICAgaW50ZXJ2YWw6IFwieWVhclwiIGFzIGNvbnN0LFxuICAgIGludGVydmFsX2NvdW50OiAxLFxuICB9LFxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVN0cmlwZUN1c3RvbWVyKFxuICBlbWFpbDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgbmFtZT86IHN0cmluZyB8IG51bGxcbikge1xuICBpZiAoIXN0cmlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IFNUUklQRV9TRUNSRVRfS0VZIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLmNyZWF0ZSh7XG4gICAgZW1haWwsXG4gICAgbmFtZTogbmFtZSA/PyB1bmRlZmluZWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHVzZXJJZCxcbiAgICB9LFxuICB9KTtcbiAgXG4gIHJldHVybiBjdXN0b21lcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbihcbiAgY3VzdG9tZXJJZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcHJpY2VJZDogc3RyaW5nLFxuICBzdWNjZXNzVXJsOiBzdHJpbmcsXG4gIGNhbmNlbFVybDogc3RyaW5nXG4pIHtcbiAgaWYgKCFzdHJpcGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlN0cmlwZSBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBTVFJJUEVfU0VDUkVUX0tFWSBpbiB5b3VyIC5lbnYgZmlsZS5cIlxuICAgICk7XG4gIH1cbiAgXG4gIGlmICghcHJpY2VJZCB8fCBwcmljZUlkID09PSBcInByaWNlXy4uLlwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIFN0cmlwZSBwcmljZSBJRC4gUGxlYXNlIHNldCBTVFJJUEVfQU5OVUFMX1BSSUNFX0lEIGluIHlvdXIgLmVudiBmaWxlIHdpdGggYSB2YWxpZCBwcmljZSBJRCBmcm9tIHlvdXIgU3RyaXBlIGRhc2hib2FyZC5cIlxuICAgICk7XG4gIH1cbiAgXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzdHJpcGUuY2hlY2tvdXQuc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICBjdXN0b21lcjogY3VzdG9tZXJJZCxcbiAgICBwYXltZW50X21ldGhvZF90eXBlczogW1wiY2FyZFwiXSxcbiAgICBiaWxsaW5nX2FkZHJlc3NfY29sbGVjdGlvbjogXCJyZXF1aXJlZFwiLFxuICAgIGxpbmVfaXRlbXM6IFtcbiAgICAgIHtcbiAgICAgICAgcHJpY2U6IHByaWNlSWQsXG4gICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgfSxcbiAgICBdLFxuICAgIG1vZGU6IFwic3Vic2NyaXB0aW9uXCIsXG4gICAgYWxsb3dfcHJvbW90aW9uX2NvZGVzOiB0cnVlLFxuICAgIHN1YnNjcmlwdGlvbl9kYXRhOiB7XG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB1c2VySWQsXG4gICAgICB9LFxuICAgIH0sXG4gICAgc3VjY2Vzc191cmw6IHN1Y2Nlc3NVcmwsXG4gICAgY2FuY2VsX3VybDogY2FuY2VsVXJsLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB1c2VySWQsXG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIHNlc3Npb247XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25zdHJ1Y3RXZWJob29rRXZlbnQoXG4gIHJhd0JvZHk6IHN0cmluZyB8IEJ1ZmZlcixcbiAgc2lnbmF0dXJlOiBzdHJpbmdcbikge1xuICBpZiAoIXN0cmlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IFNUUklQRV9TRUNSRVRfS0VZIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgaWYgKCFlbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJTdHJpcGUgd2ViaG9vayBzZWNyZXQgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgU1RSSVBFX1dFQkhPT0tfU0VDUkVUIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBldmVudCA9IHN0cmlwZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChcbiAgICAgIHJhd0JvZHksXG4gICAgICBzaWduYXR1cmUsXG4gICAgICBlbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUXG4gICAgKTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci5lcnJvcihcIldlYmhvb2sgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIiwgeyBjb3JyZWxhdGlvbklkOiAnd2ViaG9vay12ZXJpZnktJyArIERhdGUubm93KCksIGVycm9yOiBlcnIgfSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiV2ViaG9vayBzaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZFwiKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbklkOiBzdHJpbmcpIHtcbiAgaWYgKCFzdHJpcGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlN0cmlwZSBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBTVFJJUEVfU0VDUkVUX0tFWSBpbiB5b3VyIC5lbnYgZmlsZS5cIlxuICAgICk7XG4gIH1cbiAgXG4gIHJldHVybiBzdHJpcGUuc3Vic2NyaXB0aW9ucy5yZXRyaWV2ZShzdWJzY3JpcHRpb25JZCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYW5jZWxTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uSWQ6IHN0cmluZykge1xuICBpZiAoIXN0cmlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IFNUUklQRV9TRUNSRVRfS0VZIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgcmV0dXJuIHN0cmlwZS5zdWJzY3JpcHRpb25zLnVwZGF0ZShzdWJzY3JpcHRpb25JZCwge1xuICAgIGNhbmNlbF9hdF9wZXJpb2RfZW5kOiB0cnVlLFxuICB9KTtcbn0iXSwibmFtZXMiOlsiU3RyaXBlIiwiZW52IiwibG9nZ2VyIiwic3RyaXBlIiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJhcGlWZXJzaW9uIiwidHlwZXNjcmlwdCIsIkFOTlVBTF9TVUJTQ1JJUFRJT05fQ09ORklHIiwibW9kZSIsInByaWNlSWQiLCJTVFJJUEVfQU5OVUFMX1BSSUNFX0lEIiwicmVjdXJyaW5nIiwiaW50ZXJ2YWwiLCJpbnRlcnZhbF9jb3VudCIsImNyZWF0ZVN0cmlwZUN1c3RvbWVyIiwiZW1haWwiLCJ1c2VySWQiLCJuYW1lIiwiRXJyb3IiLCJjdXN0b21lciIsImN1c3RvbWVycyIsImNyZWF0ZSIsInVuZGVmaW5lZCIsIm1ldGFkYXRhIiwiY3JlYXRlQ2hlY2tvdXRTZXNzaW9uIiwiY3VzdG9tZXJJZCIsInN1Y2Nlc3NVcmwiLCJjYW5jZWxVcmwiLCJzZXNzaW9uIiwiY2hlY2tvdXQiLCJzZXNzaW9ucyIsInBheW1lbnRfbWV0aG9kX3R5cGVzIiwiYmlsbGluZ19hZGRyZXNzX2NvbGxlY3Rpb24iLCJsaW5lX2l0ZW1zIiwicHJpY2UiLCJxdWFudGl0eSIsImFsbG93X3Byb21vdGlvbl9jb2RlcyIsInN1YnNjcmlwdGlvbl9kYXRhIiwic3VjY2Vzc191cmwiLCJjYW5jZWxfdXJsIiwiY29uc3RydWN0V2ViaG9va0V2ZW50IiwicmF3Qm9keSIsInNpZ25hdHVyZSIsIlNUUklQRV9XRUJIT09LX1NFQ1JFVCIsImV2ZW50Iiwid2ViaG9va3MiLCJjb25zdHJ1Y3RFdmVudCIsImVyciIsImVycm9yIiwiY29ycmVsYXRpb25JZCIsIkRhdGUiLCJub3ciLCJnZXRTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25JZCIsInN1YnNjcmlwdGlvbnMiLCJyZXRyaWV2ZSIsImNhbmNlbFN1YnNjcmlwdGlvbiIsInVwZGF0ZSIsImNhbmNlbF9hdF9wZXJpb2RfZW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/stripe.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/subscription.ts":
/*!***********************************!*\
  !*** ./src/utils/subscription.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canCancelSubscription: () => (/* binding */ canCancelSubscription),\n/* harmony export */   canResumeSubscription: () => (/* binding */ canResumeSubscription),\n/* harmony export */   doesSubscriptionNeedRenewal: () => (/* binding */ doesSubscriptionNeedRenewal),\n/* harmony export */   getDaysUntilExpiry: () => (/* binding */ getDaysUntilExpiry),\n/* harmony export */   getSubscriptionStatusColor: () => (/* binding */ getSubscriptionStatusColor),\n/* harmony export */   getSubscriptionStatusLabel: () => (/* binding */ getSubscriptionStatusLabel),\n/* harmony export */   isSubscriptionActive: () => (/* binding */ isSubscriptionActive),\n/* harmony export */   isSubscriptionInTrial: () => (/* binding */ isSubscriptionInTrial)\n/* harmony export */ });\n/* harmony import */ var _types_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ~/types/database */ \"(api-node)/./src/types/database.ts\");\n\n/**\n * Check if a subscription is currently active\n */ function isSubscriptionActive(subscription) {\n    if (!subscription || !subscription.status) return false;\n    return subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && (!subscription.expiresAt || subscription.expiresAt > new Date());\n}\n/**\n * Check if a subscription is in trial period\n */ function isSubscriptionInTrial(subscription) {\n    if (!subscription || !subscription.status) return false;\n    // Check if subscription is active and has a trial end date in the future\n    return subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && subscription.trialEndsAt !== null && subscription.trialEndsAt !== undefined && subscription.trialEndsAt > new Date();\n}\n/**\n * Check if a subscription needs renewal\n */ function doesSubscriptionNeedRenewal(subscription) {\n    if (!subscription || !subscription.status) return false;\n    const needsRenewal = subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PAST_DUE || subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.CANCELED || subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.EXPIRED || subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING;\n    return needsRenewal;\n}\n/**\n * Get human-readable subscription status\n */ function getSubscriptionStatusLabel(subscription) {\n    if (!subscription || !subscription.status) return \"No Subscription\";\n    switch(subscription.status){\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE:\n            return subscription.cancelAtPeriodEnd ? \"Active (Canceling)\" : \"Active\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING:\n            return \"Pending\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PAST_DUE:\n            return \"Past Due\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.CANCELED:\n            return \"Canceled\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.EXPIRED:\n            return \"Expired\";\n        default:\n            return \"Unknown\";\n    }\n}\n/**\n * Get subscription status color for UI\n */ function getSubscriptionStatusColor(subscription) {\n    if (!subscription || !subscription.status) return \"gray\";\n    switch(subscription.status){\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE:\n            return subscription.cancelAtPeriodEnd ? \"yellow\" : \"green\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING:\n            return \"yellow\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PAST_DUE:\n            return \"red\";\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.CANCELED:\n        case _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.EXPIRED:\n            return \"gray\";\n        default:\n            return \"gray\";\n    }\n}\n/**\n * Calculate days until subscription expires\n */ function getDaysUntilExpiry(subscription) {\n    if (!subscription || !subscription.currentPeriodEnd) return null;\n    const now = new Date();\n    const expiryDate = new Date(subscription.currentPeriodEnd);\n    const diffTime = expiryDate.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n}\n/**\n * Check if subscription can be canceled\n */ function canCancelSubscription(subscription) {\n    if (!subscription || !subscription.status) return false;\n    return subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && !subscription.cancelAtPeriodEnd && subscription.stripeSubscriptionId !== null && subscription.stripeSubscriptionId !== undefined;\n}\n/**\n * Check if subscription can be resumed (un-canceled)\n */ function canResumeSubscription(subscription) {\n    if (!subscription || !subscription.status) return false;\n    return subscription.status === _types_database__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && subscription.cancelAtPeriodEnd === true && subscription.stripeSubscriptionId !== null && subscription.stripeSubscriptionId !== undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUV6RCxPQUFPRTtBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTRyxzQkFBc0IxQixZQUE4RTtJQUNsSCxJQUFJLENBQUNBLGdCQUFnQixDQUFDQSxhQUFhQyxNQUFNLEVBQUUsT0FBTztJQUVsRCxPQUNFRCxhQUFhQyxNQUFNLEtBQUtILCtEQUFrQkEsQ0FBQ0ksTUFBTSxJQUNqRCxDQUFDRixhQUFhZSxpQkFBaUIsSUFDL0JmLGFBQWEyQixvQkFBb0IsS0FBSyxRQUN0QzNCLGFBQWEyQixvQkFBb0IsS0FBS3BCO0FBRTFDO0FBRUE7O0NBRUMsR0FDTSxTQUFTcUIsc0JBQXNCNUIsWUFBOEU7SUFDbEgsSUFBSSxDQUFDQSxnQkFBZ0IsQ0FBQ0EsYUFBYUMsTUFBTSxFQUFFLE9BQU87SUFFbEQsT0FDRUQsYUFBYUMsTUFBTSxLQUFLSCwrREFBa0JBLENBQUNJLE1BQU0sSUFDakRGLGFBQWFlLGlCQUFpQixLQUFLLFFBQ25DZixhQUFhMkIsb0JBQW9CLEtBQUssUUFDdEMzQixhQUFhMkIsb0JBQW9CLEtBQUtwQjtBQUUxQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy91dGlscy9zdWJzY3JpcHRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3Vic2NyaXB0aW9uU3RhdHVzIH0gZnJvbSBcIn4vdHlwZXMvZGF0YWJhc2VcIjtcbmltcG9ydCB0eXBlIHsgU3Vic2NyaXB0aW9uIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbi8vIE1pbmltYWwgc3Vic2NyaXB0aW9uIGRhdGEgbmVlZGVkIGZvciBzdGF0dXMgY2hlY2tzXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmlwdGlvbkRhdGEge1xuICBzdGF0dXM6IFN1YnNjcmlwdGlvblN0YXR1cztcbiAgZXhwaXJlc0F0OiBEYXRlIHwgbnVsbDtcbiAgY3VycmVudFBlcmlvZEVuZDogRGF0ZSB8IG51bGw7XG4gIGNhbmNlbEF0UGVyaW9kRW5kOiBib29sZWFuO1xuICB0cmlhbEVuZHNBdD86IERhdGUgfCBudWxsO1xuICBzdHJpcGVTdWJzY3JpcHRpb25JZD86IHN0cmluZyB8IG51bGw7XG59XG5cbi8vIFBhcnRpYWwgc3Vic2NyaXB0aW9uIGRhdGEgKGZyb20gQVBJIHJlc3BvbnNlcylcbmV4cG9ydCB0eXBlIFBhcnRpYWxTdWJzY3JpcHRpb25EYXRhID0gUGFydGlhbDxTdWJzY3JpcHRpb25EYXRhPiAmIHtcbiAgc3RhdHVzPzogU3Vic2NyaXB0aW9uU3RhdHVzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3Vic2NyaXB0aW9uIGlzIGN1cnJlbnRseSBhY3RpdmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3Vic2NyaXB0aW9uQWN0aXZlKHN1YnNjcmlwdGlvbjogUGFydGlhbFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb25EYXRhIHwgU3Vic2NyaXB0aW9uIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXN1YnNjcmlwdGlvbiB8fCAhc3Vic2NyaXB0aW9uLnN0YXR1cykgcmV0dXJuIGZhbHNlO1xuICBcbiAgcmV0dXJuIChcbiAgICBzdWJzY3JpcHRpb24uc3RhdHVzID09PSBTdWJzY3JpcHRpb25TdGF0dXMuQUNUSVZFICYmXG4gICAgKCFzdWJzY3JpcHRpb24uZXhwaXJlc0F0IHx8IHN1YnNjcmlwdGlvbi5leHBpcmVzQXQgPiBuZXcgRGF0ZSgpKVxuICApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3Vic2NyaXB0aW9uIGlzIGluIHRyaWFsIHBlcmlvZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdWJzY3JpcHRpb25JblRyaWFsKHN1YnNjcmlwdGlvbjogUGFydGlhbFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb25EYXRhIHwgU3Vic2NyaXB0aW9uIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXN1YnNjcmlwdGlvbiB8fCAhc3Vic2NyaXB0aW9uLnN0YXR1cykgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gQ2hlY2sgaWYgc3Vic2NyaXB0aW9uIGlzIGFjdGl2ZSBhbmQgaGFzIGEgdHJpYWwgZW5kIGRhdGUgaW4gdGhlIGZ1dHVyZVxuICByZXR1cm4gKFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUgJiZcbiAgICBzdWJzY3JpcHRpb24udHJpYWxFbmRzQXQgIT09IG51bGwgJiZcbiAgICBzdWJzY3JpcHRpb24udHJpYWxFbmRzQXQgIT09IHVuZGVmaW5lZCAmJlxuICAgIHN1YnNjcmlwdGlvbi50cmlhbEVuZHNBdCA+IG5ldyBEYXRlKClcbiAgKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHN1YnNjcmlwdGlvbiBuZWVkcyByZW5ld2FsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb2VzU3Vic2NyaXB0aW9uTmVlZFJlbmV3YWwoc3Vic2NyaXB0aW9uOiBQYXJ0aWFsU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb24gfCBudWxsKTogYm9vbGVhbiB7XG4gIGlmICghc3Vic2NyaXB0aW9uIHx8ICFzdWJzY3JpcHRpb24uc3RhdHVzKSByZXR1cm4gZmFsc2U7XG4gIFxuICBjb25zdCBuZWVkc1JlbmV3YWwgPSBcbiAgICBzdWJzY3JpcHRpb24uc3RhdHVzID09PSBTdWJzY3JpcHRpb25TdGF0dXMuUEFTVF9EVUUgfHxcbiAgICBzdWJzY3JpcHRpb24uc3RhdHVzID09PSBTdWJzY3JpcHRpb25TdGF0dXMuQ0FOQ0VMRUQgfHxcbiAgICBzdWJzY3JpcHRpb24uc3RhdHVzID09PSBTdWJzY3JpcHRpb25TdGF0dXMuRVhQSVJFRCB8fFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5QRU5ESU5HO1xuICAgIFxuICByZXR1cm4gbmVlZHNSZW5ld2FsO1xufVxuXG4vKipcbiAqIEdldCBodW1hbi1yZWFkYWJsZSBzdWJzY3JpcHRpb24gc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWJzY3JpcHRpb25TdGF0dXNMYWJlbChzdWJzY3JpcHRpb246IFBhcnRpYWxTdWJzY3JpcHRpb25EYXRhIHwgU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBzdHJpbmcge1xuICBpZiAoIXN1YnNjcmlwdGlvbiB8fCAhc3Vic2NyaXB0aW9uLnN0YXR1cykgcmV0dXJuIFwiTm8gU3Vic2NyaXB0aW9uXCI7XG4gIFxuICBzd2l0Y2ggKHN1YnNjcmlwdGlvbi5zdGF0dXMpIHtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkU6XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmNhbmNlbEF0UGVyaW9kRW5kID8gXCJBY3RpdmUgKENhbmNlbGluZylcIiA6IFwiQWN0aXZlXCI7XG4gICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0dXMuUEVORElORzpcbiAgICAgIHJldHVybiBcIlBlbmRpbmdcIjtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5QQVNUX0RVRTpcbiAgICAgIHJldHVybiBcIlBhc3QgRHVlXCI7XG4gICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0dXMuQ0FOQ0VMRUQ6XG4gICAgICByZXR1cm4gXCJDYW5jZWxlZFwiO1xuICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdHVzLkVYUElSRUQ6XG4gICAgICByZXR1cm4gXCJFeHBpcmVkXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIlVua25vd25cIjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBzdWJzY3JpcHRpb24gc3RhdHVzIGNvbG9yIGZvciBVSVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3Vic2NyaXB0aW9uU3RhdHVzQ29sb3Ioc3Vic2NyaXB0aW9uOiBQYXJ0aWFsU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb24gfCBudWxsKTogc3RyaW5nIHtcbiAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5zdGF0dXMpIHJldHVybiBcImdyYXlcIjtcbiAgXG4gIHN3aXRjaCAoc3Vic2NyaXB0aW9uLnN0YXR1cykge1xuICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdHVzLkFDVElWRTpcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uY2FuY2VsQXRQZXJpb2RFbmQgPyBcInllbGxvd1wiIDogXCJncmVlblwiO1xuICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdHVzLlBFTkRJTkc6XG4gICAgICByZXR1cm4gXCJ5ZWxsb3dcIjtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5QQVNUX0RVRTpcbiAgICAgIHJldHVybiBcInJlZFwiO1xuICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdHVzLkNBTkNFTEVEOlxuICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdHVzLkVYUElSRUQ6XG4gICAgICByZXR1cm4gXCJncmF5XCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcImdyYXlcIjtcbiAgfVxufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBkYXlzIHVudGlsIHN1YnNjcmlwdGlvbiBleHBpcmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXlzVW50aWxFeHBpcnkoc3Vic2NyaXB0aW9uOiBQYXJ0aWFsU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb24gfCBudWxsKTogbnVtYmVyIHwgbnVsbCB7XG4gIGlmICghc3Vic2NyaXB0aW9uIHx8ICFzdWJzY3JpcHRpb24uY3VycmVudFBlcmlvZEVuZCkgcmV0dXJuIG51bGw7XG4gIFxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBleHBpcnlEYXRlID0gbmV3IERhdGUoc3Vic2NyaXB0aW9uLmN1cnJlbnRQZXJpb2RFbmQpO1xuICBjb25zdCBkaWZmVGltZSA9IGV4cGlyeURhdGUuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKTtcbiAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICBcbiAgcmV0dXJuIGRpZmZEYXlzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHN1YnNjcmlwdGlvbiBjYW4gYmUgY2FuY2VsZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbkNhbmNlbFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb246IFBhcnRpYWxTdWJzY3JpcHRpb25EYXRhIHwgU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBib29sZWFuIHtcbiAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5zdGF0dXMpIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiAoXG4gICAgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gU3Vic2NyaXB0aW9uU3RhdHVzLkFDVElWRSAmJlxuICAgICFzdWJzY3JpcHRpb24uY2FuY2VsQXRQZXJpb2RFbmQgJiZcbiAgICBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQgIT09IG51bGwgJiZcbiAgICBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQgIT09IHVuZGVmaW5lZFxuICApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHN1YnNjcmlwdGlvbiBjYW4gYmUgcmVzdW1lZCAodW4tY2FuY2VsZWQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYW5SZXN1bWVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uOiBQYXJ0aWFsU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb24gfCBudWxsKTogYm9vbGVhbiB7XG4gIGlmICghc3Vic2NyaXB0aW9uIHx8ICFzdWJzY3JpcHRpb24uc3RhdHVzKSByZXR1cm4gZmFsc2U7XG4gIFxuICByZXR1cm4gKFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUgJiZcbiAgICBzdWJzY3JpcHRpb24uY2FuY2VsQXRQZXJpb2RFbmQgPT09IHRydWUgJiZcbiAgICBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQgIT09IG51bGwgJiZcbiAgICBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQgIT09IHVuZGVmaW5lZFxuICApO1xufSJdLCJuYW1lcyI6WyJTdWJzY3JpcHRpb25TdGF0dXMiLCJpc1N1YnNjcmlwdGlvbkFjdGl2ZSIsInN1YnNjcmlwdGlvbiIsInN0YXR1cyIsIkFDVElWRSIsImV4cGlyZXNBdCIsIkRhdGUiLCJpc1N1YnNjcmlwdGlvbkluVHJpYWwiLCJ0cmlhbEVuZHNBdCIsInVuZGVmaW5lZCIsImRvZXNTdWJzY3JpcHRpb25OZWVkUmVuZXdhbCIsIm5lZWRzUmVuZXdhbCIsIlBBU1RfRFVFIiwiQ0FOQ0VMRUQiLCJFWFBJUkVEIiwiUEVORElORyIsImdldFN1YnNjcmlwdGlvblN0YXR1c0xhYmVsIiwiY2FuY2VsQXRQZXJpb2RFbmQiLCJnZXRTdWJzY3JpcHRpb25TdGF0dXNDb2xvciIsImdldERheXNVbnRpbEV4cGlyeSIsImN1cnJlbnRQZXJpb2RFbmQiLCJub3ciLCJleHBpcnlEYXRlIiwiZGlmZlRpbWUiLCJnZXRUaW1lIiwiZGlmZkRheXMiLCJNYXRoIiwiY2VpbCIsImNhbkNhbmNlbFN1YnNjcmlwdGlvbiIsInN0cmlwZVN1YnNjcmlwdGlvbklkIiwiY2FuUmVzdW1lU3Vic2NyaXB0aW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/subscription.ts\n");

/***/ }),

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "@t3-oss/env-nextjs":
/*!*************************************!*\
  !*** external "@t3-oss/env-nextjs" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("@t3-oss/env-nextjs");;

/***/ }),

/***/ "@trpc/server":
/*!*******************************!*\
  !*** external "@trpc/server" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("@trpc/server");;

/***/ }),

/***/ "@trpc/server/adapters/next":
/*!*********************************************!*\
  !*** external "@trpc/server/adapters/next" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = import("@trpc/server/adapters/next");;

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("bcryptjs");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "crypto-js":
/*!****************************!*\
  !*** external "crypto-js" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("crypto-js");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("stripe");;

/***/ }),

/***/ "superjson":
/*!****************************!*\
  !*** external "superjson" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("superjson");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1"], () => (__webpack_exec__("(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();