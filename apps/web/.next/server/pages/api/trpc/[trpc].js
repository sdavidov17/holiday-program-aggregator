"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/trpc/[trpc]";
exports.ids = ["pages/api/trpc/[trpc]"];
exports.modules = {

/***/ "(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   handler: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/api-utils */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/api-utils/index.js\");\n/* harmony import */ var next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/pages/api/trpc/[trpc].ts */ \"(api-node)/./src/pages/api/trpc/[trpc].ts\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__]);\n_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the userland code.\n\n\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_3__.hoist)(_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_2__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/trpc/[trpc]\",\n        pathname: \"/api/trpc/[trpc]\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_4__,\n    distDir: \".next\" || 0,\n    projectDir:  false || ''\n});\nasync function handler(req, res, ctx) {\n    let srcPage = \"/api/trpc/[trpc]\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {}\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.getTracer)();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: undefined,\n                multiZoneDraftMode: Boolean(\"false\"),\n                trustHostHeader: undefined,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/trpc/[trpc]\",\n                projectDir:  false || '',\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_6__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_5__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        (0,next_dist_server_api_utils__WEBPACK_IMPORTED_MODULE_0__.sendError)(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS40LjVfQGJhYmVsK2NvcmVANy4yOC4wX0BwbGF5d3JpZ2h0K3Rlc3RAMS41NC4xX3JlYWN0LWRvbUAxOS4xLjFfcmVhY3RAMTkuMS4xL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRnRycGMlMkYlNUJ0cnBjJTVELnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNDO0FBQ3VDO0FBQ3JDO0FBQzFEO0FBQzJEO0FBQ2E7QUFDRjtBQUN0RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsZ0JBQWdCLE1BQXVDO0FBQ3ZELENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1DQUFtQztBQUMvQztBQUNBO0FBQ0EsdUJBQXVCLDRFQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLDZDQUE2QyxTQUE2QztBQUMxRiw0Q0FBNEMsT0FBd0M7QUFDcEYsaUNBQWlDLFNBQW9DO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixNQUF1QztBQUNuRTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGdGQUFjO0FBQy9FLCtEQUErRCx5Q0FBeUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUSxFQUFFLE1BQU07QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxrQkFBa0I7QUFDbEIsdUNBQXVDLFFBQVEsRUFBRSxRQUFRO0FBQ3pEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscUVBQVM7QUFDakIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlbmRFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwaS11dGlsc1wiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL3RycGMvW3RycGNdLnRzXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RycGMvW3RycGNdXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdHJwYy9bdHJwY11cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZCxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnXG59KTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS90cnBjL1t0cnBjXVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcXVlcnksIHBhcmFtcywgcHJlcmVuZGVyTWFuaWZlc3QgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICAgICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgICAgIGNvbnN0IG9uUmVxdWVzdEVycm9yID0gcm91dGVNb2R1bGUuaW5zdHJ1bWVudGF0aW9uT25SZXF1ZXN0RXJyb3IuYmluZChyb3V0ZU1vZHVsZSk7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT5yb3V0ZU1vZHVsZS5yZW5kZXIocmVxLCByZXMsIHtcbiAgICAgICAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgICAgICAgICAuLi5xdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgYWxsb3dlZFJldmFsaWRhdGVIZWFkZXJLZXlzOiBwcm9jZXNzLmVudi5fX05FWFRfQUxMT1dFRF9SRVZBTElEQVRFX0hFQURFUlMsXG4gICAgICAgICAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlOiBCb29sZWFuKHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREUpLFxuICAgICAgICAgICAgICAgIHRydXN0SG9zdEhlYWRlcjogcHJvY2Vzcy5lbnYuX19ORVhUX1RSVVNUX0hPU1RfSEVBREVSLFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGdldCB0aGlzIGZyb20gZnJvbSBydW50aW1lIGVudiBzbyBtYW5pZmVzdFxuICAgICAgICAgICAgICAgIC8vIGRvZXNuJ3QgbmVlZCB0byBsb2FkXG4gICAgICAgICAgICAgICAgcHJldmlld1Byb3BzOiBwcmVyZW5kZXJNYW5pZmVzdC5wcmV2aWV3LFxuICAgICAgICAgICAgICAgIHByb3BhZ2F0ZUVycm9yOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkZXY6IHJvdXRlTW9kdWxlLmlzRGV2LFxuICAgICAgICAgICAgICAgIHBhZ2U6IFwiL2FwaS90cnBjL1t0cnBjXVwiLFxuICAgICAgICAgICAgICAgIHByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoLi4uYXJncyk9Pm9uUmVxdWVzdEVycm9yKHJlcSwgLi4uYXJncylcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGludm9rZVJvdXRlTW9kdWxlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gd2UgcmUtdGhyb3cgaW4gZGV2IHRvIHNob3cgdGhlIGVycm9yIG92ZXJsYXlcbiAgICAgICAgaWYgKHJvdXRlTW9kdWxlLmlzRGV2KSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGhpcyBpcyB0ZWNobmljYWxseSBhbiBpbnZhcmlhbnQgYXMgZXJyb3IgaGFuZGxpbmdcbiAgICAgICAgLy8gc2hvdWxkIGJlIGRvbmUgaW5zaWRlIG9mIGFwaS1yZXNvbHZlciBvbkVycm9yXG4gICAgICAgIHNlbmRFcnJvcihyZXMsIDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xuICAgIH0gZmluYWxseXtcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWxsb3cgYW55IHdhaXRVbnRpbCB3b3JrIGluIHBhZ2VzIEFQSSByb3V0ZXMgY3VycmVudGx5XG4gICAgICAgIC8vIHNvIGlmIGNhbGxiYWNrIGlzIHByZXNlbnQgcmV0dXJuIHdpdGggcmVzb2x2ZWQgcHJvbWlzZSBzaW5jZSBub1xuICAgICAgICAvLyBwZW5kaW5nIHdvcmtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/env.mjs":
/*!*********************!*\
  !*** ./src/env.mjs ***!
  \*********************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var _t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @t3-oss/env-nextjs */ \"@t3-oss/env-nextjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst env = (0,_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_0__.createEnv)({\n    /**\n   * Specify your server-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars.\n   */ server: {\n        DATABASE_URL: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().url().refine((str)=>!str.includes(\"YOUR_MYSQL_URL_HERE\"), \"You forgot to change the default URL\"),\n        NODE_ENV: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n            \"development\",\n            \"test\",\n            \"production\"\n        ]).default(\"development\"),\n        NEXTAUTH_SECRET:  false ? 0 : zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1).optional(),\n        NEXTAUTH_URL: zod__WEBPACK_IMPORTED_MODULE_1__.z.preprocess(// This makes Vercel deployments not fail if you don't set NEXTAUTH_URL\n        // Since NextAuth.js automatically uses the VERCEL_URL if present.\n        (str)=>process.env.VERCEL_URL ?? str, // VERCEL_URL doesn't include `https` so it cant be validated as a URL\n        process.env.VERCEL ? zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1) : zod__WEBPACK_IMPORTED_MODULE_1__.z.string().url()),\n        // Add `.min(1) on ID and SECRET if you want to make sure they're not empty\n        DISCORD_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        DISCORD_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        GOOGLE_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        GOOGLE_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        APPLE_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        APPLE_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        ENCRYPTION_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(32).optional(),\n        // Stripe\n        STRIPE_SECRET_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        STRIPE_WEBHOOK_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        STRIPE_ANNUAL_PRICE_ID: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        // Cron and Email\n        CRON_SECRET: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n        RESEND_API_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional()\n    },\n    /**\n   * Specify your client-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars. To expose them to the client, prefix them with\n   * `NEXT_PUBLIC_`.\n   */ client: {\n        // NEXT_PUBLIC_CLIENTVAR: z.string().min(1),\n        NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional()\n    },\n    /**\n   * You can't destruct `process.env` as a regular object in the Next.js edge runtimes (e.g.\n   * middlewares) or client-side so we need to destruct manually.\n   */ runtimeEnv: {\n        DATABASE_URL: process.env.DATABASE_URL,\n        NODE_ENV: \"development\",\n        NEXTAUTH_SECRET: process.env.NEXTAUTH_SECRET,\n        NEXTAUTH_URL: process.env.NEXTAUTH_URL,\n        DISCORD_CLIENT_ID: process.env.DISCORD_CLIENT_ID,\n        DISCORD_CLIENT_SECRET: process.env.DISCORD_CLIENT_SECRET,\n        GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n        GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\n        APPLE_ID: process.env.APPLE_ID,\n        APPLE_SECRET: process.env.APPLE_SECRET,\n        ENCRYPTION_KEY: process.env.ENCRYPTION_KEY,\n        STRIPE_SECRET_KEY: process.env.STRIPE_SECRET_KEY,\n        STRIPE_WEBHOOK_SECRET: process.env.STRIPE_WEBHOOK_SECRET,\n        STRIPE_ANNUAL_PRICE_ID: process.env.STRIPE_ANNUAL_PRICE_ID,\n        NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: \"pk_test_51RsuoiKWyOIMnViyU30z0n4HddlpzgdTqR1gFAk8v3c4sy0OiHglFBCSxxOfeJyRyAX40HM3esEMoMCOEBsW9Ewc00MgNG6E1G\",\n        CRON_SECRET: process.env.CRON_SECRET,\n        RESEND_API_KEY: process.env.RESEND_API_KEY\n    },\n    /**\n   * Run `build` or `dev` with `SKIP_ENV_VALIDATION` to skip env validation. This is especially\n   * useful for Docker builds.\n   */ skipValidation: !!process.env.SKIP_ENV_VALIDATION,\n    /**\n   * Makes it so that empty strings are treated as undefined.\n   * `SOME_VAR: z.string()` and `SOME_VAR=''` will throw an error.\n   */ emptyStringAsUndefined: true\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0JoQixRQUFRWixHQUFHLENBQUM0QixzQkFBc0I7UUFDMURJLG9DQUFvQ3BCLDZHQUE4QztRQUNsRmlCLGFBQWFqQixRQUFRWixHQUFHLENBQUM2QixXQUFXO1FBQ3BDQyxnQkFBZ0JsQixRQUFRWixHQUFHLENBQUM4QixjQUFjO0lBQzVDO0lBQ0E7OztHQUdDLEdBQ0RJLGdCQUFnQixDQUFDLENBQUN0QixRQUFRWixHQUFHLENBQUNtQyxtQkFBbUI7SUFDakQ7OztHQUdDLEdBQ0RDLHdCQUF3QjtBQUMxQixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL2Vudi5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlRW52IH0gZnJvbSBcIkB0My1vc3MvZW52LW5leHRqc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuZXhwb3J0IGNvbnN0IGVudiA9IGNyZWF0ZUVudih7XG4gIC8qKlxuICAgKiBTcGVjaWZ5IHlvdXIgc2VydmVyLXNpZGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIHNjaGVtYSBoZXJlLiBUaGlzIHdheSB5b3UgY2FuIGVuc3VyZSB0aGUgYXBwXG4gICAqIGlzbid0IGJ1aWx0IHdpdGggaW52YWxpZCBlbnYgdmFycy5cbiAgICovXG4gIHNlcnZlcjoge1xuICAgIERBVEFCQVNFX1VSTDogelxuICAgICAgLnN0cmluZygpXG4gICAgICAudXJsKClcbiAgICAgIC5yZWZpbmUoXG4gICAgICAgIChzdHIpID0+ICFzdHIuaW5jbHVkZXMoXCJZT1VSX01ZU1FMX1VSTF9IRVJFXCIpLFxuICAgICAgICBcIllvdSBmb3Jnb3QgdG8gY2hhbmdlIHRoZSBkZWZhdWx0IFVSTFwiXG4gICAgICApLFxuICAgIE5PREVfRU5WOiB6XG4gICAgICAuZW51bShbXCJkZXZlbG9wbWVudFwiLCBcInRlc3RcIiwgXCJwcm9kdWN0aW9uXCJdKVxuICAgICAgLmRlZmF1bHQoXCJkZXZlbG9wbWVudFwiKSxcbiAgICBORVhUQVVUSF9TRUNSRVQ6XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCJcbiAgICAgICAgPyB6LnN0cmluZygpLm1pbigxKVxuICAgICAgICA6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gICAgTkVYVEFVVEhfVVJMOiB6LnByZXByb2Nlc3MoXG4gICAgICAvLyBUaGlzIG1ha2VzIFZlcmNlbCBkZXBsb3ltZW50cyBub3QgZmFpbCBpZiB5b3UgZG9uJ3Qgc2V0IE5FWFRBVVRIX1VSTFxuICAgICAgLy8gU2luY2UgTmV4dEF1dGguanMgYXV0b21hdGljYWxseSB1c2VzIHRoZSBWRVJDRUxfVVJMIGlmIHByZXNlbnQuXG4gICAgICAoc3RyKSA9PiBwcm9jZXNzLmVudi5WRVJDRUxfVVJMID8/IHN0cixcbiAgICAgIC8vIFZFUkNFTF9VUkwgZG9lc24ndCBpbmNsdWRlIGBodHRwc2Agc28gaXQgY2FudCBiZSB2YWxpZGF0ZWQgYXMgYSBVUkxcbiAgICAgIHByb2Nlc3MuZW52LlZFUkNFTCA/IHouc3RyaW5nKCkubWluKDEpIDogei5zdHJpbmcoKS51cmwoKVxuICAgICksXG4gICAgLy8gQWRkIGAubWluKDEpIG9uIElEIGFuZCBTRUNSRVQgaWYgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXkncmUgbm90IGVtcHR5XG4gICAgRElTQ09SRF9DTElFTlRfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBESVNDT1JEX0NMSUVOVF9TRUNSRVQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBHT09HTEVfQ0xJRU5UX0lEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgR09PR0xFX0NMSUVOVF9TRUNSRVQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBBUFBMRV9JRDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIEFQUExFX1NFQ1JFVDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIEVOQ1JZUFRJT05fS0VZOiB6LnN0cmluZygpLm1pbigzMikub3B0aW9uYWwoKSxcbiAgICAvLyBTdHJpcGVcbiAgICBTVFJJUEVfU0VDUkVUX0tFWTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIFNUUklQRV9XRUJIT09LX1NFQ1JFVDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIFNUUklQRV9BTk5VQUxfUFJJQ0VfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvLyBDcm9uIGFuZCBFbWFpbFxuICAgIENST05fU0VDUkVUOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgUkVTRU5EX0FQSV9LRVk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgfSxcblxuICAvKipcbiAgICogU3BlY2lmeSB5b3VyIGNsaWVudC1zaWRlIGVudmlyb25tZW50IHZhcmlhYmxlcyBzY2hlbWEgaGVyZS4gVGhpcyB3YXkgeW91IGNhbiBlbnN1cmUgdGhlIGFwcFxuICAgKiBpc24ndCBidWlsdCB3aXRoIGludmFsaWQgZW52IHZhcnMuIFRvIGV4cG9zZSB0aGVtIHRvIHRoZSBjbGllbnQsIHByZWZpeCB0aGVtIHdpdGhcbiAgICogYE5FWFRfUFVCTElDX2AuXG4gICAqL1xuICBjbGllbnQ6IHtcbiAgICAvLyBORVhUX1BVQkxJQ19DTElFTlRWQVI6IHouc3RyaW5nKCkubWluKDEpLFxuICAgIE5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgfSxcblxuICAvKipcbiAgICogWW91IGNhbid0IGRlc3RydWN0IGBwcm9jZXNzLmVudmAgYXMgYSByZWd1bGFyIG9iamVjdCBpbiB0aGUgTmV4dC5qcyBlZGdlIHJ1bnRpbWVzIChlLmcuXG4gICAqIG1pZGRsZXdhcmVzKSBvciBjbGllbnQtc2lkZSBzbyB3ZSBuZWVkIHRvIGRlc3RydWN0IG1hbnVhbGx5LlxuICAgKi9cbiAgcnVudGltZUVudjoge1xuICAgIERBVEFCQVNFX1VSTDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLFxuICAgIE5PREVfRU5WOiBwcm9jZXNzLmVudi5OT0RFX0VOVixcbiAgICBORVhUQVVUSF9TRUNSRVQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbiAgICBORVhUQVVUSF9VUkw6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCxcbiAgICBESVNDT1JEX0NMSUVOVF9JRDogcHJvY2Vzcy5lbnYuRElTQ09SRF9DTElFTlRfSUQsXG4gICAgRElTQ09SRF9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5ESVNDT1JEX0NMSUVOVF9TRUNSRVQsXG4gICAgR09PR0xFX0NMSUVOVF9JRDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcbiAgICBHT09HTEVfQ0xJRU5UX1NFQ1JFVDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgQVBQTEVfSUQ6IHByb2Nlc3MuZW52LkFQUExFX0lELFxuICAgIEFQUExFX1NFQ1JFVDogcHJvY2Vzcy5lbnYuQVBQTEVfU0VDUkVULFxuICAgIEVOQ1JZUFRJT05fS0VZOiBwcm9jZXNzLmVudi5FTkNSWVBUSU9OX0tFWSxcbiAgICBTVFJJUEVfU0VDUkVUX0tFWTogcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVksXG4gICAgU1RSSVBFX1dFQkhPT0tfU0VDUkVUOiBwcm9jZXNzLmVudi5TVFJJUEVfV0VCSE9PS19TRUNSRVQsXG4gICAgU1RSSVBFX0FOTlVBTF9QUklDRV9JRDogcHJvY2Vzcy5lbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCxcbiAgICBORVhUX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZLFxuICAgIENST05fU0VDUkVUOiBwcm9jZXNzLmVudi5DUk9OX1NFQ1JFVCxcbiAgICBSRVNFTkRfQVBJX0tFWTogcHJvY2Vzcy5lbnYuUkVTRU5EX0FQSV9LRVksXG4gIH0sXG4gIC8qKlxuICAgKiBSdW4gYGJ1aWxkYCBvciBgZGV2YCB3aXRoIGBTS0lQX0VOVl9WQUxJREFUSU9OYCB0byBza2lwIGVudiB2YWxpZGF0aW9uLiBUaGlzIGlzIGVzcGVjaWFsbHlcbiAgICogdXNlZnVsIGZvciBEb2NrZXIgYnVpbGRzLlxuICAgKi9cbiAgc2tpcFZhbGlkYXRpb246ICEhcHJvY2Vzcy5lbnYuU0tJUF9FTlZfVkFMSURBVElPTixcbiAgLyoqXG4gICAqIE1ha2VzIGl0IHNvIHRoYXQgZW1wdHkgc3RyaW5ncyBhcmUgdHJlYXRlZCBhcyB1bmRlZmluZWQuXG4gICAqIGBTT01FX1ZBUjogei5zdHJpbmcoKWAgYW5kIGBTT01FX1ZBUj0nJ2Agd2lsbCB0aHJvdyBhbiBlcnJvci5cbiAgICovXG4gIGVtcHR5U3RyaW5nQXNVbmRlZmluZWQ6IHRydWUsXG59KTsiXSwibmFtZXMiOlsiY3JlYXRlRW52IiwieiIsImVudiIsInNlcnZlciIsIkRBVEFCQVNFX1VSTCIsInN0cmluZyIsInVybCIsInJlZmluZSIsInN0ciIsImluY2x1ZGVzIiwiTk9ERV9FTlYiLCJlbnVtIiwiZGVmYXVsdCIsIk5FWFRBVVRIX1NFQ1JFVCIsInByb2Nlc3MiLCJtaW4iLCJvcHRpb25hbCIsIk5FWFRBVVRIX1VSTCIsInByZXByb2Nlc3MiLCJWRVJDRUxfVVJMIiwiVkVSQ0VMIiwiRElTQ09SRF9DTElFTlRfSUQiLCJESVNDT1JEX0NMSUVOVF9TRUNSRVQiLCJHT09HTEVfQ0xJRU5UX0lEIiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJBUFBMRV9JRCIsIkFQUExFX1NFQ1JFVCIsIkVOQ1JZUFRJT05fS0VZIiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJTVFJJUEVfQU5OVUFMX1BSSUNFX0lEIiwiQ1JPTl9TRUNSRVQiLCJSRVNFTkRfQVBJX0tFWSIsImNsaWVudCIsIk5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVkiLCJydW50aW1lRW52Iiwic2tpcFZhbGlkYXRpb24iLCJTS0lQX0VOVl9WQUxJREFUSU9OIiwiZW1wdHlTdHJpbmdBc1VuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/env.mjs\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/trpc/[trpc].ts":
/*!**************************************!*\
  !*** ./src/pages/api/trpc/[trpc].ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server/adapters/next */ \"@trpc/server/adapters/next\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _server_api_root__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/server/api/root */ \"(api-node)/./src/server/api/root.ts\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__, _server_api_root__WEBPACK_IMPORTED_MODULE_2__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__]);\n([_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__, _server_api_root__WEBPACK_IMPORTED_MODULE_2__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_0__.createNextApiHandler)({\n    router: _server_api_root__WEBPACK_IMPORTED_MODULE_2__.appRouter,\n    createContext: _server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.createTRPCContext,\n    onError: _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV === \"development\" ? ({ path, error, type, ctx, input })=>{\n        console.error(`‚ùå tRPC failed on ${path ?? \"<no-path>\"}: ${error.message}`);\n        console.error(\"Error details:\", {\n            path,\n            type,\n            input,\n            code: error.code,\n            httpStatus: error.httpStatus,\n            cause: error.cause\n        });\n    } : undefined\n}));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvdHJwYy9bdHJwY10udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0U7QUFFbEM7QUFDYztBQUNRO0FBRXRELGlFQUFlQSxnRkFBb0JBLENBQUM7SUFDbENJLFFBQVFGLHVEQUFTQTtJQUNqQkcsZUFBZUYsK0RBQWlCQTtJQUNoQ0csU0FDRUwseUNBQUdBLENBQUNNLFFBQVEsS0FBSyxnQkFDYixDQUFDLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFQyxJQUFJLEVBQUVDLEdBQUcsRUFBRUMsS0FBSyxFQUFFO1FBQ2hDQyxRQUFRSixLQUFLLENBQ1gsQ0FBQyxpQkFBaUIsRUFBRUQsUUFBUSxZQUFZLEVBQUUsRUFBRUMsTUFBTUssT0FBTyxFQUFFO1FBRTdERCxRQUFRSixLQUFLLENBQUMsa0JBQWtCO1lBQzlCRDtZQUNBRTtZQUNBRTtZQUNBRyxNQUFNTixNQUFNTSxJQUFJO1lBQ2hCQyxZQUFZLE1BQWVBLFVBQVU7WUFDckNDLE9BQU9SLE1BQU1RLEtBQUs7UUFDcEI7SUFDRixJQUNBQztBQUNSLEVBQUUsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9wYWdlcy9hcGkvdHJwYy9bdHJwY10udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTmV4dEFwaUhhbmRsZXIgfSBmcm9tIFwiQHRycGMvc2VydmVyL2FkYXB0ZXJzL25leHRcIjtcblxuaW1wb3J0IHsgZW52IH0gZnJvbSBcIn4vZW52Lm1qc1wiO1xuaW1wb3J0IHsgYXBwUm91dGVyIH0gZnJvbSBcIn4vc2VydmVyL2FwaS9yb290XCI7XG5pbXBvcnQgeyBjcmVhdGVUUlBDQ29udGV4dCB9IGZyb20gXCJ+L3NlcnZlci9hcGkvdHJwY1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVOZXh0QXBpSGFuZGxlcih7XG4gIHJvdXRlcjogYXBwUm91dGVyLFxuICBjcmVhdGVDb250ZXh0OiBjcmVhdGVUUlBDQ29udGV4dCxcbiAgb25FcnJvcjpcbiAgICBlbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIlxuICAgICAgPyAoeyBwYXRoLCBlcnJvciwgdHlwZSwgY3R4LCBpbnB1dCB9KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIGDinYwgdFJQQyBmYWlsZWQgb24gJHtwYXRoID8/IFwiPG5vLXBhdGg+XCJ9OiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZXRhaWxzOlwiLCB7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgY29kZTogZXJyb3IuY29kZSxcbiAgICAgICAgICAgIGh0dHBTdGF0dXM6IChlcnJvciBhcyBhbnkpLmh0dHBTdGF0dXMsXG4gICAgICAgICAgICBjYXVzZTogZXJyb3IuY2F1c2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIDogdW5kZWZpbmVkLFxufSk7Il0sIm5hbWVzIjpbImNyZWF0ZU5leHRBcGlIYW5kbGVyIiwiZW52IiwiYXBwUm91dGVyIiwiY3JlYXRlVFJQQ0NvbnRleHQiLCJyb3V0ZXIiLCJjcmVhdGVDb250ZXh0Iiwib25FcnJvciIsIk5PREVfRU5WIiwicGF0aCIsImVycm9yIiwidHlwZSIsImN0eCIsImlucHV0IiwiY29uc29sZSIsIm1lc3NhZ2UiLCJjb2RlIiwiaHR0cFN0YXR1cyIsImNhdXNlIiwidW5kZWZpbmVkIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/trpc/[trpc].ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/middleware/requireActiveSubscription.ts":
/*!****************************************************************!*\
  !*** ./src/server/api/middleware/requireActiveSubscription.ts ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requireActiveSubscriptionMiddleware: () => (/* binding */ requireActiveSubscriptionMiddleware)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/subscription */ \"(api-node)/./src/utils/subscription.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server__WEBPACK_IMPORTED_MODULE_0__]);\n_trpc_server__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst requireActiveSubscriptionMiddleware = async ({ ctx, next })=>{\n    if (!ctx.session?.user) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n            code: 'UNAUTHORIZED'\n        });\n    }\n    const subscription = await ctx.db.subscription.findUnique({\n        where: {\n            userId: ctx.session.user.id\n        }\n    });\n    if (!(0,_utils_subscription__WEBPACK_IMPORTED_MODULE_2__.isSubscriptionActive)(subscription)) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.warn('Access denied - no active subscription', {\n            userId: ctx.session.user.id,\n            subscriptionStatus: subscription?.status\n        });\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n            code: 'FORBIDDEN',\n            message: 'Active subscription required'\n        });\n    }\n    // Check if subscription has expired and needs status update\n    if (subscription && subscription.expiresAt && subscription.expiresAt < new Date() && subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.SubscriptionStatus.ACTIVE) {\n        // Update status to expired\n        await ctx.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: {\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_1__.SubscriptionStatus.EXPIRED\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info('Subscription expired and status updated', {\n            subscriptionId: subscription.id,\n            userId: ctx.session.user.id\n        });\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n            code: 'FORBIDDEN',\n            message: 'Subscription has expired'\n        });\n    }\n    return next({\n        ctx\n    });\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL21pZGRsZXdhcmUvcmVxdWlyZUFjdGl2ZVN1YnNjcmlwdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBeUM7QUFDVztBQUVRO0FBQ3BCO0FBRWpDLE1BQU1JLHNDQUFzQyxPQUFPLEVBQ3hEQyxHQUFHLEVBQ0hDLElBQUksRUFJTDtJQUNDLElBQUksQ0FBQ0QsSUFBSUUsT0FBTyxFQUFFQyxNQUFNO1FBQ3RCLE1BQU0sSUFBSVIsbURBQVNBLENBQUM7WUFBRVMsTUFBTTtRQUFlO0lBQzdDO0lBRUEsTUFBTUMsZUFBZSxNQUFNTCxJQUFJTSxFQUFFLENBQUNELFlBQVksQ0FBQ0UsVUFBVSxDQUFDO1FBQ3hEQyxPQUFPO1lBQUVDLFFBQVFULElBQUlFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDTyxFQUFFO1FBQUM7SUFDdkM7SUFFQSxJQUFJLENBQUNiLHlFQUFvQkEsQ0FBQ1EsZUFBZTtRQUN2Q1AsaURBQU1BLENBQUNhLElBQUksQ0FBQywwQ0FBMEM7WUFDcERGLFFBQVFULElBQUlFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDTyxFQUFFO1lBQzNCRSxvQkFBb0JQLGNBQWNRO1FBQ3BDO1FBRUEsTUFBTSxJQUFJbEIsbURBQVNBLENBQUM7WUFDbEJTLE1BQU07WUFDTlUsU0FBUztRQUNYO0lBQ0Y7SUFFQSw0REFBNEQ7SUFDNUQsSUFBSVQsZ0JBQWdCQSxhQUFhVSxTQUFTLElBQUlWLGFBQWFVLFNBQVMsR0FBRyxJQUFJQyxVQUFVWCxhQUFhUSxNQUFNLEtBQUtqQiw4REFBa0JBLENBQUNxQixNQUFNLEVBQUU7UUFDdEksMkJBQTJCO1FBQzNCLE1BQU1qQixJQUFJTSxFQUFFLENBQUNELFlBQVksQ0FBQ2EsTUFBTSxDQUFDO1lBQy9CVixPQUFPO2dCQUFFRSxJQUFJTCxhQUFhSyxFQUFFO1lBQUM7WUFDN0JTLE1BQU07Z0JBQUVOLFFBQVFqQiw4REFBa0JBLENBQUN3QixPQUFPO1lBQUM7UUFDN0M7UUFFQXRCLGlEQUFNQSxDQUFDdUIsSUFBSSxDQUFDLDJDQUEyQztZQUNyREMsZ0JBQWdCakIsYUFBYUssRUFBRTtZQUMvQkQsUUFBUVQsSUFBSUUsT0FBTyxDQUFDQyxJQUFJLENBQUNPLEVBQUU7UUFDN0I7UUFFQSxNQUFNLElBQUlmLG1EQUFTQSxDQUFDO1lBQ2xCUyxNQUFNO1lBQ05VLFNBQVM7UUFDWDtJQUNGO0lBRUEsT0FBT2IsS0FBSztRQUNWRDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2ZXIvYXBpL21pZGRsZXdhcmUvcmVxdWlyZUFjdGl2ZVN1YnNjcmlwdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tIFwiQHRycGMvc2VydmVyXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TdGF0dXMgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IHR5cGUgQ29udGV4dCB9IGZyb20gXCIuLi90cnBjXCI7XG5pbXBvcnQgeyBpc1N1YnNjcmlwdGlvbkFjdGl2ZSB9IGZyb20gXCJ+L3V0aWxzL3N1YnNjcmlwdGlvblwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIn4vdXRpbHMvbG9nZ2VyXCI7XG5cbmV4cG9ydCBjb25zdCByZXF1aXJlQWN0aXZlU3Vic2NyaXB0aW9uTWlkZGxld2FyZSA9IGFzeW5jICh7IFxuICBjdHgsIFxuICBuZXh0IFxufToge1xuICBjdHg6IENvbnRleHQ7XG4gIG5leHQ6IChvcHRzPzogeyBjdHg6IENvbnRleHQgfSkgPT4gUHJvbWlzZTx1bmtub3duPjtcbn0pID0+IHtcbiAgaWYgKCFjdHguc2Vzc2lvbj8udXNlcikge1xuICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiAnVU5BVVRIT1JJWkVEJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IGN0eC5kYi5zdWJzY3JpcHRpb24uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkIH1cbiAgfSk7XG5cbiAgaWYgKCFpc1N1YnNjcmlwdGlvbkFjdGl2ZShzdWJzY3JpcHRpb24pKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0FjY2VzcyBkZW5pZWQgLSBubyBhY3RpdmUgc3Vic2NyaXB0aW9uJywge1xuICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgc3Vic2NyaXB0aW9uU3RhdHVzOiBzdWJzY3JpcHRpb24/LnN0YXR1c1xuICAgIH0pO1xuICAgIFxuICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBcbiAgICAgIGNvZGU6ICdGT1JCSURERU4nLFxuICAgICAgbWVzc2FnZTogJ0FjdGl2ZSBzdWJzY3JpcHRpb24gcmVxdWlyZWQnXG4gICAgfSk7XG4gIH1cblxuICAvLyBDaGVjayBpZiBzdWJzY3JpcHRpb24gaGFzIGV4cGlyZWQgYW5kIG5lZWRzIHN0YXR1cyB1cGRhdGVcbiAgaWYgKHN1YnNjcmlwdGlvbiAmJiBzdWJzY3JpcHRpb24uZXhwaXJlc0F0ICYmIHN1YnNjcmlwdGlvbi5leHBpcmVzQXQgPCBuZXcgRGF0ZSgpICYmIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUpIHtcbiAgICAvLyBVcGRhdGUgc3RhdHVzIHRvIGV4cGlyZWRcbiAgICBhd2FpdCBjdHguZGIuc3Vic2NyaXB0aW9uLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogc3Vic2NyaXB0aW9uLmlkIH0sXG4gICAgICBkYXRhOiB7IHN0YXR1czogU3Vic2NyaXB0aW9uU3RhdHVzLkVYUElSRUQgfVxuICAgIH0pO1xuICAgIFxuICAgIGxvZ2dlci5pbmZvKCdTdWJzY3JpcHRpb24gZXhwaXJlZCBhbmQgc3RhdHVzIHVwZGF0ZWQnLCB7XG4gICAgICBzdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLmlkLFxuICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkXG4gICAgfSk7XG4gICAgXG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7IFxuICAgICAgY29kZTogJ0ZPUkJJRERFTicsXG4gICAgICBtZXNzYWdlOiAnU3Vic2NyaXB0aW9uIGhhcyBleHBpcmVkJ1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG5leHQoe1xuICAgIGN0eCxcbiAgfSk7XG59OyJdLCJuYW1lcyI6WyJUUlBDRXJyb3IiLCJTdWJzY3JpcHRpb25TdGF0dXMiLCJpc1N1YnNjcmlwdGlvbkFjdGl2ZSIsImxvZ2dlciIsInJlcXVpcmVBY3RpdmVTdWJzY3JpcHRpb25NaWRkbGV3YXJlIiwiY3R4IiwibmV4dCIsInNlc3Npb24iLCJ1c2VyIiwiY29kZSIsInN1YnNjcmlwdGlvbiIsImRiIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwidXNlcklkIiwiaWQiLCJ3YXJuIiwic3Vic2NyaXB0aW9uU3RhdHVzIiwic3RhdHVzIiwibWVzc2FnZSIsImV4cGlyZXNBdCIsIkRhdGUiLCJBQ1RJVkUiLCJ1cGRhdGUiLCJkYXRhIiwiRVhQSVJFRCIsImluZm8iLCJzdWJzY3JpcHRpb25JZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/middleware/requireActiveSubscription.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/root.ts":
/*!********************************!*\
  !*** ./src/server/api/root.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/routers/healthz */ \"(api-node)/./src/server/api/routers/healthz.ts\");\n/* harmony import */ var _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/server/api/routers/user */ \"(api-node)/./src/server/api/routers/user.ts\");\n/* harmony import */ var _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/server/api/routers/subscription */ \"(api-node)/./src/server/api/routers/subscription.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__, _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__, _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__]);\n([_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__, _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__, _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst appRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    healthz: _server_api_routers_healthz__WEBPACK_IMPORTED_MODULE_1__.healthzRouter,\n    user: _server_api_routers_user__WEBPACK_IMPORTED_MODULE_2__.userRouter,\n    subscription: _server_api_routers_subscription__WEBPACK_IMPORTED_MODULE_3__.subscriptionRouter\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3Jvb3QudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDUTtBQUNOO0FBQ2dCO0FBRWhFLE1BQU1JLFlBQVlKLGtFQUFnQkEsQ0FBQztJQUN4Q0ssU0FBU0osc0VBQWFBO0lBQ3RCSyxNQUFNSixnRUFBVUE7SUFDaEJLLGNBQWNKLGdGQUFrQkE7QUFDbEMsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2ZXIvYXBpL3Jvb3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciB9IGZyb20gXCJ+L3NlcnZlci9hcGkvdHJwY1wiO1xuaW1wb3J0IHsgaGVhbHRoelJvdXRlciB9IGZyb20gXCJ+L3NlcnZlci9hcGkvcm91dGVycy9oZWFsdGh6XCI7XG5pbXBvcnQgeyB1c2VyUm91dGVyIH0gZnJvbSBcIn4vc2VydmVyL2FwaS9yb3V0ZXJzL3VzZXJcIjtcbmltcG9ydCB7IHN1YnNjcmlwdGlvblJvdXRlciB9IGZyb20gXCJ+L3NlcnZlci9hcGkvcm91dGVycy9zdWJzY3JpcHRpb25cIjtcblxuZXhwb3J0IGNvbnN0IGFwcFJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBoZWFsdGh6OiBoZWFsdGh6Um91dGVyLFxuICB1c2VyOiB1c2VyUm91dGVyLFxuICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvblJvdXRlcixcbn0pO1xuXG5leHBvcnQgdHlwZSBBcHBSb3V0ZXIgPSB0eXBlb2YgYXBwUm91dGVyOyJdLCJuYW1lcyI6WyJjcmVhdGVUUlBDUm91dGVyIiwiaGVhbHRoelJvdXRlciIsInVzZXJSb3V0ZXIiLCJzdWJzY3JpcHRpb25Sb3V0ZXIiLCJhcHBSb3V0ZXIiLCJoZWFsdGh6IiwidXNlciIsInN1YnNjcmlwdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/root.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/healthz.ts":
/*!*******************************************!*\
  !*** ./src/server/api/routers/healthz.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   healthzRouter: () => (/* binding */ healthzRouter)\n/* harmony export */ });\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__]);\n_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst healthzRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    healthz: _server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.publicProcedure.query(()=>{\n        return {\n            status: \"ok\",\n            timestamp: new Date().toISOString()\n        };\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvaGVhbHRoei50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzRTtBQUUvRCxNQUFNRSxnQkFBZ0JGLGtFQUFnQkEsQ0FBQztJQUM1Q0csU0FBU0YsNkRBQWVBLENBQUNHLEtBQUssQ0FBQztRQUM3QixPQUFPO1lBQ0xDLFFBQVE7WUFDUkMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DO0lBQ0Y7QUFDRixHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3NlcnZlci9hcGkvcm91dGVycy9oZWFsdGh6LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVRSUENSb3V0ZXIsIHB1YmxpY1Byb2NlZHVyZSB9IGZyb20gXCJ+L3NlcnZlci9hcGkvdHJwY1wiO1xuXG5leHBvcnQgY29uc3QgaGVhbHRoelJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBoZWFsdGh6OiBwdWJsaWNQcm9jZWR1cmUucXVlcnkoKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IFwib2tcIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIH07XG4gIH0pLFxufSk7Il0sIm5hbWVzIjpbImNyZWF0ZVRSUENSb3V0ZXIiLCJwdWJsaWNQcm9jZWR1cmUiLCJoZWFsdGh6Um91dGVyIiwiaGVhbHRoeiIsInF1ZXJ5Iiwic3RhdHVzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/healthz.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/subscription.ts":
/*!************************************************!*\
  !*** ./src/server/api/routers/subscription.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   subscriptionRouter: () => (/* binding */ subscriptionRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/services/subscription.service */ \"(api-node)/./src/services/subscription.service.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst subscriptionRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    getSubscriptionStatus: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        return await service.getSubscriptionStatus(ctx.session.user.id);\n    }),\n    getStatus: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.query(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        const subscription = await service.getSubscription(ctx.session.user.id);\n        if (!subscription) {\n            return null;\n        }\n        return {\n            status: subscription.status,\n            expiresAt: subscription.expiresAt,\n            currentPeriodEnd: subscription.currentPeriodEnd,\n            cancelAtPeriodEnd: subscription.cancelAtPeriodEnd\n        };\n    }),\n    createCheckoutSession: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        priceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        const { user } = ctx.session;\n        const { req } = ctx;\n        // Build URLs for redirect\n        const host = req?.headers?.host ?? \"localhost:3000\";\n        const protocol = host.includes(\"localhost\") ? \"http\" : \"https\";\n        const baseUrl = `${protocol}://${host}`;\n        const successUrl = `${baseUrl}/subscription/success?session_id={CHECKOUT_SESSION_ID}`;\n        const cancelUrl = `${baseUrl}/subscription/cancelled`;\n        return await service.createCheckoutSession(user.id, user.email, successUrl, cancelUrl);\n    }),\n    cancelSubscription: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.mutation(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        return await service.cancelSubscription(ctx.session.user.id);\n    }),\n    resumeSubscription: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.mutation(async ({ ctx })=>{\n        const service = new _services_subscription_service__WEBPACK_IMPORTED_MODULE_2__.SubscriptionService(ctx.db);\n        return await service.resumeSubscription(ctx.session.user.id);\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvc3Vic2NyaXB0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0I7QUFDaUQ7QUFDSDtBQUUvRCxNQUFNSSxxQkFBcUJILGtFQUFnQkEsQ0FBQztJQUNqREksdUJBQXVCSCxnRUFBa0JBLENBQUNJLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUM1RCxNQUFNQyxVQUFVLElBQUlMLCtFQUFtQkEsQ0FBQ0ksSUFBSUUsRUFBRTtRQUM5QyxPQUFPLE1BQU1ELFFBQVFILHFCQUFxQixDQUFDRSxJQUFJRyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtJQUNoRTtJQUVBQyxXQUFXWCxnRUFBa0JBLENBQUNJLEtBQUssQ0FBQyxPQUFPLEVBQUVDLEdBQUcsRUFBRTtRQUNoRCxNQUFNQyxVQUFVLElBQUlMLCtFQUFtQkEsQ0FBQ0ksSUFBSUUsRUFBRTtRQUM5QyxNQUFNSyxlQUFlLE1BQU1OLFFBQVFPLGVBQWUsQ0FBQ1IsSUFBSUcsT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7UUFFdEUsSUFBSSxDQUFDRSxjQUFjO1lBQ2pCLE9BQU87UUFDVDtRQUVBLE9BQU87WUFDTEUsUUFBUUYsYUFBYUUsTUFBTTtZQUMzQkMsV0FBV0gsYUFBYUcsU0FBUztZQUNqQ0Msa0JBQWtCSixhQUFhSSxnQkFBZ0I7WUFDL0NDLG1CQUFtQkwsYUFBYUssaUJBQWlCO1FBQ25EO0lBQ0Y7SUFFQUMsdUJBQXVCbEIsZ0VBQWtCQSxDQUN0Q21CLEtBQUssQ0FDSnJCLGtDQUFDQSxDQUFDc0IsTUFBTSxDQUFDO1FBQ1BDLFNBQVN2QixrQ0FBQ0EsQ0FBQ3dCLE1BQU0sR0FBR0MsUUFBUTtJQUM5QixJQUVEQyxRQUFRLENBQUMsT0FBTyxFQUFFbkIsR0FBRyxFQUFFYyxLQUFLLEVBQUU7UUFDN0IsTUFBTWIsVUFBVSxJQUFJTCwrRUFBbUJBLENBQUNJLElBQUlFLEVBQUU7UUFDOUMsTUFBTSxFQUFFRSxJQUFJLEVBQUUsR0FBR0osSUFBSUcsT0FBTztRQUM1QixNQUFNLEVBQUVpQixHQUFHLEVBQUUsR0FBR3BCO1FBRWhCLDBCQUEwQjtRQUMxQixNQUFNcUIsT0FBT0QsS0FBS0UsU0FBU0QsUUFBUTtRQUNuQyxNQUFNRSxXQUFXRixLQUFLRyxRQUFRLENBQUMsZUFBZSxTQUFTO1FBQ3ZELE1BQU1DLFVBQVUsR0FBR0YsU0FBUyxHQUFHLEVBQUVGLE1BQU07UUFFdkMsTUFBTUssYUFBYSxHQUFHRCxRQUFRLHNEQUFzRCxDQUFDO1FBQ3JGLE1BQU1FLFlBQVksR0FBR0YsUUFBUSx1QkFBdUIsQ0FBQztRQUVyRCxPQUFPLE1BQU14QixRQUFRWSxxQkFBcUIsQ0FDeENULEtBQUtDLEVBQUUsRUFDUEQsS0FBS3dCLEtBQUssRUFDVkYsWUFDQUM7SUFFSjtJQUVGRSxvQkFBb0JsQyxnRUFBa0JBLENBQUN3QixRQUFRLENBQUMsT0FBTyxFQUFFbkIsR0FBRyxFQUFFO1FBQzVELE1BQU1DLFVBQVUsSUFBSUwsK0VBQW1CQSxDQUFDSSxJQUFJRSxFQUFFO1FBQzlDLE9BQU8sTUFBTUQsUUFBUTRCLGtCQUFrQixDQUFDN0IsSUFBSUcsT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7SUFDN0Q7SUFFQXlCLG9CQUFvQm5DLGdFQUFrQkEsQ0FBQ3dCLFFBQVEsQ0FBQyxPQUFPLEVBQUVuQixHQUFHLEVBQUU7UUFDNUQsTUFBTUMsVUFBVSxJQUFJTCwrRUFBbUJBLENBQUNJLElBQUlFLEVBQUU7UUFDOUMsT0FBTyxNQUFNRCxRQUFRNkIsa0JBQWtCLENBQUM5QixJQUFJRyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtJQUM3RDtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3N1YnNjcmlwdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciwgcHJvdGVjdGVkUHJvY2VkdXJlIH0gZnJvbSBcIn4vc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb25TZXJ2aWNlIH0gZnJvbSBcIn4vc2VydmljZXMvc3Vic2NyaXB0aW9uLnNlcnZpY2VcIjtcblxuZXhwb3J0IGNvbnN0IHN1YnNjcmlwdGlvblJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBnZXRTdWJzY3JpcHRpb25TdGF0dXM6IHByb3RlY3RlZFByb2NlZHVyZS5xdWVyeShhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgU3Vic2NyaXB0aW9uU2VydmljZShjdHguZGIpO1xuICAgIHJldHVybiBhd2FpdCBzZXJ2aWNlLmdldFN1YnNjcmlwdGlvblN0YXR1cyhjdHguc2Vzc2lvbi51c2VyLmlkKTtcbiAgfSksXG5cbiAgZ2V0U3RhdHVzOiBwcm90ZWN0ZWRQcm9jZWR1cmUucXVlcnkoYXN5bmMgKHsgY3R4IH0pID0+IHtcbiAgICBjb25zdCBzZXJ2aWNlID0gbmV3IFN1YnNjcmlwdGlvblNlcnZpY2UoY3R4LmRiKTtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCBzZXJ2aWNlLmdldFN1YnNjcmlwdGlvbihjdHguc2Vzc2lvbi51c2VyLmlkKTtcbiAgICBcbiAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogc3Vic2NyaXB0aW9uLnN0YXR1cyxcbiAgICAgIGV4cGlyZXNBdDogc3Vic2NyaXB0aW9uLmV4cGlyZXNBdCxcbiAgICAgIGN1cnJlbnRQZXJpb2RFbmQ6IHN1YnNjcmlwdGlvbi5jdXJyZW50UGVyaW9kRW5kLFxuICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IHN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCxcbiAgICB9O1xuICB9KSxcblxuICBjcmVhdGVDaGVja291dFNlc3Npb246IHByb3RlY3RlZFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJpY2VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgfSlcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZSA9IG5ldyBTdWJzY3JpcHRpb25TZXJ2aWNlKGN0eC5kYik7XG4gICAgICBjb25zdCB7IHVzZXIgfSA9IGN0eC5zZXNzaW9uO1xuICAgICAgY29uc3QgeyByZXEgfSA9IGN0eDtcblxuICAgICAgLy8gQnVpbGQgVVJMcyBmb3IgcmVkaXJlY3RcbiAgICAgIGNvbnN0IGhvc3QgPSByZXE/LmhlYWRlcnM/Lmhvc3QgPz8gXCJsb2NhbGhvc3Q6MzAwMFwiO1xuICAgICAgY29uc3QgcHJvdG9jb2wgPSBob3N0LmluY2x1ZGVzKFwibG9jYWxob3N0XCIpID8gXCJodHRwXCIgOiBcImh0dHBzXCI7XG4gICAgICBjb25zdCBiYXNlVXJsID0gYCR7cHJvdG9jb2x9Oi8vJHtob3N0fWA7XG4gICAgICBcbiAgICAgIGNvbnN0IHN1Y2Nlc3NVcmwgPSBgJHtiYXNlVXJsfS9zdWJzY3JpcHRpb24vc3VjY2Vzcz9zZXNzaW9uX2lkPXtDSEVDS09VVF9TRVNTSU9OX0lEfWA7XG4gICAgICBjb25zdCBjYW5jZWxVcmwgPSBgJHtiYXNlVXJsfS9zdWJzY3JpcHRpb24vY2FuY2VsbGVkYDtcblxuICAgICAgcmV0dXJuIGF3YWl0IHNlcnZpY2UuY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKFxuICAgICAgICB1c2VyLmlkLFxuICAgICAgICB1c2VyLmVtYWlsISxcbiAgICAgICAgc3VjY2Vzc1VybCxcbiAgICAgICAgY2FuY2VsVXJsXG4gICAgICApO1xuICAgIH0pLFxuXG4gIGNhbmNlbFN1YnNjcmlwdGlvbjogcHJvdGVjdGVkUHJvY2VkdXJlLm11dGF0aW9uKGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgY29uc3Qgc2VydmljZSA9IG5ldyBTdWJzY3JpcHRpb25TZXJ2aWNlKGN0eC5kYik7XG4gICAgcmV0dXJuIGF3YWl0IHNlcnZpY2UuY2FuY2VsU3Vic2NyaXB0aW9uKGN0eC5zZXNzaW9uLnVzZXIuaWQpO1xuICB9KSxcblxuICByZXN1bWVTdWJzY3JpcHRpb246IHByb3RlY3RlZFByb2NlZHVyZS5tdXRhdGlvbihhc3luYyAoeyBjdHggfSkgPT4ge1xuICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgU3Vic2NyaXB0aW9uU2VydmljZShjdHguZGIpO1xuICAgIHJldHVybiBhd2FpdCBzZXJ2aWNlLnJlc3VtZVN1YnNjcmlwdGlvbihjdHguc2Vzc2lvbi51c2VyLmlkKTtcbiAgfSksXG59KTsiXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJTdWJzY3JpcHRpb25TZXJ2aWNlIiwic3Vic2NyaXB0aW9uUm91dGVyIiwiZ2V0U3Vic2NyaXB0aW9uU3RhdHVzIiwicXVlcnkiLCJjdHgiLCJzZXJ2aWNlIiwiZGIiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiZ2V0U3RhdHVzIiwic3Vic2NyaXB0aW9uIiwiZ2V0U3Vic2NyaXB0aW9uIiwic3RhdHVzIiwiZXhwaXJlc0F0IiwiY3VycmVudFBlcmlvZEVuZCIsImNhbmNlbEF0UGVyaW9kRW5kIiwiY3JlYXRlQ2hlY2tvdXRTZXNzaW9uIiwiaW5wdXQiLCJvYmplY3QiLCJwcmljZUlkIiwic3RyaW5nIiwib3B0aW9uYWwiLCJtdXRhdGlvbiIsInJlcSIsImhvc3QiLCJoZWFkZXJzIiwicHJvdG9jb2wiLCJpbmNsdWRlcyIsImJhc2VVcmwiLCJzdWNjZXNzVXJsIiwiY2FuY2VsVXJsIiwiZW1haWwiLCJjYW5jZWxTdWJzY3JpcHRpb24iLCJyZXN1bWVTdWJzY3JpcHRpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/subscription.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/routers/user.ts":
/*!****************************************!*\
  !*** ./src/server/api/routers/user.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userRouter: () => (/* binding */ userRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/server/api/trpc */ \"(api-node)/./src/server/api/trpc.ts\");\n/* harmony import */ var _utils_encryption__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/encryption */ \"(api-node)/./src/utils/encryption.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _utils_encryption__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _utils_encryption__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst userRouter = (0,_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    updateProfile: _server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        phoneNumber: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        dateOfBirth: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        address: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ ctx, input })=>{\n        const { name, phoneNumber, dateOfBirth, address } = input;\n        // Encrypt PII fields\n        const encryptedPhone = phoneNumber ? (0,_utils_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptPII)(phoneNumber) : undefined;\n        const encryptedDOB = dateOfBirth ? (0,_utils_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptPII)(dateOfBirth) : undefined;\n        const encryptedAddress = address ? (0,_utils_encryption__WEBPACK_IMPORTED_MODULE_2__.encryptPII)(address) : undefined;\n        const updatedUser = await ctx.db.user.update({\n            where: {\n                id: ctx.session.user.id\n            },\n            data: {\n                name,\n                phoneNumber: encryptedPhone,\n                dateOfBirth: encryptedDOB,\n                address: encryptedAddress\n            },\n            select: {\n                id: true,\n                name: true,\n                email: true\n            }\n        });\n        return updatedUser;\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvdXNlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdCO0FBQ2lEO0FBQ3pCO0FBRXpDLE1BQU1JLGFBQWFILGtFQUFnQkEsQ0FBQztJQUN6Q0ksZUFBZUgsZ0VBQWtCQSxDQUM5QkksS0FBSyxDQUFDTixrQ0FBQ0EsQ0FBQ08sTUFBTSxDQUFDO1FBQ2RDLE1BQU1SLGtDQUFDQSxDQUFDUyxNQUFNLEdBQUdDLFFBQVE7UUFDekJDLGFBQWFYLGtDQUFDQSxDQUFDUyxNQUFNLEdBQUdDLFFBQVE7UUFDaENFLGFBQWFaLGtDQUFDQSxDQUFDUyxNQUFNLEdBQUdDLFFBQVE7UUFDaENHLFNBQVNiLGtDQUFDQSxDQUFDUyxNQUFNLEdBQUdDLFFBQVE7SUFDOUIsSUFDQ0ksUUFBUSxDQUFDLE9BQU8sRUFBRUMsR0FBRyxFQUFFVCxLQUFLLEVBQUU7UUFDN0IsTUFBTSxFQUFFRSxJQUFJLEVBQUVHLFdBQVcsRUFBRUMsV0FBVyxFQUFFQyxPQUFPLEVBQUUsR0FBR1A7UUFFcEQscUJBQXFCO1FBQ3JCLE1BQU1VLGlCQUFpQkwsY0FBY1IsNkRBQVVBLENBQUNRLGVBQWVNO1FBQy9ELE1BQU1DLGVBQWVOLGNBQWNULDZEQUFVQSxDQUFDUyxlQUFlSztRQUM3RCxNQUFNRSxtQkFBbUJOLFVBQVVWLDZEQUFVQSxDQUFDVSxXQUFXSTtRQUV6RCxNQUFNRyxjQUFjLE1BQU1MLElBQUlNLEVBQUUsQ0FBQ0MsSUFBSSxDQUFDQyxNQUFNLENBQUM7WUFDM0NDLE9BQU87Z0JBQUVDLElBQUlWLElBQUlXLE9BQU8sQ0FBQ0osSUFBSSxDQUFDRyxFQUFFO1lBQUM7WUFDakNFLE1BQU07Z0JBQ0puQjtnQkFDQUcsYUFBYUs7Z0JBQ2JKLGFBQWFNO2dCQUNiTCxTQUFTTTtZQUNYO1lBQ0FTLFFBQVE7Z0JBQ05ILElBQUk7Z0JBQ0pqQixNQUFNO2dCQUNOcUIsT0FBTztZQUVUO1FBQ0Y7UUFFQSxPQUFPVDtJQUNUO0FBQ0osR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvdXNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciwgcHJvdGVjdGVkUHJvY2VkdXJlIH0gZnJvbSBcIn4vc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBlbmNyeXB0UElJIH0gZnJvbSBcIn4vdXRpbHMvZW5jcnlwdGlvblwiO1xuXG5leHBvcnQgY29uc3QgdXNlclJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICB1cGRhdGVQcm9maWxlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3Qoe1xuICAgICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgcGhvbmVOdW1iZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIGRhdGVPZkJpcnRoOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICBhZGRyZXNzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGN0eCwgaW5wdXQgfSkgPT4ge1xuICAgICAgY29uc3QgeyBuYW1lLCBwaG9uZU51bWJlciwgZGF0ZU9mQmlydGgsIGFkZHJlc3MgfSA9IGlucHV0O1xuXG4gICAgICAvLyBFbmNyeXB0IFBJSSBmaWVsZHNcbiAgICAgIGNvbnN0IGVuY3J5cHRlZFBob25lID0gcGhvbmVOdW1iZXIgPyBlbmNyeXB0UElJKHBob25lTnVtYmVyKSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGVuY3J5cHRlZERPQiA9IGRhdGVPZkJpcnRoID8gZW5jcnlwdFBJSShkYXRlT2ZCaXJ0aCkgOiB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBlbmNyeXB0ZWRBZGRyZXNzID0gYWRkcmVzcyA/IGVuY3J5cHRQSUkoYWRkcmVzcykgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgY3R4LmRiLnVzZXIudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgcGhvbmVOdW1iZXI6IGVuY3J5cHRlZFBob25lLFxuICAgICAgICAgIGRhdGVPZkJpcnRoOiBlbmNyeXB0ZWRET0IsXG4gICAgICAgICAgYWRkcmVzczogZW5jcnlwdGVkQWRkcmVzcyxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAvLyBEb24ndCByZXR1cm4gZW5jcnlwdGVkIGZpZWxkc1xuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1cGRhdGVkVXNlcjtcbiAgICB9KSxcbn0pOyJdLCJuYW1lcyI6WyJ6IiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2NlZHVyZSIsImVuY3J5cHRQSUkiLCJ1c2VyUm91dGVyIiwidXBkYXRlUHJvZmlsZSIsImlucHV0Iiwib2JqZWN0IiwibmFtZSIsInN0cmluZyIsIm9wdGlvbmFsIiwicGhvbmVOdW1iZXIiLCJkYXRlT2ZCaXJ0aCIsImFkZHJlc3MiLCJtdXRhdGlvbiIsImN0eCIsImVuY3J5cHRlZFBob25lIiwidW5kZWZpbmVkIiwiZW5jcnlwdGVkRE9CIiwiZW5jcnlwdGVkQWRkcmVzcyIsInVwZGF0ZWRVc2VyIiwiZGIiLCJ1c2VyIiwidXBkYXRlIiwid2hlcmUiLCJpZCIsInNlc3Npb24iLCJkYXRhIiwic2VsZWN0IiwiZW1haWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/routers/user.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/api/trpc.ts":
/*!********************************!*\
  !*** ./src/server/api/trpc.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInnerTRPCContext: () => (/* binding */ createInnerTRPCContext),\n/* harmony export */   createTRPCContext: () => (/* binding */ createTRPCContext),\n/* harmony export */   createTRPCRouter: () => (/* binding */ createTRPCRouter),\n/* harmony export */   premiumProcedure: () => (/* binding */ premiumProcedure),\n/* harmony export */   protectedProcedure: () => (/* binding */ protectedProcedure),\n/* harmony export */   publicProcedure: () => (/* binding */ publicProcedure),\n/* harmony export */   t: () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! superjson */ \"superjson\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _server_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/server/auth */ \"(api-node)/./src/server/auth.ts\");\n/* harmony import */ var _server_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ~/server/db */ \"(api-node)/./src/server/db.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\n/* harmony import */ var _utils_requestContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ~/utils/requestContext */ \"(api-node)/./src/utils/requestContext.ts\");\n/* harmony import */ var _middleware_requireActiveSubscription__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./middleware/requireActiveSubscription */ \"(api-node)/./src/server/api/middleware/requireActiveSubscription.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server__WEBPACK_IMPORTED_MODULE_0__, superjson__WEBPACK_IMPORTED_MODULE_1__, zod__WEBPACK_IMPORTED_MODULE_2__, _server_auth__WEBPACK_IMPORTED_MODULE_3__, _server_db__WEBPACK_IMPORTED_MODULE_4__, _middleware_requireActiveSubscription__WEBPACK_IMPORTED_MODULE_7__]);\n([_trpc_server__WEBPACK_IMPORTED_MODULE_0__, superjson__WEBPACK_IMPORTED_MODULE_1__, zod__WEBPACK_IMPORTED_MODULE_2__, _server_auth__WEBPACK_IMPORTED_MODULE_3__, _server_db__WEBPACK_IMPORTED_MODULE_4__, _middleware_requireActiveSubscription__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst createInnerTRPCContext = (opts)=>{\n    return {\n        session: opts.session,\n        db: _server_db__WEBPACK_IMPORTED_MODULE_4__.db,\n        correlationId: opts.correlationId,\n        requestPath: opts.requestPath,\n        req: opts.req,\n        res: opts.res\n    };\n};\nconst createTRPCContext = async (opts)=>{\n    const { req, res } = opts;\n    const session = await (0,_server_auth__WEBPACK_IMPORTED_MODULE_3__.getServerAuthSession)({\n        req,\n        res\n    });\n    // Get correlation ID from headers (set by middleware)\n    const correlationId = req.headers['x-correlation-id'] || `${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\n    // Get request path for logging\n    const requestPath = req.url;\n    return createInnerTRPCContext({\n        session,\n        correlationId,\n        requestPath,\n        req,\n        res\n    });\n};\nconst t = _trpc_server__WEBPACK_IMPORTED_MODULE_0__.initTRPC.context().create({\n    transformer: superjson__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n    errorFormatter ({ shape, error }) {\n        return {\n            ...shape,\n            data: {\n                ...shape.data,\n                zodError: error.cause instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodError ? error.cause.flatten() : null\n            }\n        };\n    }\n});\n// Logging middleware\nconst loggingMiddleware = t.middleware(async ({ path, next, ctx })=>{\n    const logContext = {\n        correlationId: ctx.correlationId,\n        userId: ctx.session?.user?.id,\n        sessionId: ctx.session?.user?.email || undefined\n    };\n    const requestContext = {\n        ...logContext,\n        journey: path,\n        startTime: Date.now()\n    };\n    // Log the incoming request\n    _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info(`tRPC request started: ${path}`, logContext, {\n        path,\n        hasSession: !!ctx.session\n    });\n    try {\n        // Run the procedure with request context\n        const result = await (0,_utils_requestContext__WEBPACK_IMPORTED_MODULE_6__.withRequestContext)(requestContext, ()=>next({\n                ctx\n            }));\n        // Log successful completion\n        const duration = Date.now() - requestContext.startTime;\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.info(`tRPC request completed: ${path}`, logContext, {\n            path,\n            duration,\n            success: true\n        });\n        return result;\n    } catch (error) {\n        // Log error\n        const duration = Date.now() - requestContext.startTime;\n        _utils_logger__WEBPACK_IMPORTED_MODULE_5__.logger.error(`tRPC request failed: ${path}`, logContext, error instanceof Error ? error : new Error('Unknown error'), {\n            path,\n            duration,\n            errorType: error instanceof _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError ? error.code : 'UNKNOWN'\n        });\n        throw error;\n    }\n});\nconst createTRPCRouter = t.router;\n// Public procedure with logging\nconst publicProcedure = t.procedure.use(loggingMiddleware);\n// Protected procedure with logging (for future use when auth is implemented)\nconst protectedProcedure = t.procedure.use(loggingMiddleware).use({\n    \"use[protectedProcedure]\": ({ ctx, next })=>{\n        if (!ctx.session || !ctx.session.user) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_0__.TRPCError({\n                code: \"UNAUTHORIZED\"\n            });\n        }\n        return next({\n            ctx: {\n                // infers the `session` as non-nullable\n                session: {\n                    ...ctx.session,\n                    user: ctx.session.user\n                }\n            }\n        });\n    }\n}[\"use[protectedProcedure]\"]);\n// Import the subscription middleware\n\n// Premium procedure that requires an active subscription\nconst premiumProcedure = protectedProcedure.use(_middleware_requireActiveSubscription__WEBPACK_IMPORTED_MODULE_7__.requireActiveSubscriptionMiddleware);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FWLGlCQUFpQnlCLFFBQVF6QixRQUFRLElBQUl5QixNQUFNLGtCQUMzQztZQUNFbEI7WUFDQWdCO1lBQ0FHLFdBQVcxQixpQkFBaUI3QixtREFBU0EsR0FBRzZCLE1BQU0yQixJQUFJLEdBQUc7UUFDdkQ7UUFHRixNQUFNM0I7SUFDUjtBQUNGO0FBRU8sTUFBTTRCLG1CQUFtQmxDLEVBQUVtQyxNQUFNLENBQUM7QUFFekMsZ0NBQWdDO0FBQ3pCLE1BQU1DLGtCQUFrQnBDLEVBQUVxQyxTQUFTLENBQUNDLEdBQUcsQ0FBQzNCLG1CQUFtQjtBQUVsRSw2RUFBNkU7QUFDdEUsTUFBTTRCLHFCQUFxQnZDLEVBQUVxQyxTQUFTLENBQzFDQyxHQUFHLENBQUMzQixtQkFDSjJCLEdBQUc7K0JBQUMsQ0FBQyxFQUFFdkIsR0FBRyxFQUFFRCxJQUFJLEVBQUU7UUFDakIsSUFBSSxDQUFDQyxJQUFJN0IsT0FBTyxJQUFJLENBQUM2QixJQUFJN0IsT0FBTyxDQUFDZ0MsSUFBSSxFQUFFO1lBQ3JDLE1BQU0sSUFBSXpDLG1EQUFTQSxDQUFDO2dCQUFFd0QsTUFBTTtZQUFlO1FBQzdDO1FBQ0EsT0FBT25CLEtBQUs7WUFDVkMsS0FBSztnQkFDSCx1Q0FBdUM7Z0JBQ3ZDN0IsU0FBUztvQkFBRSxHQUFHNkIsSUFBSTdCLE9BQU87b0JBQUVnQyxNQUFNSCxJQUFJN0IsT0FBTyxDQUFDZ0MsSUFBSTtnQkFBQztZQUNwRDtRQUNGO0lBQ0Y7OEJBQUc7QUFFTCxxQ0FBcUM7QUFDd0Q7QUFFN0YseURBQXlEO0FBQ2xELE1BQU11QixtQkFBbUJGLG1CQUM3QkQsR0FBRyxDQUFDRSxzR0FBbUNBLEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvc2VydmVyL2FwaS90cnBjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRUUlBDLCBUUlBDRXJyb3IgfSBmcm9tIFwiQHRycGMvc2VydmVyXCI7XG5pbXBvcnQgeyB0eXBlIENyZWF0ZU5leHRDb250ZXh0T3B0aW9ucyB9IGZyb20gXCJAdHJwYy9zZXJ2ZXIvYWRhcHRlcnMvbmV4dFwiO1xuaW1wb3J0IHsgdHlwZSBTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IHN1cGVyanNvbiBmcm9tIFwic3VwZXJqc29uXCI7XG5pbXBvcnQgeyBab2RFcnJvciB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHsgZ2V0U2VydmVyQXV0aFNlc3Npb24gfSBmcm9tIFwifi9zZXJ2ZXIvYXV0aFwiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwifi9zZXJ2ZXIvZGJcIjtcbmltcG9ydCB7IGxvZ2dlciwgdHlwZSBMb2dDb250ZXh0IH0gZnJvbSBcIn4vdXRpbHMvbG9nZ2VyXCI7XG5pbXBvcnQgeyB3aXRoUmVxdWVzdENvbnRleHQsIHR5cGUgUmVxdWVzdENvbnRleHQgfSBmcm9tIFwifi91dGlscy9yZXF1ZXN0Q29udGV4dFwiO1xuXG50eXBlIENyZWF0ZUNvbnRleHRPcHRpb25zID0ge1xuICBzZXNzaW9uOiBTZXNzaW9uIHwgbnVsbDtcbiAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuICByZXF1ZXN0UGF0aD86IHN0cmluZztcbiAgcmVxPzogQ3JlYXRlTmV4dENvbnRleHRPcHRpb25zWydyZXEnXTtcbiAgcmVzPzogQ3JlYXRlTmV4dENvbnRleHRPcHRpb25zWydyZXMnXTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVJbm5lclRSUENDb250ZXh0ID0gKG9wdHM6IENyZWF0ZUNvbnRleHRPcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgc2Vzc2lvbjogb3B0cy5zZXNzaW9uLFxuICAgIGRiLFxuICAgIGNvcnJlbGF0aW9uSWQ6IG9wdHMuY29ycmVsYXRpb25JZCxcbiAgICByZXF1ZXN0UGF0aDogb3B0cy5yZXF1ZXN0UGF0aCxcbiAgICByZXE6IG9wdHMucmVxLFxuICAgIHJlczogb3B0cy5yZXMsXG4gIH07XG59O1xuXG5leHBvcnQgdHlwZSBDb250ZXh0ID0gQXdhaXRlZDxSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVUUlBDQ29udGV4dD4+O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVFJQQ0NvbnRleHQgPSBhc3luYyAob3B0czogQ3JlYXRlTmV4dENvbnRleHRPcHRpb25zKSA9PiB7XG4gIGNvbnN0IHsgcmVxLCByZXMgfSA9IG9wdHM7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJBdXRoU2Vzc2lvbih7IHJlcSwgcmVzIH0pO1xuICBcbiAgLy8gR2V0IGNvcnJlbGF0aW9uIElEIGZyb20gaGVhZGVycyAoc2V0IGJ5IG1pZGRsZXdhcmUpXG4gIGNvbnN0IGNvcnJlbGF0aW9uSWQgPSByZXEuaGVhZGVyc1sneC1jb3JyZWxhdGlvbi1pZCddIGFzIHN0cmluZyB8fCBgJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxMSl9YDtcbiAgXG4gIC8vIEdldCByZXF1ZXN0IHBhdGggZm9yIGxvZ2dpbmdcbiAgY29uc3QgcmVxdWVzdFBhdGggPSByZXEudXJsO1xuXG4gIHJldHVybiBjcmVhdGVJbm5lclRSUENDb250ZXh0KHtcbiAgICBzZXNzaW9uLFxuICAgIGNvcnJlbGF0aW9uSWQsXG4gICAgcmVxdWVzdFBhdGgsXG4gICAgcmVxLFxuICAgIHJlcyxcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgdCA9IGluaXRUUlBDLmNvbnRleHQ8dHlwZW9mIGNyZWF0ZVRSUENDb250ZXh0PigpLmNyZWF0ZSh7XG4gIHRyYW5zZm9ybWVyOiBzdXBlcmpzb24sXG4gIGVycm9yRm9ybWF0dGVyKHsgc2hhcGUsIGVycm9yIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc2hhcGUsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIC4uLnNoYXBlLmRhdGEsXG4gICAgICAgIHpvZEVycm9yOlxuICAgICAgICAgIGVycm9yLmNhdXNlIGluc3RhbmNlb2YgWm9kRXJyb3IgPyBlcnJvci5jYXVzZS5mbGF0dGVuKCkgOiBudWxsLFxuICAgICAgfSxcbiAgICB9O1xuICB9LFxufSk7XG5cbi8vIExvZ2dpbmcgbWlkZGxld2FyZVxuY29uc3QgbG9nZ2luZ01pZGRsZXdhcmUgPSB0Lm1pZGRsZXdhcmUoYXN5bmMgKHsgcGF0aCwgbmV4dCwgY3R4IH0pID0+IHtcbiAgY29uc3QgbG9nQ29udGV4dDogTG9nQ29udGV4dCA9IHtcbiAgICBjb3JyZWxhdGlvbklkOiBjdHguY29ycmVsYXRpb25JZCxcbiAgICB1c2VySWQ6IGN0eC5zZXNzaW9uPy51c2VyPy5pZCxcbiAgICBzZXNzaW9uSWQ6IGN0eC5zZXNzaW9uPy51c2VyPy5lbWFpbCB8fCB1bmRlZmluZWQsIC8vIFVzaW5nIGVtYWlsIGFzIHNlc3Npb24gaWRlbnRpZmllciBmb3Igbm93XG4gIH07XG5cbiAgY29uc3QgcmVxdWVzdENvbnRleHQ6IFJlcXVlc3RDb250ZXh0ID0ge1xuICAgIC4uLmxvZ0NvbnRleHQsXG4gICAgam91cm5leTogcGF0aCxcbiAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gIH07XG5cbiAgLy8gTG9nIHRoZSBpbmNvbWluZyByZXF1ZXN0XG4gIGxvZ2dlci5pbmZvKGB0UlBDIHJlcXVlc3Qgc3RhcnRlZDogJHtwYXRofWAsIGxvZ0NvbnRleHQsIHtcbiAgICBwYXRoLFxuICAgIGhhc1Nlc3Npb246ICEhY3R4LnNlc3Npb24sXG4gIH0pO1xuXG4gIHRyeSB7XG4gICAgLy8gUnVuIHRoZSBwcm9jZWR1cmUgd2l0aCByZXF1ZXN0IGNvbnRleHRcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXRoUmVxdWVzdENvbnRleHQocmVxdWVzdENvbnRleHQsICgpID0+IG5leHQoeyBjdHggfSkpO1xuICAgIFxuICAgIC8vIExvZyBzdWNjZXNzZnVsIGNvbXBsZXRpb25cbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSByZXF1ZXN0Q29udGV4dC5zdGFydFRpbWU7XG4gICAgbG9nZ2VyLmluZm8oYHRSUEMgcmVxdWVzdCBjb21wbGV0ZWQ6ICR7cGF0aH1gLCBsb2dDb250ZXh0LCB7XG4gICAgICBwYXRoLFxuICAgICAgZHVyYXRpb24sXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gTG9nIGVycm9yXG4gICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gcmVxdWVzdENvbnRleHQuc3RhcnRUaW1lO1xuICAgIGxvZ2dlci5lcnJvcihcbiAgICAgIGB0UlBDIHJlcXVlc3QgZmFpbGVkOiAke3BhdGh9YCxcbiAgICAgIGxvZ0NvbnRleHQsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKSxcbiAgICAgIHtcbiAgICAgICAgcGF0aCxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIGVycm9yVHlwZTogZXJyb3IgaW5zdGFuY2VvZiBUUlBDRXJyb3IgPyBlcnJvci5jb2RlIDogJ1VOS05PV04nLFxuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0pO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlVFJQQ1JvdXRlciA9IHQucm91dGVyO1xuXG4vLyBQdWJsaWMgcHJvY2VkdXJlIHdpdGggbG9nZ2luZ1xuZXhwb3J0IGNvbnN0IHB1YmxpY1Byb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShsb2dnaW5nTWlkZGxld2FyZSk7XG5cbi8vIFByb3RlY3RlZCBwcm9jZWR1cmUgd2l0aCBsb2dnaW5nIChmb3IgZnV0dXJlIHVzZSB3aGVuIGF1dGggaXMgaW1wbGVtZW50ZWQpXG5leHBvcnQgY29uc3QgcHJvdGVjdGVkUHJvY2VkdXJlID0gdC5wcm9jZWR1cmVcbiAgLnVzZShsb2dnaW5nTWlkZGxld2FyZSlcbiAgLnVzZSgoeyBjdHgsIG5leHQgfSkgPT4ge1xuICAgIGlmICghY3R4LnNlc3Npb24gfHwgIWN0eC5zZXNzaW9uLnVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiBcIlVOQVVUSE9SSVpFRFwiIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbmV4dCh7XG4gICAgICBjdHg6IHtcbiAgICAgICAgLy8gaW5mZXJzIHRoZSBgc2Vzc2lvbmAgYXMgbm9uLW51bGxhYmxlXG4gICAgICAgIHNlc3Npb246IHsgLi4uY3R4LnNlc3Npb24sIHVzZXI6IGN0eC5zZXNzaW9uLnVzZXIgfSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuXG4vLyBJbXBvcnQgdGhlIHN1YnNjcmlwdGlvbiBtaWRkbGV3YXJlXG5pbXBvcnQgeyByZXF1aXJlQWN0aXZlU3Vic2NyaXB0aW9uTWlkZGxld2FyZSB9IGZyb20gXCIuL21pZGRsZXdhcmUvcmVxdWlyZUFjdGl2ZVN1YnNjcmlwdGlvblwiO1xuXG4vLyBQcmVtaXVtIHByb2NlZHVyZSB0aGF0IHJlcXVpcmVzIGFuIGFjdGl2ZSBzdWJzY3JpcHRpb25cbmV4cG9ydCBjb25zdCBwcmVtaXVtUHJvY2VkdXJlID0gcHJvdGVjdGVkUHJvY2VkdXJlXG4gIC51c2UocmVxdWlyZUFjdGl2ZVN1YnNjcmlwdGlvbk1pZGRsZXdhcmUpOyJdLCJuYW1lcyI6WyJpbml0VFJQQyIsIlRSUENFcnJvciIsInN1cGVyanNvbiIsIlpvZEVycm9yIiwiZ2V0U2VydmVyQXV0aFNlc3Npb24iLCJkYiIsImxvZ2dlciIsIndpdGhSZXF1ZXN0Q29udGV4dCIsImNyZWF0ZUlubmVyVFJQQ0NvbnRleHQiLCJvcHRzIiwic2Vzc2lvbiIsImNvcnJlbGF0aW9uSWQiLCJyZXF1ZXN0UGF0aCIsInJlcSIsInJlcyIsImNyZWF0ZVRSUENDb250ZXh0IiwiaGVhZGVycyIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ1cmwiLCJ0IiwiY29udGV4dCIsImNyZWF0ZSIsInRyYW5zZm9ybWVyIiwiZXJyb3JGb3JtYXR0ZXIiLCJzaGFwZSIsImVycm9yIiwiZGF0YSIsInpvZEVycm9yIiwiY2F1c2UiLCJmbGF0dGVuIiwibG9nZ2luZ01pZGRsZXdhcmUiLCJtaWRkbGV3YXJlIiwicGF0aCIsIm5leHQiLCJjdHgiLCJsb2dDb250ZXh0IiwidXNlcklkIiwidXNlciIsImlkIiwic2Vzc2lvbklkIiwiZW1haWwiLCJ1bmRlZmluZWQiLCJyZXF1ZXN0Q29udGV4dCIsImpvdXJuZXkiLCJzdGFydFRpbWUiLCJpbmZvIiwiaGFzU2Vzc2lvbiIsInJlc3VsdCIsImR1cmF0aW9uIiwic3VjY2VzcyIsIkVycm9yIiwiZXJyb3JUeXBlIiwiY29kZSIsImNyZWF0ZVRSUENSb3V0ZXIiLCJyb3V0ZXIiLCJwdWJsaWNQcm9jZWR1cmUiLCJwcm9jZWR1cmUiLCJ1c2UiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJyZXF1aXJlQWN0aXZlU3Vic2NyaXB0aW9uTWlkZGxld2FyZSIsInByZW1pdW1Qcm9jZWR1cmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/api/trpc.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/auth.ts":
/*!****************************!*\
  !*** ./src/server/auth.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getServerAuthSession: () => (/* binding */ getServerAuthSession)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _server_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ~/server/db */ \"(api-node)/./src/server/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_4__, zod__WEBPACK_IMPORTED_MODULE_5__, _env_mjs__WEBPACK_IMPORTED_MODULE_6__, _server_db__WEBPACK_IMPORTED_MODULE_7__]);\n([bcryptjs__WEBPACK_IMPORTED_MODULE_4__, zod__WEBPACK_IMPORTED_MODULE_5__, _env_mjs__WEBPACK_IMPORTED_MODULE_6__, _server_db__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst credentialsSchema = zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().email(),\n    password: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().min(6)\n});\nconst authOptions = {\n    callbacks: {\n        session: ({ session, token })=>({\n                ...session,\n                user: {\n                    ...session.user,\n                    id: token.sub\n                }\n            })\n    },\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_3__.PrismaAdapter)(_server_db__WEBPACK_IMPORTED_MODULE_7__.db),\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: _env_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GOOGLE_CLIENT_ID ?? \"\",\n            clientSecret: _env_mjs__WEBPACK_IMPORTED_MODULE_6__.env.GOOGLE_CLIENT_SECRET ?? \"\",\n            authorization: {\n                params: {\n                    prompt: \"consent\",\n                    access_type: \"offline\",\n                    response_type: \"code\"\n                }\n            }\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_2___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                const parsed = credentialsSchema.safeParse(credentials);\n                if (!parsed.success) {\n                    return null;\n                }\n                const { email, password } = parsed.data;\n                // Find user by email\n                const user = await _server_db__WEBPACK_IMPORTED_MODULE_7__.db.user.findUnique({\n                    where: {\n                        email\n                    }\n                });\n                if (!user || !user.password) {\n                    return null;\n                }\n                // Verify password\n                const passwordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].compare(password, user.password);\n                if (!passwordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image\n                };\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    },\n    session: {\n        strategy: \"jwt\"\n    }\n};\nconst getServerAuthSession = (ctx)=>{\n    return (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(ctx.req, ctx.res, authOptions);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUN3RjtBQUNoQztBQUNVO0FBQ1I7QUFDNUI7QUFDTjtBQUVRO0FBQ0M7QUFVakMsTUFBTVEsb0JBQW9CSCxrQ0FBQ0EsQ0FBQ0ksTUFBTSxDQUFDO0lBQ2pDQyxPQUFPTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxHQUFHRCxLQUFLO0lBQ3ZCRSxVQUFVUCxrQ0FBQ0EsQ0FBQ00sTUFBTSxHQUFHRSxHQUFHLENBQUM7QUFDM0I7QUFFTyxNQUFNQyxjQUErQjtJQUMxQ0MsV0FBVztRQUNUQyxTQUFTLENBQUMsRUFBRUEsT0FBTyxFQUFFQyxLQUFLLEVBQUUsR0FBTTtnQkFDaEMsR0FBR0QsT0FBTztnQkFDVkUsTUFBTTtvQkFDSixHQUFHRixRQUFRRSxJQUFJO29CQUNmQyxJQUFJRixNQUFNRyxHQUFHO2dCQUNmO1lBQ0Y7SUFDRjtJQUNBQyxTQUFTbEIsd0VBQWFBLENBQUNJLDBDQUFFQTtJQUN6QmUsV0FBVztRQUNUckIsaUVBQWNBLENBQUM7WUFDYnNCLFVBQVVqQix5Q0FBR0EsQ0FBQ2tCLGdCQUFnQixJQUFJO1lBQ2xDQyxjQUFjbkIseUNBQUdBLENBQUNvQixvQkFBb0IsSUFBSTtZQUMxQ0MsZUFBZTtnQkFDYkMsUUFBUTtvQkFDTkMsUUFBUTtvQkFDUkMsYUFBYTtvQkFDYkMsZUFBZTtnQkFDakI7WUFDRjtRQUNGO1FBQ0E3QixzRUFBbUJBLENBQUM7WUFDbEI4QixNQUFNO1lBQ05DLGFBQWE7Z0JBQ1h2QixPQUFPO29CQUFFd0IsT0FBTztvQkFBU0MsTUFBTTtnQkFBUTtnQkFDdkN2QixVQUFVO29CQUFFc0IsT0FBTztvQkFBWUMsTUFBTTtnQkFBVztZQUNsRDtZQUNBLE1BQU1DLFdBQVVILFdBQVc7Z0JBQ3pCLE1BQU1JLFNBQVM3QixrQkFBa0I4QixTQUFTLENBQUNMO2dCQUUzQyxJQUFJLENBQUNJLE9BQU9FLE9BQU8sRUFBRTtvQkFDbkIsT0FBTztnQkFDVDtnQkFFQSxNQUFNLEVBQUU3QixLQUFLLEVBQUVFLFFBQVEsRUFBRSxHQUFHeUIsT0FBT0csSUFBSTtnQkFFdkMscUJBQXFCO2dCQUNyQixNQUFNdEIsT0FBTyxNQUFNWCwwQ0FBRUEsQ0FBQ1csSUFBSSxDQUFDdUIsVUFBVSxDQUFDO29CQUNwQ0MsT0FBTzt3QkFBRWhDO29CQUFNO2dCQUNqQjtnQkFFQSxJQUFJLENBQUNRLFFBQVEsQ0FBQ0EsS0FBS04sUUFBUSxFQUFFO29CQUMzQixPQUFPO2dCQUNUO2dCQUVBLGtCQUFrQjtnQkFDbEIsTUFBTStCLGdCQUFnQixNQUFNdkMsd0RBQWMsQ0FBQ1EsVUFBVU0sS0FBS04sUUFBUTtnQkFFbEUsSUFBSSxDQUFDK0IsZUFBZTtvQkFDbEIsT0FBTztnQkFDVDtnQkFFQSxPQUFPO29CQUNMeEIsSUFBSUQsS0FBS0MsRUFBRTtvQkFDWFQsT0FBT1EsS0FBS1IsS0FBSztvQkFDakJzQixNQUFNZCxLQUFLYyxJQUFJO29CQUNmYSxPQUFPM0IsS0FBSzJCLEtBQUs7Z0JBQ25CO1lBQ0Y7UUFDRjtLQUNEO0lBQ0RDLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxPQUFPO0lBQ1Q7SUFDQWhDLFNBQVM7UUFDUGlDLFVBQVU7SUFDWjtBQUNGLEVBQUU7QUFFSyxNQUFNQyx1QkFBdUIsQ0FBQ0M7SUFJbkMsT0FBT25ELDJEQUFnQkEsQ0FBQ21ELElBQUlDLEdBQUcsRUFBRUQsSUFBSUUsR0FBRyxFQUFFdkM7QUFDNUMsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL3NlcmdlaS5kYXZpZG92QGNsZWFycm91dGUuaW8vRG9jdW1lbnRzL2hvbGlkYXktcHJvZ3JhbS1hZ2dyZWdhdG9yL2FwcHMvd2ViL3NyYy9zZXJ2ZXIvYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiwgdHlwZSBOZXh0QXV0aE9wdGlvbnMsIHR5cGUgRGVmYXVsdFNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IHsgUHJpc21hQWRhcHRlciB9IGZyb20gXCJAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHsgZW52IH0gZnJvbSBcIn4vZW52Lm1qc1wiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwifi9zZXJ2ZXIvZGJcIjtcblxuZGVjbGFyZSBtb2R1bGUgXCJuZXh0LWF1dGhcIiB7XG4gIGludGVyZmFjZSBTZXNzaW9uIGV4dGVuZHMgRGVmYXVsdFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgfSAmIERlZmF1bHRTZXNzaW9uW1widXNlclwiXTtcbiAgfVxufVxuXG5jb25zdCBjcmVkZW50aWFsc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgcGFzc3dvcmQ6IHouc3RyaW5nKCkubWluKDYpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBjYWxsYmFja3M6IHtcbiAgICBzZXNzaW9uOiAoeyBzZXNzaW9uLCB0b2tlbiB9KSA9PiAoe1xuICAgICAgLi4uc2Vzc2lvbixcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICBpZDogdG9rZW4uc3ViISxcbiAgICAgIH0sXG4gICAgfSksXG4gIH0sXG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIoZGIpLFxuICBwcm92aWRlcnM6IFtcbiAgICBHb29nbGVQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogZW52LkdPT0dMRV9DTElFTlRfSUQgPz8gXCJcIixcbiAgICAgIGNsaWVudFNlY3JldDogZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUID8/IFwiXCIsXG4gICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHByb21wdDogXCJjb25zZW50XCIsXG4gICAgICAgICAgYWNjZXNzX3R5cGU6IFwib2ZmbGluZVwiLFxuICAgICAgICAgIHJlc3BvbnNlX3R5cGU6IFwiY29kZVwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcbiAgICAgIG5hbWU6IFwiY3JlZGVudGlhbHNcIixcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gY3JlZGVudGlhbHNTY2hlbWEuc2FmZVBhcnNlKGNyZWRlbnRpYWxzKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSBwYXJzZWQuZGF0YTtcblxuICAgICAgICAvLyBGaW5kIHVzZXIgYnkgZW1haWxcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgZW1haWwgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWZXJpZnkgcGFzc3dvcmRcbiAgICAgICAgY29uc3QgcGFzc3dvcmRWYWxpZCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0pLFxuICBdLFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvYXV0aC9zaWduaW5cIixcbiAgICBlcnJvcjogXCIvYXV0aC9lcnJvclwiLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gIH0sXG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U2VydmVyQXV0aFNlc3Npb24gPSAoY3R4OiB7XG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXTtcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdO1xufSkgPT4ge1xuICByZXR1cm4gZ2V0U2VydmVyU2Vzc2lvbihjdHgucmVxLCBjdHgucmVzLCBhdXRoT3B0aW9ucyk7XG59OyJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiR29vZ2xlUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiUHJpc21hQWRhcHRlciIsImJjcnlwdCIsInoiLCJlbnYiLCJkYiIsImNyZWRlbnRpYWxzU2NoZW1hIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJwYXNzd29yZCIsIm1pbiIsImF1dGhPcHRpb25zIiwiY2FsbGJhY2tzIiwic2Vzc2lvbiIsInRva2VuIiwidXNlciIsImlkIiwic3ViIiwiYWRhcHRlciIsInByb3ZpZGVycyIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiYXV0aG9yaXphdGlvbiIsInBhcmFtcyIsInByb21wdCIsImFjY2Vzc190eXBlIiwicmVzcG9uc2VfdHlwZSIsIm5hbWUiLCJjcmVkZW50aWFscyIsImxhYmVsIiwidHlwZSIsImF1dGhvcml6ZSIsInBhcnNlZCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJkYXRhIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwicGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJpbWFnZSIsInBhZ2VzIiwic2lnbkluIiwiZXJyb3IiLCJzdHJhdGVneSIsImdldFNlcnZlckF1dGhTZXNzaW9uIiwiY3R4IiwicmVxIiwicmVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/server/auth.ts\n");

/***/ }),

/***/ "(api-node)/./src/server/db.ts":
/*!**************************!*\
  !*** ./src/server/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_env_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n_env_mjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst globalForPrisma = globalThis;\nconst db = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV === \"development\" ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : [\n        \"error\"\n    ]\n});\nif (_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.NODE_ENV !== \"production\") globalForPrisma.prisma = db;\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2ZXIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE4QztBQUVkO0FBRWhDLE1BQU1FLGtCQUFrQkM7QUFJakIsTUFBTUMsS0FDWEYsZ0JBQWdCRyxNQUFNLElBQ3RCLElBQUlMLHdEQUFZQSxDQUFDO0lBQ2ZNLEtBQ0VMLHlDQUFHQSxDQUFDTSxRQUFRLEtBQUssZ0JBQWdCO1FBQUM7UUFBUztRQUFTO0tBQU8sR0FBRztRQUFDO0tBQVE7QUFDM0UsR0FBRztBQUVMLElBQUlOLHlDQUFHQSxDQUFDTSxRQUFRLEtBQUssY0FBY0wsZ0JBQWdCRyxNQUFNLEdBQUdEIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3NlcnZlci9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuaW1wb3J0IHsgZW52IH0gZnJvbSBcIn4vZW52Lm1qc1wiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBkYiA9XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz9cbiAgbmV3IFByaXNtYUNsaWVudCh7XG4gICAgbG9nOlxuICAgICAgZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBbXCJxdWVyeVwiLCBcImVycm9yXCIsIFwid2FyblwiXSA6IFtcImVycm9yXCJdLFxuICB9KTtcblxuaWYgKGVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBkYjsiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZW52IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsImRiIiwicHJpc21hIiwibG9nIiwiTk9ERV9FTlYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/server/db.ts\n");

/***/ }),

/***/ "(api-node)/./src/services/subscription.service.ts":
/*!**********************************************!*\
  !*** ./src/services/subscription.service.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SubscriptionService: () => (/* binding */ SubscriptionService)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _utils_stripe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/stripe */ \"(api-node)/./src/utils/stripe.ts\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _utils_subscription__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ~/utils/subscription */ \"(api-node)/./src/utils/subscription.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server__WEBPACK_IMPORTED_MODULE_1__, _utils_stripe__WEBPACK_IMPORTED_MODULE_2__, _env_mjs__WEBPACK_IMPORTED_MODULE_4__]);\n([_trpc_server__WEBPACK_IMPORTED_MODULE_1__, _utils_stripe__WEBPACK_IMPORTED_MODULE_2__, _env_mjs__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nclass SubscriptionService {\n    constructor(db){\n        this.db = db;\n    }\n    /**\n   * Get subscription status for a user\n   */ async getSubscriptionStatus(userId) {\n        const subscription = await this.db.subscription.findUnique({\n            where: {\n                userId\n            }\n        });\n        return {\n            hasSubscription: !!subscription,\n            status: subscription?.status ?? null,\n            expiresAt: subscription?.expiresAt ?? null,\n            currentPeriodEnd: subscription?.currentPeriodEnd ?? null,\n            cancelAtPeriodEnd: subscription?.cancelAtPeriodEnd ?? false\n        };\n    }\n    /**\n   * Get full subscription details for a user\n   */ async getSubscription(userId) {\n        return await this.db.subscription.findUnique({\n            where: {\n                userId\n            }\n        });\n    }\n    /**\n   * Create Stripe checkout session for subscription\n   */ async createCheckoutSession(userId, email, successUrl, cancelUrl) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Creating checkout session\", {\n            userId,\n            email,\n            stripeConfig: {\n                hasSecretKey: !!_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_SECRET_KEY,\n                hasPriceId: !!_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID,\n                priceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID\n            }\n        });\n        if (!_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_SECRET_KEY || !_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID) {\n            throw new Error(\"Stripe configuration is missing. Please set STRIPE_SECRET_KEY and STRIPE_ANNUAL_PRICE_ID in your .env file. \" + `Current config: STRIPE_SECRET_KEY=${_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_SECRET_KEY ? 'set' : 'missing'}, ` + `STRIPE_ANNUAL_PRICE_ID=${_env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID || 'missing'}`);\n        }\n        // Check if user already has an active subscription\n        const existingSubscription = await this.getSubscription(userId);\n        if ((0,_utils_subscription__WEBPACK_IMPORTED_MODULE_5__.isSubscriptionActive)(existingSubscription)) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"You already have an active subscription\"\n            });\n        }\n        // Get or create Stripe customer\n        let stripeCustomerId = existingSubscription?.stripeCustomerId;\n        if (!stripeCustomerId) {\n            stripeCustomerId = await (0,_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.createStripeCustomer)(email, userId);\n            // Store customer ID if we have a subscription record\n            if (existingSubscription) {\n                await this.db.subscription.update({\n                    where: {\n                        id: existingSubscription.id\n                    },\n                    data: {\n                        stripeCustomerId\n                    }\n                });\n            }\n        }\n        // Create checkout session\n        const session = await (0,_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.createCheckoutSession)({\n            customerId: stripeCustomerId,\n            priceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID,\n            successUrl,\n            cancelUrl,\n            metadata: {\n                userId\n            }\n        });\n        // Create or update subscription record with pending status\n        await this.db.subscription.upsert({\n            where: {\n                userId\n            },\n            create: {\n                userId,\n                stripeCustomerId,\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING,\n                stripePriceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID\n            },\n            update: {\n                stripeCustomerId,\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING,\n                stripePriceId: _env_mjs__WEBPACK_IMPORTED_MODULE_4__.env.STRIPE_ANNUAL_PRICE_ID\n            }\n        });\n        return {\n            sessionId: session.id,\n            url: session.url\n        };\n    }\n    /**\n   * Cancel a subscription\n   */ async cancelSubscription(userId) {\n        const subscription = await this.getSubscription(userId);\n        if (!subscription || !subscription.stripeSubscriptionId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"No active subscription found\"\n            });\n        }\n        if (!_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"Stripe is not configured\"\n            });\n        }\n        // Cancel at period end in Stripe\n        const stripeSubscription = await _utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe.subscriptions.update(subscription.stripeSubscriptionId, {\n            cancel_at_period_end: true\n        });\n        // Update database\n        await this.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: {\n                cancelAtPeriodEnd: true,\n                canceledAt: new Date()\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Subscription canceled\", {\n            userId,\n            subscriptionId: subscription.id,\n            stripeSubscriptionId: subscription.stripeSubscriptionId\n        });\n        return {\n            success: true,\n            cancelAtPeriodEnd: stripeSubscription.cancel_at_period_end,\n            currentPeriodEnd: subscription.currentPeriodEnd\n        };\n    }\n    /**\n   * Resume a canceled subscription\n   */ async resumeSubscription(userId) {\n        const subscription = await this.getSubscription(userId);\n        if (!subscription || !subscription.stripeSubscriptionId) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"No subscription found\"\n            });\n        }\n        if (!subscription.cancelAtPeriodEnd) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Subscription is not scheduled for cancellation\"\n            });\n        }\n        if (!_utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"Stripe is not configured\"\n            });\n        }\n        // Resume subscription in Stripe\n        const stripeSubscription = await _utils_stripe__WEBPACK_IMPORTED_MODULE_2__.stripe.subscriptions.update(subscription.stripeSubscriptionId, {\n            cancel_at_period_end: false\n        });\n        // Update database\n        await this.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: {\n                cancelAtPeriodEnd: false,\n                canceledAt: null\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Subscription resumed\", {\n            userId,\n            subscriptionId: subscription.id,\n            stripeSubscriptionId: subscription.stripeSubscriptionId\n        });\n        return {\n            success: true,\n            cancelAtPeriodEnd: stripeSubscription.cancel_at_period_end\n        };\n    }\n    /**\n   * Handle successful subscription checkout\n   */ async handleCheckoutComplete(userId, stripeSubscriptionId, stripePriceId, currentPeriodStart, currentPeriodEnd) {\n        await this.db.subscription.upsert({\n            where: {\n                userId\n            },\n            create: {\n                userId,\n                stripeSubscriptionId,\n                stripePriceId,\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE,\n                currentPeriodStart,\n                currentPeriodEnd,\n                expiresAt: currentPeriodEnd\n            },\n            update: {\n                stripeSubscriptionId,\n                stripePriceId,\n                status: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE,\n                currentPeriodStart,\n                currentPeriodEnd,\n                expiresAt: currentPeriodEnd\n            }\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Checkout completed and subscription activated\", {\n            userId,\n            stripeSubscriptionId\n        });\n    }\n    /**\n   * Update subscription status from Stripe webhook\n   */ async updateSubscriptionFromWebhook(stripeSubscriptionId, updates) {\n        const subscription = await this.db.subscription.findFirst({\n            where: {\n                stripeSubscriptionId\n            }\n        });\n        if (!subscription) {\n            _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.error(\"Subscription not found for webhook update\", {\n                stripeSubscriptionId\n            });\n            throw new Error(\"Subscription not found\");\n        }\n        await this.db.subscription.update({\n            where: {\n                id: subscription.id\n            },\n            data: updates\n        });\n        _utils_logger__WEBPACK_IMPORTED_MODULE_3__.logger.info(\"Subscription updated from webhook\", {\n            subscriptionId: subscription.id,\n            stripeSubscriptionId,\n            updates\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9zdWJzY3JpcHRpb24uc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFvRjtBQUMzQztBQU1qQjtBQUNnQjtBQUNSO0FBQzRCO0FBRXJELE1BQU1RO0lBQ1gsWUFBWSxFQUF3QixDQUFFO2FBQWxCQyxLQUFBQTtJQUFtQjtJQUV2Qzs7R0FFQyxHQUNELE1BQU1DLHNCQUFzQkMsTUFBYyxFQUFFO1FBQzFDLE1BQU1DLGVBQWUsTUFBTSxJQUFJLENBQUNILEVBQUUsQ0FBQ0csWUFBWSxDQUFDQyxVQUFVLENBQUM7WUFDekRDLE9BQU87Z0JBQUVIO1lBQU87UUFDbEI7UUFFQSxPQUFPO1lBQ0xJLGlCQUFpQixDQUFDLENBQUNIO1lBQ25CSSxRQUFRSixjQUFjSSxVQUFVO1lBQ2hDQyxXQUFXTCxjQUFjSyxhQUFhO1lBQ3RDQyxrQkFBa0JOLGNBQWNNLG9CQUFvQjtZQUNwREMsbUJBQW1CUCxjQUFjTyxxQkFBcUI7UUFDeEQ7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTUMsZ0JBQWdCVCxNQUFjLEVBQUU7UUFDcEMsT0FBTyxNQUFNLElBQUksQ0FBQ0YsRUFBRSxDQUFDRyxZQUFZLENBQUNDLFVBQVUsQ0FBQztZQUMzQ0MsT0FBTztnQkFBRUg7WUFBTztRQUNsQjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxNQUFNUixzQkFDSlEsTUFBYyxFQUNkVSxLQUFhLEVBQ2JDLFVBQWtCLEVBQ2xCQyxTQUFpQixFQUNqQjtRQUNBbEIsaURBQU1BLENBQUNtQixJQUFJLENBQUMsNkJBQTZCO1lBQ3ZDYjtZQUNBVTtZQUNBSSxjQUFjO2dCQUNaQyxjQUFjLENBQUMsQ0FBQ3BCLHlDQUFHQSxDQUFDcUIsaUJBQWlCO2dCQUNyQ0MsWUFBWSxDQUFDLENBQUN0Qix5Q0FBR0EsQ0FBQ3VCLHNCQUFzQjtnQkFDeENDLFNBQVN4Qix5Q0FBR0EsQ0FBQ3VCLHNCQUFzQjtZQUNyQztRQUNGO1FBRUEsSUFBSSxDQUFDdkIseUNB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QjtRQUNSO1FBRUF6RCxpREFBTUEsQ0FBQ21CLElBQUksQ0FBQyxxQ0FBcUM7WUFDL0MrQixnQkFBZ0IzQyxhQUFheUIsRUFBRTtZQUMvQlk7WUFDQWE7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvc2VydmljZXMvc3Vic2NyaXB0aW9uLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBQcmlzbWEsIHR5cGUgUHJpc21hQ2xpZW50LCBTdWJzY3JpcHRpb25TdGF0dXMgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gXCJAdHJwYy9zZXJ2ZXJcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVN0cmlwZUN1c3RvbWVyLFxuICBjcmVhdGVDaGVja291dFNlc3Npb24sXG4gIEFOTlVBTF9TVUJTQ1JJUFRJT05fQ09ORklHLFxuICBzdHJpcGUsXG59IGZyb20gXCJ+L3V0aWxzL3N0cmlwZVwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIn4vdXRpbHMvbG9nZ2VyXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwifi9lbnYubWpzXCI7XG5pbXBvcnQgeyBpc1N1YnNjcmlwdGlvbkFjdGl2ZSB9IGZyb20gXCJ+L3V0aWxzL3N1YnNjcmlwdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZGI6IFByaXNtYUNsaWVudCkge31cblxuICAvKipcbiAgICogR2V0IHN1YnNjcmlwdGlvbiBzdGF0dXMgZm9yIGEgdXNlclxuICAgKi9cbiAgYXN5bmMgZ2V0U3Vic2NyaXB0aW9uU3RhdHVzKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24uZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBoYXNTdWJzY3JpcHRpb246ICEhc3Vic2NyaXB0aW9uLFxuICAgICAgc3RhdHVzOiBzdWJzY3JpcHRpb24/LnN0YXR1cyA/PyBudWxsLFxuICAgICAgZXhwaXJlc0F0OiBzdWJzY3JpcHRpb24/LmV4cGlyZXNBdCA/PyBudWxsLFxuICAgICAgY3VycmVudFBlcmlvZEVuZDogc3Vic2NyaXB0aW9uPy5jdXJyZW50UGVyaW9kRW5kID8/IG51bGwsXG4gICAgICBjYW5jZWxBdFBlcmlvZEVuZDogc3Vic2NyaXB0aW9uPy5jYW5jZWxBdFBlcmlvZEVuZCA/PyBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBmdWxsIHN1YnNjcmlwdGlvbiBkZXRhaWxzIGZvciBhIHVzZXJcbiAgICovXG4gIGFzeW5jIGdldFN1YnNjcmlwdGlvbih1c2VySWQ6IHN0cmluZykge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLnN1YnNjcmlwdGlvbi5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBTdHJpcGUgY2hlY2tvdXQgc2Vzc2lvbiBmb3Igc3Vic2NyaXB0aW9uXG4gICAqL1xuICBhc3luYyBjcmVhdGVDaGVja291dFNlc3Npb24oXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgZW1haWw6IHN0cmluZyxcbiAgICBzdWNjZXNzVXJsOiBzdHJpbmcsXG4gICAgY2FuY2VsVXJsOiBzdHJpbmdcbiAgKSB7XG4gICAgbG9nZ2VyLmluZm8oXCJDcmVhdGluZyBjaGVja291dCBzZXNzaW9uXCIsIHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGVtYWlsLFxuICAgICAgc3RyaXBlQ29uZmlnOiB7XG4gICAgICAgIGhhc1NlY3JldEtleTogISFlbnYuU1RSSVBFX1NFQ1JFVF9LRVksXG4gICAgICAgIGhhc1ByaWNlSWQ6ICEhZW52LlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQsXG4gICAgICAgIHByaWNlSWQ6IGVudi5TVFJJUEVfQU5OVUFMX1BSSUNFX0lELFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghZW52LlNUUklQRV9TRUNSRVRfS0VZIHx8ICFlbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlN0cmlwZSBjb25maWd1cmF0aW9uIGlzIG1pc3NpbmcuIFBsZWFzZSBzZXQgU1RSSVBFX1NFQ1JFVF9LRVkgYW5kIFNUUklQRV9BTk5VQUxfUFJJQ0VfSUQgaW4geW91ciAuZW52IGZpbGUuIFwiICtcbiAgICAgICAgYEN1cnJlbnQgY29uZmlnOiBTVFJJUEVfU0VDUkVUX0tFWT0ke2Vudi5TVFJJUEVfU0VDUkVUX0tFWSA/ICdzZXQnIDogJ21pc3NpbmcnfSwgYCArXG4gICAgICAgIGBTVFJJUEVfQU5OVUFMX1BSSUNFX0lEPSR7ZW52LlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQgfHwgJ21pc3NpbmcnfWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGhhcyBhbiBhY3RpdmUgc3Vic2NyaXB0aW9uXG4gICAgY29uc3QgZXhpc3RpbmdTdWJzY3JpcHRpb24gPSBhd2FpdCB0aGlzLmdldFN1YnNjcmlwdGlvbih1c2VySWQpO1xuICAgIGlmIChpc1N1YnNjcmlwdGlvbkFjdGl2ZShleGlzdGluZ1N1YnNjcmlwdGlvbikpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiWW91IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgc3Vic2NyaXB0aW9uXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHZXQgb3IgY3JlYXRlIFN0cmlwZSBjdXN0b21lclxuICAgIGxldCBzdHJpcGVDdXN0b21lcklkID0gZXhpc3RpbmdTdWJzY3JpcHRpb24/LnN0cmlwZUN1c3RvbWVySWQ7XG4gICAgaWYgKCFzdHJpcGVDdXN0b21lcklkKSB7XG4gICAgICBzdHJpcGVDdXN0b21lcklkID0gYXdhaXQgY3JlYXRlU3RyaXBlQ3VzdG9tZXIoZW1haWwsIHVzZXJJZCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGN1c3RvbWVyIElEIGlmIHdlIGhhdmUgYSBzdWJzY3JpcHRpb24gcmVjb3JkXG4gICAgICBpZiAoZXhpc3RpbmdTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdTdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHN0cmlwZUN1c3RvbWVySWQgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGNoZWNrb3V0IHNlc3Npb25cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uKHtcbiAgICAgIGN1c3RvbWVySWQ6IHN0cmlwZUN1c3RvbWVySWQsXG4gICAgICBwcmljZUlkOiBlbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCxcbiAgICAgIHN1Y2Nlc3NVcmwsXG4gICAgICBjYW5jZWxVcmwsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB1c2VySWQsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSBzdWJzY3JpcHRpb24gcmVjb3JkIHdpdGggcGVuZGluZyBzdGF0dXNcbiAgICBhd2FpdCB0aGlzLmRiLnN1YnNjcmlwdGlvbi51cHNlcnQoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBzdHJpcGVDdXN0b21lcklkLFxuICAgICAgICBzdGF0dXM6IFN1YnNjcmlwdGlvblN0YXR1cy5QRU5ESU5HLFxuICAgICAgICBzdHJpcGVQcmljZUlkOiBlbnYuU1RSSVBFX0FOTlVBTF9QUklDRV9JRCxcbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IHtcbiAgICAgICAgc3RyaXBlQ3VzdG9tZXJJZCxcbiAgICAgICAgc3RhdHVzOiBTdWJzY3JpcHRpb25TdGF0dXMuUEVORElORyxcbiAgICAgICAgc3RyaXBlUHJpY2VJZDogZW52LlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbi5pZCxcbiAgICAgIHVybDogc2Vzc2lvbi51cmwsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWwgYSBzdWJzY3JpcHRpb25cbiAgICovXG4gIGFzeW5jIGNhbmNlbFN1YnNjcmlwdGlvbih1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMuZ2V0U3Vic2NyaXB0aW9uKHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5zdHJpcGVTdWJzY3JpcHRpb25JZCkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gYWN0aXZlIHN1YnNjcmlwdGlvbiBmb3VuZFwiLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFzdHJpcGUpIHtcbiAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICBtZXNzYWdlOiBcIlN0cmlwZSBpcyBub3QgY29uZmlndXJlZFwiLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2FuY2VsIGF0IHBlcmlvZCBlbmQgaW4gU3RyaXBlXG4gICAgY29uc3Qgc3RyaXBlU3Vic2NyaXB0aW9uID0gYXdhaXQgc3RyaXBlLnN1YnNjcmlwdGlvbnMudXBkYXRlKFxuICAgICAgc3Vic2NyaXB0aW9uLnN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgICAgeyBjYW5jZWxfYXRfcGVyaW9kX2VuZDogdHJ1ZSB9XG4gICAgKTtcblxuICAgIC8vIFVwZGF0ZSBkYXRhYmFzZVxuICAgIGF3YWl0IHRoaXMuZGIuc3Vic2NyaXB0aW9uLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogc3Vic2NyaXB0aW9uLmlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNhbmNlbEF0UGVyaW9kRW5kOiB0cnVlLFxuICAgICAgICBjYW5jZWxlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5pbmZvKFwiU3Vic2NyaXB0aW9uIGNhbmNlbGVkXCIsIHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICBzdHJpcGVTdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLnN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjYW5jZWxBdFBlcmlvZEVuZDogc3RyaXBlU3Vic2NyaXB0aW9uLmNhbmNlbF9hdF9wZXJpb2RfZW5kLFxuICAgICAgY3VycmVudFBlcmlvZEVuZDogc3Vic2NyaXB0aW9uLmN1cnJlbnRQZXJpb2RFbmQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1bWUgYSBjYW5jZWxlZCBzdWJzY3JpcHRpb25cbiAgICovXG4gIGFzeW5jIHJlc3VtZVN1YnNjcmlwdGlvbih1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMuZ2V0U3Vic2NyaXB0aW9uKHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5zdHJpcGVTdWJzY3JpcHRpb25JZCkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm8gc3Vic2NyaXB0aW9uIGZvdW5kXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJTdWJzY3JpcHRpb24gaXMgbm90IHNjaGVkdWxlZCBmb3IgY2FuY2VsbGF0aW9uXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXN0cmlwZSkge1xuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBSZXN1bWUgc3Vic2NyaXB0aW9uIGluIFN0cmlwZVxuICAgIGNvbnN0IHN0cmlwZVN1YnNjcmlwdGlvbiA9IGF3YWl0IHN0cmlwZS5zdWJzY3JpcHRpb25zLnVwZGF0ZShcbiAgICAgIHN1YnNjcmlwdGlvbi5zdHJpcGVTdWJzY3JpcHRpb25JZCxcbiAgICAgIHsgY2FuY2VsX2F0X3BlcmlvZF9lbmQ6IGZhbHNlIH1cbiAgICApO1xuXG4gICAgLy8gVXBkYXRlIGRhdGFiYXNlXG4gICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBzdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IGZhbHNlLFxuICAgICAgICBjYW5jZWxlZEF0OiBudWxsLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5pbmZvKFwiU3Vic2NyaXB0aW9uIHJlc3VtZWRcIiwge1xuICAgICAgdXNlcklkLFxuICAgICAgc3Vic2NyaXB0aW9uSWQ6IHN1YnNjcmlwdGlvbi5pZCxcbiAgICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQsXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGNhbmNlbEF0UGVyaW9kRW5kOiBzdHJpcGVTdWJzY3JpcHRpb24uY2FuY2VsX2F0X3BlcmlvZF9lbmQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgc3VjY2Vzc2Z1bCBzdWJzY3JpcHRpb24gY2hlY2tvdXRcbiAgICovXG4gIGFzeW5jIGhhbmRsZUNoZWNrb3V0Q29tcGxldGUoXG4gICAgdXNlcklkOiBzdHJpbmcsXG4gICAgc3RyaXBlU3Vic2NyaXB0aW9uSWQ6IHN0cmluZyxcbiAgICBzdHJpcGVQcmljZUlkOiBzdHJpbmcsXG4gICAgY3VycmVudFBlcmlvZFN0YXJ0OiBEYXRlLFxuICAgIGN1cnJlbnRQZXJpb2RFbmQ6IERhdGVcbiAgKSB7XG4gICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgc3RyaXBlU3Vic2NyaXB0aW9uSWQsXG4gICAgICAgIHN0cmlwZVByaWNlSWQsXG4gICAgICAgIHN0YXR1czogU3Vic2NyaXB0aW9uU3RhdHVzLkFDVElWRSxcbiAgICAgICAgY3VycmVudFBlcmlvZFN0YXJ0LFxuICAgICAgICBjdXJyZW50UGVyaW9kRW5kLFxuICAgICAgICBleHBpcmVzQXQ6IGN1cnJlbnRQZXJpb2RFbmQsXG4gICAgICB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgICAgICBzdHJpcGVQcmljZUlkLFxuICAgICAgICBzdGF0dXM6IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUsXG4gICAgICAgIGN1cnJlbnRQZXJpb2RTdGFydCxcbiAgICAgICAgY3VycmVudFBlcmlvZEVuZCxcbiAgICAgICAgZXhwaXJlc0F0OiBjdXJyZW50UGVyaW9kRW5kLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5pbmZvKFwiQ2hlY2tvdXQgY29tcGxldGVkIGFuZCBzdWJzY3JpcHRpb24gYWN0aXZhdGVkXCIsIHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzdWJzY3JpcHRpb24gc3RhdHVzIGZyb20gU3RyaXBlIHdlYmhvb2tcbiAgICovXG4gIGFzeW5jIHVwZGF0ZVN1YnNjcmlwdGlvbkZyb21XZWJob29rKFxuICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdHJpbmcsXG4gICAgdXBkYXRlczogUGFydGlhbDxQcmlzbWEuU3Vic2NyaXB0aW9uVXBkYXRlSW5wdXQ+XG4gICkge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMuZGIuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyBzdHJpcGVTdWJzY3JpcHRpb25JZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcIlN1YnNjcmlwdGlvbiBub3QgZm91bmQgZm9yIHdlYmhvb2sgdXBkYXRlXCIsIHtcbiAgICAgICAgc3RyaXBlU3Vic2NyaXB0aW9uSWQsXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlN1YnNjcmlwdGlvbiBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5kYi5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBzdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHVwZGF0ZXMsXG4gICAgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyhcIlN1YnNjcmlwdGlvbiB1cGRhdGVkIGZyb20gd2ViaG9va1wiLCB7XG4gICAgICBzdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLmlkLFxuICAgICAgc3RyaXBlU3Vic2NyaXB0aW9uSWQsXG4gICAgICB1cGRhdGVzLFxuICAgIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIlN1YnNjcmlwdGlvblN0YXR1cyIsIlRSUENFcnJvciIsImNyZWF0ZVN0cmlwZUN1c3RvbWVyIiwiY3JlYXRlQ2hlY2tvdXRTZXNzaW9uIiwic3RyaXBlIiwibG9nZ2VyIiwiZW52IiwiaXNTdWJzY3JpcHRpb25BY3RpdmUiLCJTdWJzY3JpcHRpb25TZXJ2aWNlIiwiZGIiLCJnZXRTdWJzY3JpcHRpb25TdGF0dXMiLCJ1c2VySWQiLCJzdWJzY3JpcHRpb24iLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJoYXNTdWJzY3JpcHRpb24iLCJzdGF0dXMiLCJleHBpcmVzQXQiLCJjdXJyZW50UGVyaW9kRW5kIiwiY2FuY2VsQXRQZXJpb2RFbmQiLCJnZXRTdWJzY3JpcHRpb24iLCJlbWFpbCIsInN1Y2Nlc3NVcmwiLCJjYW5jZWxVcmwiLCJpbmZvIiwic3RyaXBlQ29uZmlnIiwiaGFzU2VjcmV0S2V5IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJoYXNQcmljZUlkIiwiU1RSSVBFX0FOTlVBTF9QUklDRV9JRCIsInByaWNlSWQiLCJFcnJvciIsImV4aXN0aW5nU3Vic2NyaXB0aW9uIiwiY29kZSIsIm1lc3NhZ2UiLCJzdHJpcGVDdXN0b21lcklkIiwidXBkYXRlIiwiaWQiLCJkYXRhIiwic2Vzc2lvbiIsImN1c3RvbWVySWQiLCJtZXRhZGF0YSIsInVwc2VydCIsImNyZWF0ZSIsIlBFTkRJTkciLCJzdHJpcGVQcmljZUlkIiwic2Vzc2lvbklkIiwidXJsIiwiY2FuY2VsU3Vic2NyaXB0aW9uIiwic3RyaXBlU3Vic2NyaXB0aW9uSWQiLCJzdHJpcGVTdWJzY3JpcHRpb24iLCJzdWJzY3JpcHRpb25zIiwiY2FuY2VsX2F0X3BlcmlvZF9lbmQiLCJjYW5jZWxlZEF0IiwiRGF0ZSIsInN1YnNjcmlwdGlvbklkIiwic3VjY2VzcyIsInJlc3VtZVN1YnNjcmlwdGlvbiIsImhhbmRsZUNoZWNrb3V0Q29tcGxldGUiLCJjdXJyZW50UGVyaW9kU3RhcnQiLCJBQ1RJVkUiLCJ1cGRhdGVTdWJzY3JpcHRpb25Gcm9tV2ViaG9vayIsInVwZGF0ZXMiLCJmaW5kRmlyc3QiLCJlcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/services/subscription.service.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/encryption.ts":
/*!*********************************!*\
  !*** ./src/utils/encryption.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptPII: () => (/* binding */ decryptPII),\n/* harmony export */   encryptPII: () => (/* binding */ encryptPII),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword)\n/* harmony export */ });\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto-js */ \"crypto-js\");\n/* harmony import */ var crypto_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_env_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n_env_mjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Use environment variable or fallback for development\nconst ENCRYPTION_KEY = _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.ENCRYPTION_KEY || \"dev-32-character-encryption-key!!\";\nfunction encryptPII(text) {\n    if (!text) return null;\n    try {\n        return crypto_js__WEBPACK_IMPORTED_MODULE_0___default().AES.encrypt(text, ENCRYPTION_KEY).toString();\n    } catch (error) {\n        console.error(\"Encryption error:\", error);\n        throw new Error(\"Failed to encrypt PII\");\n    }\n}\nfunction decryptPII(encryptedText) {\n    if (!encryptedText) return null;\n    try {\n        const decrypted = crypto_js__WEBPACK_IMPORTED_MODULE_0___default().AES.decrypt(encryptedText, ENCRYPTION_KEY);\n        return decrypted.toString((crypto_js__WEBPACK_IMPORTED_MODULE_0___default().enc).Utf8);\n    } catch (error) {\n        console.error(\"Decryption error:\", error);\n        throw new Error(\"Failed to decrypt PII\");\n    }\n}\n// Hash password using bcrypt\nasync function hashPassword(password) {\n    const bcrypt = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! bcryptjs */ \"bcryptjs\"));\n    return bcrypt.hash(password, 12);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9lbmNyeXB0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNEO0FBRWhDLHVEQUF1RDtBQUN2RCxNQUFNRSxpQkFBaUJELHlDQUFHQSxDQUFDQyxjQUFjLElBQUk7QUFFdEMsU0FBU0MsV0FBV0MsSUFBK0I7SUFDeEQsSUFBSSxDQUFDQSxNQUFNLE9BQU87SUFFbEIsSUFBSTtRQUNGLE9BQU9KLG9EQUFZLENBQUNNLE9BQU8sQ0FBQ0YsTUFBTUYsZ0JBQWdCSyxRQUFRO0lBQzVELEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxNQUFNLElBQUlFLE1BQU07SUFDbEI7QUFDRjtBQUVPLFNBQVNDLFdBQVdDLGFBQXdDO0lBQ2pFLElBQUksQ0FBQ0EsZUFBZSxPQUFPO0lBRTNCLElBQUk7UUFDRixNQUFNQyxZQUFZYixvREFBWSxDQUFDYyxPQUFPLENBQUNGLGVBQWVWO1FBQ3RELE9BQU9XLFVBQVVOLFFBQVEsQ0FBQ1Asc0RBQVksQ0FBQ2dCLElBQUk7SUFDN0MsRUFBRSxPQUFPUixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxxQkFBcUJBO1FBQ25DLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtBQUNGO0FBRUEsNkJBQTZCO0FBQ3RCLGVBQWVPLGFBQWFDLFFBQWdCO0lBQ2pELE1BQU1DLFNBQVMsTUFBTSxnSEFBa0I7SUFDdkMsT0FBT0EsT0FBT0MsSUFBSSxDQUFDRixVQUFVO0FBQy9CIiwic291cmNlcyI6WyIvVXNlcnMvc2VyZ2VpLmRhdmlkb3ZAY2xlYXJyb3V0ZS5pby9Eb2N1bWVudHMvaG9saWRheS1wcm9ncmFtLWFnZ3JlZ2F0b3IvYXBwcy93ZWIvc3JjL3V0aWxzL2VuY3J5cHRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENyeXB0b0pTIGZyb20gXCJjcnlwdG8tanNcIjtcbmltcG9ydCB7IGVudiB9IGZyb20gXCJ+L2Vudi5tanNcIjtcblxuLy8gVXNlIGVudmlyb25tZW50IHZhcmlhYmxlIG9yIGZhbGxiYWNrIGZvciBkZXZlbG9wbWVudFxuY29uc3QgRU5DUllQVElPTl9LRVkgPSBlbnYuRU5DUllQVElPTl9LRVkgfHwgXCJkZXYtMzItY2hhcmFjdGVyLWVuY3J5cHRpb24ta2V5ISFcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRQSUkodGV4dDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIXRleHQpIHJldHVybiBudWxsO1xuICBcbiAgdHJ5IHtcbiAgICByZXR1cm4gQ3J5cHRvSlMuQUVTLmVuY3J5cHQodGV4dCwgRU5DUllQVElPTl9LRVkpLnRvU3RyaW5nKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVuY3J5cHRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZW5jcnlwdCBQSUlcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY3J5cHRQSUkoZW5jcnlwdGVkVGV4dDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIWVuY3J5cHRlZFRleHQpIHJldHVybiBudWxsO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNyeXB0ZWQgPSBDcnlwdG9KUy5BRVMuZGVjcnlwdChlbmNyeXB0ZWRUZXh0LCBFTkNSWVBUSU9OX0tFWSk7XG4gICAgcmV0dXJuIGRlY3J5cHRlZC50b1N0cmluZyhDcnlwdG9KUy5lbmMuVXRmOCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRlY3J5cHRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZGVjcnlwdCBQSUlcIik7XG4gIH1cbn1cblxuLy8gSGFzaCBwYXNzd29yZCB1c2luZyBiY3J5cHRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGJjcnlwdCA9IGF3YWl0IGltcG9ydChcImJjcnlwdGpzXCIpO1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEyKTtcbn0iXSwibmFtZXMiOlsiQ3J5cHRvSlMiLCJlbnYiLCJFTkNSWVBUSU9OX0tFWSIsImVuY3J5cHRQSUkiLCJ0ZXh0IiwiQUVTIiwiZW5jcnlwdCIsInRvU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJkZWNyeXB0UElJIiwiZW5jcnlwdGVkVGV4dCIsImRlY3J5cHRlZCIsImRlY3J5cHQiLCJlbmMiLCJVdGY4IiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJiY3J5cHQiLCJoYXNoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/encryption.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/logger.ts":
/*!*****************************!*\
  !*** ./src/utils/logger.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StructuredLogger: () => (/* binding */ StructuredLogger),\n/* harmony export */   generateCorrelationId: () => (/* binding */ generateCorrelationId),\n/* harmony export */   getCorrelationId: () => (/* binding */ getCorrelationId),\n/* harmony export */   logger: () => (/* binding */ logger)\n/* harmony export */ });\n// PII patterns to scrub from logs\nconst PII_PATTERNS = [\n    // Email addresses\n    {\n        pattern: /([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})/g,\n        replacement: '[REDACTED_EMAIL]'\n    },\n    // Phone numbers (Australian format)\n    {\n        pattern: /(\\+?61|0)[2-9]\\d{8}/g,\n        replacement: '[REDACTED_PHONE]'\n    },\n    // Credit card numbers\n    {\n        pattern: /\\b\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}[\\s-]?\\d{4}\\b/g,\n        replacement: '[REDACTED_CC]'\n    },\n    // Australian Tax File Numbers\n    {\n        pattern: /\\b\\d{3}[\\s-]?\\d{3}[\\s-]?\\d{3}\\b/g,\n        replacement: '[REDACTED_TFN]'\n    },\n    // Names in common fields (updated to handle JSON structure)\n    {\n        pattern: /\"((?:[\\w.]+\\.)?(?:name|firstName|lastName|fullName))\"\\s*:\\s*\"[^\"]+\"/gi,\n        replacement: (match, field)=>`\"${field}\":\"[REDACTED_NAME]\"`\n    },\n    // Addresses\n    {\n        pattern: /\\d+\\s+[\\w\\s]+\\s+(Street|St|Avenue|Ave|Road|Rd|Drive|Dr|Court|Ct|Lane|Ln)/gi,\n        replacement: '[REDACTED_ADDRESS]'\n    },\n    // API keys and tokens (updated to handle JSON structure)\n    {\n        pattern: /\"(api[_-]?key|apiKey|token|secret|password)\"\\s*:\\s*\"[^\"]+\"/gi,\n        replacement: (match, field)=>`\"${field}\":\"[REDACTED]\"`\n    }\n];\nclass StructuredLogger {\n    constructor(environment = \"development\" || 0, service = 'holiday-aggregator'){\n        this.environment = environment;\n        this.service = service;\n    }\n    /**\n   * Scrubs PII from any data object\n   */ scrubPII(data) {\n        if (!data) return data;\n        const jsonString = JSON.stringify(data);\n        let scrubbed = jsonString;\n        for (const { pattern, replacement } of PII_PATTERNS){\n            if (typeof replacement === 'string') {\n                scrubbed = scrubbed.replace(pattern, replacement);\n            } else {\n                scrubbed = scrubbed.replace(pattern, replacement);\n            }\n        }\n        try {\n            return JSON.parse(scrubbed);\n        } catch  {\n            // If we can't parse it back, return the original data\n            // but log a warning\n            console.warn('Failed to parse scrubbed data, returning original');\n            return data;\n        }\n    }\n    /**\n   * Creates a log entry with proper structure\n   */ createLogEntry(level, message, context, data, error) {\n        const entry = {\n            timestamp: new Date().toISOString(),\n            level,\n            message,\n            context: {\n                ...context,\n                environment: this.environment,\n                service: this.service\n            }\n        };\n        if (data) {\n            entry.data = this.scrubPII(data);\n        }\n        if (error) {\n            entry.error = {\n                name: error.name,\n                message: error.message,\n                stack: this.environment === 'development' || this.environment === 'test' ? error.stack : undefined\n            };\n        }\n        return entry;\n    }\n    /**\n   * Outputs the log entry\n   */ output(entry) {\n        const json = JSON.stringify(entry);\n        // In production, we'd send this to a log aggregation service\n        // For now, we'll use console methods based on level\n        switch(entry.level){\n            case 'debug':\n                if (this.environment === 'development') {\n                    console.debug(json);\n                }\n                break;\n            case 'info':\n                console.info(json);\n                break;\n            case 'warn':\n                console.warn(json);\n                break;\n            case 'error':\n                console.error(json);\n                break;\n        }\n    }\n    debug(message, context, data) {\n        const entry = this.createLogEntry('debug', message, context, data);\n        this.output(entry);\n    }\n    info(message, context, data) {\n        const entry = this.createLogEntry('info', message, context, data);\n        this.output(entry);\n    }\n    warn(message, context, data) {\n        const entry = this.createLogEntry('warn', message, context, data);\n        this.output(entry);\n    }\n    error(message, context, error, data) {\n        const entry = this.createLogEntry('error', message, context, data, error);\n        this.output(entry);\n    }\n}\n// Default logger instance\nconst logger = new StructuredLogger();\n/**\n * Extracts or generates a correlation ID from a request\n */ function getCorrelationId(req) {\n    const correlationId = req.headers['x-correlation-id'];\n    return correlationId || generateCorrelationId();\n}\n/**\n * Generates a new correlation ID\n */ function generateCorrelationId() {\n    // Simple implementation - in production, you might use nanoid or uuid\n    return `${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVDLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHLEtBQUs7QUFDdkUiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdXRpbHMvbG9nZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dEFwaVJlcXVlc3QgfSBmcm9tICduZXh0JztcblxuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJztcblxuZXhwb3J0IGludGVyZmFjZSBMb2dDb250ZXh0IHtcbiAgY29ycmVsYXRpb25JZDogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIHNlc3Npb25JZD86IHN0cmluZztcbiAgam91cm5leT86IHN0cmluZztcbiAgdHJhY2VJZD86IHN0cmluZztcbiAgc3BhbklkPzogc3RyaW5nO1xuICBba2V5OiBzdHJpbmddOiB1bmtub3duOyAvLyBBbGxvdyBhZGRpdGlvbmFsIHByb3BlcnRpZXNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dFbnRyeSB7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICBsZXZlbDogTG9nTGV2ZWw7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY29udGV4dDogTG9nQ29udGV4dDtcbiAgZGF0YT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICBlcnJvcj86IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHN0YWNrPzogc3RyaW5nO1xuICB9O1xufVxuXG4vLyBQSUkgcGF0dGVybnMgdG8gc2NydWIgZnJvbSBsb2dzXG5jb25zdCBQSUlfUEFUVEVSTlM6IEFycmF5PHsgcGF0dGVybjogUmVnRXhwOyByZXBsYWNlbWVudDogc3RyaW5nIHwgKChtYXRjaDogc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSkgPT4gc3RyaW5nKSB9PiA9IFtcbiAgLy8gRW1haWwgYWRkcmVzc2VzXG4gIHsgcGF0dGVybjogLyhbYS16QS1aMC05Ll8lKy1dKylAKFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Mix9KS9nLCByZXBsYWNlbWVudDogJ1tSRURBQ1RFRF9FTUFJTF0nIH0sXG4gIC8vIFBob25lIG51bWJlcnMgKEF1c3RyYWxpYW4gZm9ybWF0KVxuICB7IHBhdHRlcm46IC8oXFwrPzYxfDApWzItOV1cXGR7OH0vZywgcmVwbGFjZW1lbnQ6ICdbUkVEQUNURURfUEhPTkVdJyB9LFxuICAvLyBDcmVkaXQgY2FyZCBudW1iZXJzXG4gIHsgcGF0dGVybjogL1xcYlxcZHs0fVtcXHMtXT9cXGR7NH1bXFxzLV0/XFxkezR9W1xccy1dP1xcZHs0fVxcYi9nLCByZXBsYWNlbWVudDogJ1tSRURBQ1RFRF9DQ10nIH0sXG4gIC8vIEF1c3RyYWxpYW4gVGF4IEZpbGUgTnVtYmVyc1xuICB7IHBhdHRlcm46IC9cXGJcXGR7M31bXFxzLV0/XFxkezN9W1xccy1dP1xcZHszfVxcYi9nLCByZXBsYWNlbWVudDogJ1tSRURBQ1RFRF9URk5dJyB9LFxuICAvLyBOYW1lcyBpbiBjb21tb24gZmllbGRzICh1cGRhdGVkIHRvIGhhbmRsZSBKU09OIHN0cnVjdHVyZSlcbiAgeyBcbiAgICBwYXR0ZXJuOiAvXCIoKD86W1xcdy5dK1xcLik/KD86bmFtZXxmaXJzdE5hbWV8bGFzdE5hbWV8ZnVsbE5hbWUpKVwiXFxzKjpcXHMqXCJbXlwiXStcIi9naSwgXG4gICAgcmVwbGFjZW1lbnQ6IChtYXRjaDogc3RyaW5nLCBmaWVsZDogc3RyaW5nKSA9PiBgXCIke2ZpZWxkfVwiOlwiW1JFREFDVEVEX05BTUVdXCJgXG4gIH0sXG4gIC8vIEFkZHJlc3Nlc1xuICB7IHBhdHRlcm46IC9cXGQrXFxzK1tcXHdcXHNdK1xccysoU3RyZWV0fFN0fEF2ZW51ZXxBdmV8Um9hZHxSZHxEcml2ZXxEcnxDb3VydHxDdHxMYW5lfExuKS9naSwgcmVwbGFjZW1lbnQ6ICdbUkVEQUNURURfQUREUkVTU10nIH0sXG4gIC8vIEFQSSBrZXlzIGFuZCB0b2tlbnMgKHVwZGF0ZWQgdG8gaGFuZGxlIEpTT04gc3RydWN0dXJlKVxuICB7IFxuICAgIHBhdHRlcm46IC9cIihhcGlbXy1dP2tleXxhcGlLZXl8dG9rZW58c2VjcmV0fHBhc3N3b3JkKVwiXFxzKjpcXHMqXCJbXlwiXStcIi9naSwgXG4gICAgcmVwbGFjZW1lbnQ6IChtYXRjaDogc3RyaW5nLCBmaWVsZDogc3RyaW5nKSA9PiBgXCIke2ZpZWxkfVwiOlwiW1JFREFDVEVEXVwiYFxuICB9LFxuXTtcblxuZXhwb3J0IGNsYXNzIFN0cnVjdHVyZWRMb2dnZXIge1xuICBwcml2YXRlIGVudmlyb25tZW50OiBzdHJpbmc7XG4gIHByaXZhdGUgc2VydmljZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGVudmlyb25tZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ2RldmVsb3BtZW50Jywgc2VydmljZSA9ICdob2xpZGF5LWFnZ3JlZ2F0b3InKSB7XG4gICAgdGhpcy5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50O1xuICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XG4gIH1cblxuICAvKipcbiAgICogU2NydWJzIFBJSSBmcm9tIGFueSBkYXRhIG9iamVjdFxuICAgKi9cbiAgcHJpdmF0ZSBzY3J1YlBJSShkYXRhOiB1bmtub3duKTogdW5rbm93biB7XG4gICAgaWYgKCFkYXRhKSByZXR1cm4gZGF0YTtcblxuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICBsZXQgc2NydWJiZWQgPSBqc29uU3RyaW5nO1xuXG4gICAgZm9yIChjb25zdCB7IHBhdHRlcm4sIHJlcGxhY2VtZW50IH0gb2YgUElJX1BBVFRFUk5TKSB7XG4gICAgICBpZiAodHlwZW9mIHJlcGxhY2VtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICBzY3J1YmJlZCA9IHNjcnViYmVkLnJlcGxhY2UocGF0dGVybiwgcmVwbGFjZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2NydWJiZWQgPSBzY3J1YmJlZC5yZXBsYWNlKHBhdHRlcm4sIHJlcGxhY2VtZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2NydWJiZWQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gSWYgd2UgY2FuJ3QgcGFyc2UgaXQgYmFjaywgcmV0dXJuIHRoZSBvcmlnaW5hbCBkYXRhXG4gICAgICAvLyBidXQgbG9nIGEgd2FybmluZ1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcGFyc2Ugc2NydWJiZWQgZGF0YSwgcmV0dXJuaW5nIG9yaWdpbmFsJyk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGxvZyBlbnRyeSB3aXRoIHByb3BlciBzdHJ1Y3R1cmVcbiAgICovXG4gIHByaXZhdGUgY3JlYXRlTG9nRW50cnkoXG4gICAgbGV2ZWw6IExvZ0xldmVsLFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBjb250ZXh0OiBMb2dDb250ZXh0LFxuICAgIGRhdGE/OiB1bmtub3duLFxuICAgIGVycm9yPzogRXJyb3JcbiAgKTogTG9nRW50cnkge1xuICAgIGNvbnN0IGVudHJ5OiBMb2dFbnRyeSA9IHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbGV2ZWwsXG4gICAgICBtZXNzYWdlLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICBlbnZpcm9ubWVudDogdGhpcy5lbnZpcm9ubWVudCxcbiAgICAgICAgc2VydmljZTogdGhpcy5zZXJ2aWNlLFxuICAgICAgfSBhcyBMb2dDb250ZXh0LFxuICAgIH07XG5cbiAgICBpZiAoZGF0YSkge1xuICAgICAgZW50cnkuZGF0YSA9IHRoaXMuc2NydWJQSUkoZGF0YSkgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gICAgfVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlbnRyeS5lcnJvciA9IHtcbiAgICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IHRoaXMuZW52aXJvbm1lbnQgPT09ICdkZXZlbG9wbWVudCcgfHwgdGhpcy5lbnZpcm9ubWVudCA9PT0gJ3Rlc3QnID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBlbnRyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXRwdXRzIHRoZSBsb2cgZW50cnlcbiAgICovXG4gIHByaXZhdGUgb3V0cHV0KGVudHJ5OiBMb2dFbnRyeSk6IHZvaWQge1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShlbnRyeSk7XG5cbiAgICAvLyBJbiBwcm9kdWN0aW9uLCB3ZSdkIHNlbmQgdGhpcyB0byBhIGxvZyBhZ2dyZWdhdGlvbiBzZXJ2aWNlXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgdXNlIGNvbnNvbGUgbWV0aG9kcyBiYXNlZCBvbiBsZXZlbFxuICAgIHN3aXRjaCAoZW50cnkubGV2ZWwpIHtcbiAgICAgIGNhc2UgJ2RlYnVnJzpcbiAgICAgICAgaWYgKHRoaXMuZW52aXJvbm1lbnQgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKGpzb24pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICAgIGNvbnNvbGUuaW5mbyhqc29uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgY29uc29sZS53YXJuKGpzb24pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgY29uc29sZS5lcnJvcihqc29uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZGVidWcobWVzc2FnZTogc3RyaW5nLCBjb250ZXh0OiBMb2dDb250ZXh0LCBkYXRhPzogdW5rbm93bik6IHZvaWQge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jcmVhdGVMb2dFbnRyeSgnZGVidWcnLCBtZXNzYWdlLCBjb250ZXh0LCBkYXRhKTtcbiAgICB0aGlzLm91dHB1dChlbnRyeSk7XG4gIH1cblxuICBpbmZvKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dDogTG9nQ29udGV4dCwgZGF0YT86IHVua25vd24pOiB2b2lkIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuY3JlYXRlTG9nRW50cnkoJ2luZm8nLCBtZXNzYWdlLCBjb250ZXh0LCBkYXRhKTtcbiAgICB0aGlzLm91dHB1dChlbnRyeSk7XG4gIH1cblxuICB3YXJuKG1lc3NhZ2U6IHN0cmluZywgY29udGV4dDogTG9nQ29udGV4dCwgZGF0YT86IHVua25vd24pOiB2b2lkIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuY3JlYXRlTG9nRW50cnkoJ3dhcm4nLCBtZXNzYWdlLCBjb250ZXh0LCBkYXRhKTtcbiAgICB0aGlzLm91dHB1dChlbnRyeSk7XG4gIH1cblxuICBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ6IExvZ0NvbnRleHQsIGVycm9yPzogRXJyb3IsIGRhdGE/OiB1bmtub3duKTogdm9pZCB7XG4gICAgY29uc3QgZW50cnkgPSB0aGlzLmNyZWF0ZUxvZ0VudHJ5KCdlcnJvcicsIG1lc3NhZ2UsIGNvbnRleHQsIGRhdGEsIGVycm9yKTtcbiAgICB0aGlzLm91dHB1dChlbnRyeSk7XG4gIH1cbn1cblxuLy8gRGVmYXVsdCBsb2dnZXIgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBuZXcgU3RydWN0dXJlZExvZ2dlcigpO1xuXG4vKipcbiAqIEV4dHJhY3RzIG9yIGdlbmVyYXRlcyBhIGNvcnJlbGF0aW9uIElEIGZyb20gYSByZXF1ZXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JyZWxhdGlvbklkKHJlcTogTmV4dEFwaVJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBjb3JyZWxhdGlvbklkID0gcmVxLmhlYWRlcnNbJ3gtY29ycmVsYXRpb24taWQnXSBhcyBzdHJpbmc7XG4gIHJldHVybiBjb3JyZWxhdGlvbklkIHx8IGdlbmVyYXRlQ29ycmVsYXRpb25JZCgpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIG5ldyBjb3JyZWxhdGlvbiBJRFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDb3JyZWxhdGlvbklkKCk6IHN0cmluZyB7XG4gIC8vIFNpbXBsZSBpbXBsZW1lbnRhdGlvbiAtIGluIHByb2R1Y3Rpb24sIHlvdSBtaWdodCB1c2UgbmFub2lkIG9yIHV1aWRcbiAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDExKX1gO1xufSJdLCJuYW1lcyI6WyJQSUlfUEFUVEVSTlMiLCJwYXR0ZXJuIiwicmVwbGFjZW1lbnQiLCJtYXRjaCIsImZpZWxkIiwiU3RydWN0dXJlZExvZ2dlciIsImVudmlyb25tZW50IiwicHJvY2VzcyIsInNlcnZpY2UiLCJzY3J1YlBJSSIsImRhdGEiLCJqc29uU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsInNjcnViYmVkIiwicmVwbGFjZSIsInBhcnNlIiwiY29uc29sZSIsIndhcm4iLCJjcmVhdGVMb2dFbnRyeSIsImxldmVsIiwibWVzc2FnZSIsImNvbnRleHQiLCJlcnJvciIsImVudHJ5IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibmFtZSIsInN0YWNrIiwidW5kZWZpbmVkIiwib3V0cHV0IiwianNvbiIsImRlYnVnIiwiaW5mbyIsImxvZ2dlciIsImdldENvcnJlbGF0aW9uSWQiLCJyZXEiLCJjb3JyZWxhdGlvbklkIiwiaGVhZGVycyIsImdlbmVyYXRlQ29ycmVsYXRpb25JZCIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/logger.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/requestContext.ts":
/*!*************************************!*\
  !*** ./src/utils/requestContext.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentCorrelationId: () => (/* binding */ getCurrentCorrelationId),\n/* harmony export */   getRequestContext: () => (/* binding */ getRequestContext),\n/* harmony export */   requestContextStorage: () => (/* binding */ requestContextStorage),\n/* harmony export */   updateRequestContext: () => (/* binding */ updateRequestContext),\n/* harmony export */   withRequestContext: () => (/* binding */ withRequestContext)\n/* harmony export */ });\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:async_hooks */ \"node:async_hooks\");\n/* harmony import */ var node_async_hooks__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_async_hooks__WEBPACK_IMPORTED_MODULE_0__);\n\n// Create AsyncLocalStorage instance for request context\nconst requestContextStorage = new node_async_hooks__WEBPACK_IMPORTED_MODULE_0__.AsyncLocalStorage();\n/**\n * Runs a function with the given request context\n */ function withRequestContext(context, fn) {\n    return requestContextStorage.run(context, fn);\n}\n/**\n * Gets the current request context\n */ function getRequestContext() {\n    return requestContextStorage.getStore();\n}\n/**\n * Gets the current correlation ID from context\n */ function getCurrentCorrelationId() {\n    const context = getRequestContext();\n    return context?.correlationId;\n}\n/**\n * Updates the current request context with additional data\n */ function updateRequestContext(updates) {\n    const currentContext = getRequestContext();\n    if (currentContext) {\n        Object.assign(currentContext, updates);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9yZXF1ZXN0Q29udGV4dC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFEO0FBVXJELHdEQUF3RDtBQUNqRCxNQUFNQyx3QkFBd0IsSUFBSUQsK0RBQWlCQSxHQUFtQjtBQUU3RTs7Q0FFQyxHQUNNLFNBQVNFLG1CQUNkQyxPQUF1QixFQUN2QkMsRUFBd0I7SUFFeEIsT0FBT0gsc0JBQXNCSSxHQUFHLENBQUNGLFNBQVNDO0FBQzVDO0FBRUE7O0NBRUMsR0FDTSxTQUFTRTtJQUNkLE9BQU9MLHNCQUFzQk0sUUFBUTtBQUN2QztBQUVBOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxNQUFNTCxVQUFVRztJQUNoQixPQUFPSCxTQUFTTTtBQUNsQjtBQUVBOztDQUVDLEdBQ00sU0FBU0MscUJBQXFCQyxPQUFnQztJQUNuRSxNQUFNQyxpQkFBaUJOO0lBQ3ZCLElBQUlNLGdCQUFnQjtRQUNsQkMsT0FBT0MsTUFBTSxDQUFDRixnQkFBZ0JEO0lBQ2hDO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdXRpbHMvcmVxdWVzdENvbnRleHQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNMb2NhbFN0b3JhZ2UgfSBmcm9tICdub2RlOmFzeW5jX2hvb2tzJztcblxuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0Q29udGV4dCB7XG4gIGNvcnJlbGF0aW9uSWQ6IHN0cmluZztcbiAgdXNlcklkPzogc3RyaW5nO1xuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XG4gIGpvdXJuZXk/OiBzdHJpbmc7XG4gIHN0YXJ0VGltZTogbnVtYmVyO1xufVxuXG4vLyBDcmVhdGUgQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgZm9yIHJlcXVlc3QgY29udGV4dFxuZXhwb3J0IGNvbnN0IHJlcXVlc3RDb250ZXh0U3RvcmFnZSA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZTxSZXF1ZXN0Q29udGV4dD4oKTtcblxuLyoqXG4gKiBSdW5zIGEgZnVuY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gcmVxdWVzdCBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmVxdWVzdENvbnRleHQ8VD4oXG4gIGNvbnRleHQ6IFJlcXVlc3RDb250ZXh0LFxuICBmbjogKCkgPT4gVCB8IFByb21pc2U8VD5cbik6IFQgfCBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIHJlcXVlc3RDb250ZXh0U3RvcmFnZS5ydW4oY29udGV4dCwgZm4pO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgcmVxdWVzdCBjb250ZXh0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1ZXN0Q29udGV4dCgpOiBSZXF1ZXN0Q29udGV4dCB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiByZXF1ZXN0Q29udGV4dFN0b3JhZ2UuZ2V0U3RvcmUoKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBjdXJyZW50IGNvcnJlbGF0aW9uIElEIGZyb20gY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudENvcnJlbGF0aW9uSWQoKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgY29udGV4dCA9IGdldFJlcXVlc3RDb250ZXh0KCk7XG4gIHJldHVybiBjb250ZXh0Py5jb3JyZWxhdGlvbklkO1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgcmVxdWVzdCBjb250ZXh0IHdpdGggYWRkaXRpb25hbCBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZXF1ZXN0Q29udGV4dCh1cGRhdGVzOiBQYXJ0aWFsPFJlcXVlc3RDb250ZXh0Pik6IHZvaWQge1xuICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldFJlcXVlc3RDb250ZXh0KCk7XG4gIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgIE9iamVjdC5hc3NpZ24oY3VycmVudENvbnRleHQsIHVwZGF0ZXMpO1xuICB9XG59Il0sIm5hbWVzIjpbIkFzeW5jTG9jYWxTdG9yYWdlIiwicmVxdWVzdENvbnRleHRTdG9yYWdlIiwid2l0aFJlcXVlc3RDb250ZXh0IiwiY29udGV4dCIsImZuIiwicnVuIiwiZ2V0UmVxdWVzdENvbnRleHQiLCJnZXRTdG9yZSIsImdldEN1cnJlbnRDb3JyZWxhdGlvbklkIiwiY29ycmVsYXRpb25JZCIsInVwZGF0ZVJlcXVlc3RDb250ZXh0IiwidXBkYXRlcyIsImN1cnJlbnRDb250ZXh0IiwiT2JqZWN0IiwiYXNzaWduIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/requestContext.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/stripe.ts":
/*!*****************************!*\
  !*** ./src/utils/stripe.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANNUAL_SUBSCRIPTION_CONFIG: () => (/* binding */ ANNUAL_SUBSCRIPTION_CONFIG),\n/* harmony export */   cancelSubscription: () => (/* binding */ cancelSubscription),\n/* harmony export */   constructWebhookEvent: () => (/* binding */ constructWebhookEvent),\n/* harmony export */   createCheckoutSession: () => (/* binding */ createCheckoutSession),\n/* harmony export */   createStripeCustomer: () => (/* binding */ createStripeCustomer),\n/* harmony export */   getSubscription: () => (/* binding */ getSubscription),\n/* harmony export */   stripe: () => (/* binding */ stripe)\n/* harmony export */ });\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stripe */ \"stripe\");\n/* harmony import */ var _env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ~/env.mjs */ \"(api-node)/./src/env.mjs\");\n/* harmony import */ var _utils_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ~/utils/logger */ \"(api-node)/./src/utils/logger.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([stripe__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__]);\n([stripe__WEBPACK_IMPORTED_MODULE_0__, _env_mjs__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst stripe = _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_SECRET_KEY ? new stripe__WEBPACK_IMPORTED_MODULE_0__[\"default\"](_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_SECRET_KEY, {\n    apiVersion: \"2025-07-30.basil\",\n    typescript: true\n}) : null;\nconst ANNUAL_SUBSCRIPTION_CONFIG = {\n    mode: \"subscription\",\n    priceId: _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_ANNUAL_PRICE_ID ?? \"\",\n    recurring: {\n        interval: \"year\",\n        interval_count: 1\n    }\n};\nasync function createStripeCustomer(email, userId, name) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    const customer = await stripe.customers.create({\n        email,\n        name: name ?? undefined,\n        metadata: {\n            userId\n        }\n    });\n    return customer;\n}\nasync function createCheckoutSession(customerId, userId, priceId, successUrl, cancelUrl) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    if (!priceId || priceId === \"price_...\") {\n        throw new Error(\"Invalid Stripe price ID. Please set STRIPE_ANNUAL_PRICE_ID in your .env file with a valid price ID from your Stripe dashboard.\");\n    }\n    const session = await stripe.checkout.sessions.create({\n        customer: customerId,\n        payment_method_types: [\n            \"card\"\n        ],\n        billing_address_collection: \"required\",\n        line_items: [\n            {\n                price: priceId,\n                quantity: 1\n            }\n        ],\n        mode: \"subscription\",\n        allow_promotion_codes: true,\n        subscription_data: {\n            metadata: {\n                userId\n            }\n        },\n        success_url: successUrl,\n        cancel_url: cancelUrl,\n        metadata: {\n            userId\n        }\n    });\n    return session;\n}\nasync function constructWebhookEvent(rawBody, signature) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    if (!_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_WEBHOOK_SECRET) {\n        throw new Error(\"Stripe webhook secret is not configured. Please set STRIPE_WEBHOOK_SECRET in your .env file.\");\n    }\n    try {\n        const event = stripe.webhooks.constructEvent(rawBody, signature, _env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.STRIPE_WEBHOOK_SECRET);\n        return event;\n    } catch (err) {\n        _utils_logger__WEBPACK_IMPORTED_MODULE_2__.logger.error(\"Webhook signature verification failed\", {\n            error: err\n        });\n        throw new Error(\"Webhook signature verification failed\");\n    }\n}\nasync function getSubscription(subscriptionId) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    return stripe.subscriptions.retrieve(subscriptionId);\n}\nasync function cancelSubscription(subscriptionId) {\n    if (!stripe) {\n        throw new Error(\"Stripe is not configured. Please set STRIPE_SECRET_KEY in your .env file.\");\n    }\n    return stripe.subscriptions.update(subscriptionId, {\n        cancel_at_period_end: true\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy91dGlscy9zdHJpcGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUE0QjtBQUNJO0FBQ1E7QUFFakMsTUFBTUcsU0FBU0YseUNBQUdBLENBQUNHLGlCQUFpQixHQUN2QyxJQUFJSiw4Q0FBTUEsQ0FDUkMseUNBQUdBLENBQUNHLGlCQUFpQixFQUNyQjtJQUNFQyxZQUFZO0lBQ1pDLFlBQVk7QUFDZCxLQUVGLEtBQUs7QUFFRixNQUFNQyw2QkFBNkI7SUFDeENDLE1BQU07SUFDTkMsU0FBU1IseUNBQUdBLENBQUNTLHNCQUFzQixJQUFJO0lBQ3ZDQyxXQUFXO1FBQ1RDLFVBQVU7UUFDVkMsZ0JBQWdCO0lBQ2xCO0FBQ0YsRUFBRTtBQUVLLGVBQWVDLHFCQUNwQkMsS0FBYSxFQUNiQyxNQUFjLEVBQ2RDLElBQW9CO0lBRXBCLElBQUksQ0FBQ2QsUUFBUTtRQUNYLE1BQU0sSUFBSWUsTUFDUjtJQUVKO0lBRUEsTUFBTUMsV0FBVyxNQUFNaEIsT0FBT2lCLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDO1FBQzdDTjtRQUNBRSxNQUFNQSxRQUFRSztRQUNkQyxVQUFVO1lBQ1JQO1FBQ0Y7SUFDRjtJQUVBLE9BQU9HO0FBQ1Q7QUFFTyxlQUFlSyxzQkFDcEJDLFVBQWtCLEVBQ2xCVCxNQUFjLEVBQ2RQLE9BQWUsRUFDZmlCLFVBQWtCLEVBQ2xCQyxTQUFpQjtJQUVqQixJQUFJLENBQUN4QixRQUFRO1FBQ1gsTUFBTSxJQUFJZSxNQUNSO0lBRUo7SUFFQSxJQUFJLENBQUNULFdBQVdBLFlBQVksYUFBYTtRQUN2QyxNQUFNLElBQUlTLE1BQ1I7SUFFSjtJQUVBLE1BQU1VLFVBQVUsTUFBTXpCLE9BQU8wQixRQUFRLENBQUNDLFFBQVEsQ0FBQ1QsTUFBTSxDQUFDO1FBQ3BERixVQUFVTTtRQUNWTSxzQkFBc0I7WUFBQztTQUFPO1FBQzlCQyw0QkFBNEI7UUFDNUJDLFlBQVk7WUFDVjtnQkFDRUMsT0FBT3pCO2dCQUNQMEIsVUFBVTtZQUNaO1NBQ0Q7UUFDRDNCLE1BQU07UUFDTjRCLHVCQUF1QjtRQUN2QkMsbUJBQW1CO1lBQ2pCZCxVQUFVO2dCQUNSUDtZQUNGO1FBQ0Y7UUFDQXNCLGFBQWFaO1FBQ2JhLFlBQVlaO1FBQ1pKLFVBQVU7WUFDUlA7UUFDRjtJQUNGO0lBRUEsT0FBT1k7QUFDVDtBQUVPLGVBQWVZLHNCQUNwQkMsT0FBd0IsRUFDeEJDLFNBQWlCO0lBRWpCLElBQUksQ0FBQ3ZDLFFBQVE7UUFDWCxNQUFNLElBQUllLE1BQ1I7SUFFSjtJQUVBLElBQUksQ0FBQ2pCLHlDQUFHQSxDQUFDMEMscUJBQXFCLEVBQUU7UUFDOUIsTUFBTSxJQUFJekIsTUFDUjtJQUVKO0lBRUEsSUFBSTtRQUNGLE1BQU0wQixRQUFRekMsT0FBTzBDLFFBQVEsQ0FBQ0MsY0FBYyxDQUMxQ0wsU0FDQUMsV0FDQXpDLHlDQUFHQSxDQUFDMEMscUJBQXFCO1FBRTNCLE9BQU9DO0lBQ1QsRUFBRSxPQUFPRyxLQUFLO1FBQ1o3QyxpREFBTUEsQ0FBQzhDLEtBQUssQ0FBQyx5Q0FBeUM7WUFBRUEsT0FBT0Q7UUFBSTtRQUNuRSxNQUFNLElBQUk3QixNQUFNO0lBQ2xCO0FBQ0Y7QUFFTyxlQUFlK0IsZ0JBQWdCQyxjQUFzQjtJQUMxRCxJQUFJLENBQUMvQyxRQUFRO1FBQ1gsTUFBTSxJQUFJZSxNQUNSO0lBRUo7SUFFQSxPQUFPZixPQUFPZ0QsYUFBYSxDQUFDQyxRQUFRLENBQUNGO0FBQ3ZDO0FBRU8sZUFBZUcsbUJBQW1CSCxjQUFzQjtJQUM3RCxJQUFJLENBQUMvQyxRQUFRO1FBQ1gsTUFBTSxJQUFJZSxNQUNSO0lBRUo7SUFFQSxPQUFPZixPQUFPZ0QsYUFBYSxDQUFDRyxNQUFNLENBQUNKLGdCQUFnQjtRQUNqREssc0JBQXNCO0lBQ3hCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdXRpbHMvc3RyaXBlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTdHJpcGUgZnJvbSBcInN0cmlwZVwiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIn4vZW52Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIn4vdXRpbHMvbG9nZ2VyXCI7XG5cbmV4cG9ydCBjb25zdCBzdHJpcGUgPSBlbnYuU1RSSVBFX1NFQ1JFVF9LRVkgXG4gID8gbmV3IFN0cmlwZShcbiAgICAgIGVudi5TVFJJUEVfU0VDUkVUX0tFWSxcbiAgICAgIHtcbiAgICAgICAgYXBpVmVyc2lvbjogXCIyMDI1LTA3LTMwLmJhc2lsXCIsXG4gICAgICAgIHR5cGVzY3JpcHQ6IHRydWUsXG4gICAgICB9XG4gICAgKVxuICA6IG51bGw7XG5cbmV4cG9ydCBjb25zdCBBTk5VQUxfU1VCU0NSSVBUSU9OX0NPTkZJRyA9IHtcbiAgbW9kZTogXCJzdWJzY3JpcHRpb25cIiBhcyBjb25zdCxcbiAgcHJpY2VJZDogZW52LlNUUklQRV9BTk5VQUxfUFJJQ0VfSUQgPz8gXCJcIixcbiAgcmVjdXJyaW5nOiB7XG4gICAgaW50ZXJ2YWw6IFwieWVhclwiIGFzIGNvbnN0LFxuICAgIGludGVydmFsX2NvdW50OiAxLFxuICB9LFxufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVN0cmlwZUN1c3RvbWVyKFxuICBlbWFpbDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgbmFtZT86IHN0cmluZyB8IG51bGxcbikge1xuICBpZiAoIXN0cmlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IFNUUklQRV9TRUNSRVRfS0VZIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLmNyZWF0ZSh7XG4gICAgZW1haWwsXG4gICAgbmFtZTogbmFtZSA/PyB1bmRlZmluZWQsXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIHVzZXJJZCxcbiAgICB9LFxuICB9KTtcbiAgXG4gIHJldHVybiBjdXN0b21lcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbihcbiAgY3VzdG9tZXJJZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgcHJpY2VJZDogc3RyaW5nLFxuICBzdWNjZXNzVXJsOiBzdHJpbmcsXG4gIGNhbmNlbFVybDogc3RyaW5nXG4pIHtcbiAgaWYgKCFzdHJpcGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlN0cmlwZSBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBTVFJJUEVfU0VDUkVUX0tFWSBpbiB5b3VyIC5lbnYgZmlsZS5cIlxuICAgICk7XG4gIH1cbiAgXG4gIGlmICghcHJpY2VJZCB8fCBwcmljZUlkID09PSBcInByaWNlXy4uLlwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJJbnZhbGlkIFN0cmlwZSBwcmljZSBJRC4gUGxlYXNlIHNldCBTVFJJUEVfQU5OVUFMX1BSSUNFX0lEIGluIHlvdXIgLmVudiBmaWxlIHdpdGggYSB2YWxpZCBwcmljZSBJRCBmcm9tIHlvdXIgU3RyaXBlIGRhc2hib2FyZC5cIlxuICAgICk7XG4gIH1cbiAgXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBzdHJpcGUuY2hlY2tvdXQuc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICBjdXN0b21lcjogY3VzdG9tZXJJZCxcbiAgICBwYXltZW50X21ldGhvZF90eXBlczogW1wiY2FyZFwiXSxcbiAgICBiaWxsaW5nX2FkZHJlc3NfY29sbGVjdGlvbjogXCJyZXF1aXJlZFwiLFxuICAgIGxpbmVfaXRlbXM6IFtcbiAgICAgIHtcbiAgICAgICAgcHJpY2U6IHByaWNlSWQsXG4gICAgICAgIHF1YW50aXR5OiAxLFxuICAgICAgfSxcbiAgICBdLFxuICAgIG1vZGU6IFwic3Vic2NyaXB0aW9uXCIsXG4gICAgYWxsb3dfcHJvbW90aW9uX2NvZGVzOiB0cnVlLFxuICAgIHN1YnNjcmlwdGlvbl9kYXRhOiB7XG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB1c2VySWQsXG4gICAgICB9LFxuICAgIH0sXG4gICAgc3VjY2Vzc191cmw6IHN1Y2Nlc3NVcmwsXG4gICAgY2FuY2VsX3VybDogY2FuY2VsVXJsLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB1c2VySWQsXG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIHNlc3Npb247XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25zdHJ1Y3RXZWJob29rRXZlbnQoXG4gIHJhd0JvZHk6IHN0cmluZyB8IEJ1ZmZlcixcbiAgc2lnbmF0dXJlOiBzdHJpbmdcbikge1xuICBpZiAoIXN0cmlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiU3RyaXBlIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IFNUUklQRV9TRUNSRVRfS0VZIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgaWYgKCFlbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJTdHJpcGUgd2ViaG9vayBzZWNyZXQgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgU1RSSVBFX1dFQkhPT0tfU0VDUkVUIGluIHlvdXIgLmVudiBmaWxlLlwiXG4gICAgKTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBldmVudCA9IHN0cmlwZS53ZWJob29rcy5jb25zdHJ1Y3RFdmVudChcbiAgICAgIHJhd0JvZHksXG4gICAgICBzaWduYXR1cmUsXG4gICAgICBlbnYuU1RSSVBFX1dFQkhPT0tfU0VDUkVUXG4gICAgKTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci5lcnJvcihcIldlYmhvb2sgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIiwgeyBlcnJvcjogZXJyIH0pO1xuICAgIHRocm93IG5ldyBFcnJvcihcIldlYmhvb2sgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbiBmYWlsZWRcIik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25JZDogc3RyaW5nKSB7XG4gIGlmICghc3RyaXBlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJTdHJpcGUgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgU1RSSVBFX1NFQ1JFVF9LRVkgaW4geW91ciAuZW52IGZpbGUuXCJcbiAgICApO1xuICB9XG4gIFxuICByZXR1cm4gc3RyaXBlLnN1YnNjcmlwdGlvbnMucmV0cmlldmUoc3Vic2NyaXB0aW9uSWQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbklkOiBzdHJpbmcpIHtcbiAgaWYgKCFzdHJpcGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIlN0cmlwZSBpcyBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCBTVFJJUEVfU0VDUkVUX0tFWSBpbiB5b3VyIC5lbnYgZmlsZS5cIlxuICAgICk7XG4gIH1cbiAgXG4gIHJldHVybiBzdHJpcGUuc3Vic2NyaXB0aW9ucy51cGRhdGUoc3Vic2NyaXB0aW9uSWQsIHtcbiAgICBjYW5jZWxfYXRfcGVyaW9kX2VuZDogdHJ1ZSxcbiAgfSk7XG59Il0sIm5hbWVzIjpbIlN0cmlwZSIsImVudiIsImxvZ2dlciIsInN0cmlwZSIsIlNUUklQRV9TRUNSRVRfS0VZIiwiYXBpVmVyc2lvbiIsInR5cGVzY3JpcHQiLCJBTk5VQUxfU1VCU0NSSVBUSU9OX0NPTkZJRyIsIm1vZGUiLCJwcmljZUlkIiwiU1RSSVBFX0FOTlVBTF9QUklDRV9JRCIsInJlY3VycmluZyIsImludGVydmFsIiwiaW50ZXJ2YWxfY291bnQiLCJjcmVhdGVTdHJpcGVDdXN0b21lciIsImVtYWlsIiwidXNlcklkIiwibmFtZSIsIkVycm9yIiwiY3VzdG9tZXIiLCJjdXN0b21lcnMiLCJjcmVhdGUiLCJ1bmRlZmluZWQiLCJtZXRhZGF0YSIsImNyZWF0ZUNoZWNrb3V0U2Vzc2lvbiIsImN1c3RvbWVySWQiLCJzdWNjZXNzVXJsIiwiY2FuY2VsVXJsIiwic2Vzc2lvbiIsImNoZWNrb3V0Iiwic2Vzc2lvbnMiLCJwYXltZW50X21ldGhvZF90eXBlcyIsImJpbGxpbmdfYWRkcmVzc19jb2xsZWN0aW9uIiwibGluZV9pdGVtcyIsInByaWNlIiwicXVhbnRpdHkiLCJhbGxvd19wcm9tb3Rpb25fY29kZXMiLCJzdWJzY3JpcHRpb25fZGF0YSIsInN1Y2Nlc3NfdXJsIiwiY2FuY2VsX3VybCIsImNvbnN0cnVjdFdlYmhvb2tFdmVudCIsInJhd0JvZHkiLCJzaWduYXR1cmUiLCJTVFJJUEVfV0VCSE9PS19TRUNSRVQiLCJldmVudCIsIndlYmhvb2tzIiwiY29uc3RydWN0RXZlbnQiLCJlcnIiLCJlcnJvciIsImdldFN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbklkIiwic3Vic2NyaXB0aW9ucyIsInJldHJpZXZlIiwiY2FuY2VsU3Vic2NyaXB0aW9uIiwidXBkYXRlIiwiY2FuY2VsX2F0X3BlcmlvZF9lbmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/stripe.ts\n");

/***/ }),

/***/ "(api-node)/./src/utils/subscription.ts":
/*!***********************************!*\
  !*** ./src/utils/subscription.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canCancelSubscription: () => (/* binding */ canCancelSubscription),\n/* harmony export */   canResumeSubscription: () => (/* binding */ canResumeSubscription),\n/* harmony export */   doesSubscriptionNeedRenewal: () => (/* binding */ doesSubscriptionNeedRenewal),\n/* harmony export */   getDaysUntilExpiry: () => (/* binding */ getDaysUntilExpiry),\n/* harmony export */   getSubscriptionStatusColor: () => (/* binding */ getSubscriptionStatusColor),\n/* harmony export */   getSubscriptionStatusLabel: () => (/* binding */ getSubscriptionStatusLabel),\n/* harmony export */   isSubscriptionActive: () => (/* binding */ isSubscriptionActive),\n/* harmony export */   isSubscriptionInTrial: () => (/* binding */ isSubscriptionInTrial)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\n * Check if a subscription is currently active\n */ function isSubscriptionActive(subscription) {\n    if (!subscription) return false;\n    return subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && (!subscription.expiresAt || subscription.expiresAt > new Date());\n}\n/**\n * Check if a subscription is in trial period\n */ function isSubscriptionInTrial(subscription) {\n    if (!subscription) return false;\n    // Check if subscription is active and has a trial end date in the future\n    return subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && subscription.trialEndsAt !== null && subscription.trialEndsAt > new Date();\n}\n/**\n * Check if a subscription needs renewal\n */ function doesSubscriptionNeedRenewal(subscription) {\n    if (!subscription) return false;\n    const needsRenewal = subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PAST_DUE || subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.CANCELED || subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.EXPIRED || subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING;\n    return needsRenewal;\n}\n/**\n * Get human-readable subscription status\n */ function getSubscriptionStatusLabel(subscription) {\n    if (!subscription) return \"No Subscription\";\n    switch(subscription.status){\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE:\n            return subscription.cancelAtPeriodEnd ? \"Active (Canceling)\" : \"Active\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING:\n            return \"Pending\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PAST_DUE:\n            return \"Past Due\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.CANCELED:\n            return \"Canceled\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.EXPIRED:\n            return \"Expired\";\n        default:\n            return \"Unknown\";\n    }\n}\n/**\n * Get subscription status color for UI\n */ function getSubscriptionStatusColor(subscription) {\n    if (!subscription) return \"gray\";\n    switch(subscription.status){\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE:\n            return subscription.cancelAtPeriodEnd ? \"yellow\" : \"green\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PENDING:\n            return \"yellow\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.PAST_DUE:\n            return \"red\";\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.CANCELED:\n        case _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.EXPIRED:\n            return \"gray\";\n        default:\n            return \"gray\";\n    }\n}\n/**\n * Calculate days until subscription expires\n */ function getDaysUntilExpiry(subscription) {\n    if (!subscription || !subscription.currentPeriodEnd) return null;\n    const now = new Date();\n    const expiryDate = new Date(subscription.currentPeriodEnd);\n    const diffTime = expiryDate.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    return diffDays;\n}\n/**\n * Check if subscription can be canceled\n */ function canCancelSubscription(subscription) {\n    if (!subscription) return false;\n    return subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && !subscription.cancelAtPeriodEnd && subscription.stripeSubscriptionId !== null;\n}\n/**\n * Check if subscription can be resumed (un-canceled)\n */ function canResumeSubscription(subscription) {\n    if (!subscription) return false;\n    return subscription.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.SubscriptionStatus.ACTIVE && subscription.cancelAtPeriodEnd === true && subscription.stripeSubscriptionId !== null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBaUIsSUFDL0JkLGFBQWEwQixvQkFBb0IsS0FBSztBQUUxQztBQUVBOztDQUVDLEdBQ00sU0FBU0Msc0JBQXNCM0IsWUFBb0Q7SUFDeEYsSUFBSSxDQUFDQSxjQUFjLE9BQU87SUFFMUIsT0FDRUEsYUFBYUMsTUFBTSxLQUFLSCw4REFBa0JBLENBQUNJLE1BQU0sSUFDakRGLGFBQWFjLGlCQUFpQixLQUFLLFFBQ25DZCxhQUFhMEIsb0JBQW9CLEtBQUs7QUFFMUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zZXJnZWkuZGF2aWRvdkBjbGVhcnJvdXRlLmlvL0RvY3VtZW50cy9ob2xpZGF5LXByb2dyYW0tYWdncmVnYXRvci9hcHBzL3dlYi9zcmMvdXRpbHMvc3Vic2NyaXB0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YnNjcmlwdGlvblN0YXR1cyB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IHR5cGUgeyBTdWJzY3JpcHRpb24gfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuLy8gTWluaW1hbCBzdWJzY3JpcHRpb24gZGF0YSBuZWVkZWQgZm9yIHN0YXR1cyBjaGVja3NcbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uRGF0YSB7XG4gIHN0YXR1czogU3Vic2NyaXB0aW9uU3RhdHVzO1xuICBleHBpcmVzQXQ6IERhdGUgfCBudWxsO1xuICBjdXJyZW50UGVyaW9kRW5kOiBEYXRlIHwgbnVsbDtcbiAgY2FuY2VsQXRQZXJpb2RFbmQ6IGJvb2xlYW47XG4gIHRyaWFsRW5kc0F0PzogRGF0ZSB8IG51bGw7XG4gIHN0cmlwZVN1YnNjcmlwdGlvbklkPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHN1YnNjcmlwdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N1YnNjcmlwdGlvbkFjdGl2ZShzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbkRhdGEgfCBTdWJzY3JpcHRpb24gfCBudWxsKTogYm9vbGVhbiB7XG4gIGlmICghc3Vic2NyaXB0aW9uKSByZXR1cm4gZmFsc2U7XG4gIFxuICByZXR1cm4gKFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUgJiZcbiAgICAoIXN1YnNjcmlwdGlvbi5leHBpcmVzQXQgfHwgc3Vic2NyaXB0aW9uLmV4cGlyZXNBdCA+IG5ldyBEYXRlKCkpXG4gICk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdWJzY3JpcHRpb24gaXMgaW4gdHJpYWwgcGVyaW9kXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N1YnNjcmlwdGlvbkluVHJpYWwoc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb25EYXRhIHwgU3Vic2NyaXB0aW9uIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXN1YnNjcmlwdGlvbikgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gQ2hlY2sgaWYgc3Vic2NyaXB0aW9uIGlzIGFjdGl2ZSBhbmQgaGFzIGEgdHJpYWwgZW5kIGRhdGUgaW4gdGhlIGZ1dHVyZVxuICByZXR1cm4gKFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkUgJiZcbiAgICBzdWJzY3JpcHRpb24udHJpYWxFbmRzQXQgIT09IG51bGwgJiZcbiAgICBzdWJzY3JpcHRpb24udHJpYWxFbmRzQXQgPiBuZXcgRGF0ZSgpXG4gICk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdWJzY3JpcHRpb24gbmVlZHMgcmVuZXdhbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZG9lc1N1YnNjcmlwdGlvbk5lZWRSZW5ld2FsKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBib29sZWFuIHtcbiAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiBmYWxzZTtcbiAgXG4gIGNvbnN0IG5lZWRzUmVuZXdhbCA9IFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5QQVNUX0RVRSB8fFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5DQU5DRUxFRCB8fFxuICAgIHN1YnNjcmlwdGlvbi5zdGF0dXMgPT09IFN1YnNjcmlwdGlvblN0YXR1cy5FWFBJUkVEIHx8XG4gICAgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gU3Vic2NyaXB0aW9uU3RhdHVzLlBFTkRJTkc7XG4gICAgXG4gIHJldHVybiBuZWVkc1JlbmV3YWw7XG59XG5cbi8qKlxuICogR2V0IGh1bWFuLXJlYWRhYmxlIHN1YnNjcmlwdGlvbiBzdGF0dXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YnNjcmlwdGlvblN0YXR1c0xhYmVsKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBzdHJpbmcge1xuICBpZiAoIXN1YnNjcmlwdGlvbikgcmV0dXJuIFwiTm8gU3Vic2NyaXB0aW9uXCI7XG4gIFxuICBzd2l0Y2ggKHN1YnNjcmlwdGlvbi5zdGF0dXMpIHtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkU6XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmNhbmNlbEF0UGVyaW9kRW5kID8gXCJBY3RpdmUgKENhbmNlbGluZylcIiA6IFwiQWN0aXZlXCI7XG4gICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0dXMuUEVORElORzpcbiAgICAgIHJldHVybiBcIlBlbmRpbmdcIjtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5QQVNUX0RVRTpcbiAgICAgIHJldHVybiBcIlBhc3QgRHVlXCI7XG4gICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0dXMuQ0FOQ0VMRUQ6XG4gICAgICByZXR1cm4gXCJDYW5jZWxlZFwiO1xuICAgIGNhc2UgU3Vic2NyaXB0aW9uU3RhdHVzLkVYUElSRUQ6XG4gICAgICByZXR1cm4gXCJFeHBpcmVkXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIlVua25vd25cIjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBzdWJzY3JpcHRpb24gc3RhdHVzIGNvbG9yIGZvciBVSVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3Vic2NyaXB0aW9uU3RhdHVzQ29sb3Ioc3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb25EYXRhIHwgU3Vic2NyaXB0aW9uIHwgbnVsbCk6IHN0cmluZyB7XG4gIGlmICghc3Vic2NyaXB0aW9uKSByZXR1cm4gXCJncmF5XCI7XG4gIFxuICBzd2l0Y2ggKHN1YnNjcmlwdGlvbi5zdGF0dXMpIHtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5BQ1RJVkU6XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmNhbmNlbEF0UGVyaW9kRW5kID8gXCJ5ZWxsb3dcIiA6IFwiZ3JlZW5cIjtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5QRU5ESU5HOlxuICAgICAgcmV0dXJuIFwieWVsbG93XCI7XG4gICAgY2FzZSBTdWJzY3JpcHRpb25TdGF0dXMuUEFTVF9EVUU6XG4gICAgICByZXR1cm4gXCJyZWRcIjtcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5DQU5DRUxFRDpcbiAgICBjYXNlIFN1YnNjcmlwdGlvblN0YXR1cy5FWFBJUkVEOlxuICAgICAgcmV0dXJuIFwiZ3JheVwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJncmF5XCI7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgZGF5cyB1bnRpbCBzdWJzY3JpcHRpb24gZXhwaXJlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF5c1VudGlsRXhwaXJ5KHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBudW1iZXIgfCBudWxsIHtcbiAgaWYgKCFzdWJzY3JpcHRpb24gfHwgIXN1YnNjcmlwdGlvbi5jdXJyZW50UGVyaW9kRW5kKSByZXR1cm4gbnVsbDtcbiAgXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGV4cGlyeURhdGUgPSBuZXcgRGF0ZShzdWJzY3JpcHRpb24uY3VycmVudFBlcmlvZEVuZCk7XG4gIGNvbnN0IGRpZmZUaW1lID0gZXhwaXJ5RGF0ZS5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpO1xuICBjb25zdCBkaWZmRGF5cyA9IE1hdGguY2VpbChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gIFxuICByZXR1cm4gZGlmZkRheXM7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgc3Vic2NyaXB0aW9uIGNhbiBiZSBjYW5jZWxlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FuQ2FuY2VsU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBib29sZWFuIHtcbiAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiAoXG4gICAgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gU3Vic2NyaXB0aW9uU3RhdHVzLkFDVElWRSAmJlxuICAgICFzdWJzY3JpcHRpb24uY2FuY2VsQXRQZXJpb2RFbmQgJiZcbiAgICBzdWJzY3JpcHRpb24uc3RyaXBlU3Vic2NyaXB0aW9uSWQgIT09IG51bGxcbiAgKTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBzdWJzY3JpcHRpb24gY2FuIGJlIHJlc3VtZWQgKHVuLWNhbmNlbGVkKVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FuUmVzdW1lU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uRGF0YSB8IFN1YnNjcmlwdGlvbiB8IG51bGwpOiBib29sZWFuIHtcbiAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiAoXG4gICAgc3Vic2NyaXB0aW9uLnN0YXR1cyA9PT0gU3Vic2NyaXB0aW9uU3RhdHVzLkFDVElWRSAmJlxuICAgIHN1YnNjcmlwdGlvbi5jYW5jZWxBdFBlcmlvZEVuZCA9PT0gdHJ1ZSAmJlxuICAgIHN1YnNjcmlwdGlvbi5zdHJpcGVTdWJzY3JpcHRpb25JZCAhPT0gbnVsbFxuICApO1xufSJdLCJuYW1lcyI6WyJTdWJzY3JpcHRpb25TdGF0dXMiLCJpc1N1YnNjcmlwdGlvbkFjdGl2ZSIsInN1YnNjcmlwdGlvbiIsInN0YXR1cyIsIkFDVElWRSIsImV4cGlyZXNBdCIsIkRhdGUiLCJpc1N1YnNjcmlwdGlvbkluVHJpYWwiLCJ0cmlhbEVuZHNBdCIsImRvZXNTdWJzY3JpcHRpb25OZWVkUmVuZXdhbCIsIm5lZWRzUmVuZXdhbCIsIlBBU1RfRFVFIiwiQ0FOQ0VMRUQiLCJFWFBJUkVEIiwiUEVORElORyIsImdldFN1YnNjcmlwdGlvblN0YXR1c0xhYmVsIiwiY2FuY2VsQXRQZXJpb2RFbmQiLCJnZXRTdWJzY3JpcHRpb25TdGF0dXNDb2xvciIsImdldERheXNVbnRpbEV4cGlyeSIsImN1cnJlbnRQZXJpb2RFbmQiLCJub3ciLCJleHBpcnlEYXRlIiwiZGlmZlRpbWUiLCJnZXRUaW1lIiwiZGlmZkRheXMiLCJNYXRoIiwiY2VpbCIsImNhbkNhbmNlbFN1YnNjcmlwdGlvbiIsInN0cmlwZVN1YnNjcmlwdGlvbklkIiwiY2FuUmVzdW1lU3Vic2NyaXB0aW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/utils/subscription.ts\n");

/***/ }),

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "@t3-oss/env-nextjs":
/*!*************************************!*\
  !*** external "@t3-oss/env-nextjs" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("@t3-oss/env-nextjs");;

/***/ }),

/***/ "@trpc/server":
/*!*******************************!*\
  !*** external "@trpc/server" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("@trpc/server");;

/***/ }),

/***/ "@trpc/server/adapters/next":
/*!*********************************************!*\
  !*** external "@trpc/server/adapters/next" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = import("@trpc/server/adapters/next");;

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("bcryptjs");;

/***/ }),

/***/ "crypto-js":
/*!****************************!*\
  !*** external "crypto-js" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("crypto-js");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:async_hooks");

/***/ }),

/***/ "stripe":
/*!*************************!*\
  !*** external "stripe" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("stripe");;

/***/ }),

/***/ "superjson":
/*!****************************!*\
  !*** external "superjson" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("superjson");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1"], () => (__webpack_exec__("(api-node)/../../node_modules/.pnpm/next@15.4.5_@babel+core@7.28.0_@playwright+test@1.54.1_react-dom@19.1.1_react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();